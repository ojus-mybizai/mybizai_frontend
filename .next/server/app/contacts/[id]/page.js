(()=>{var e={};e.id=112,e.ids=[112],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},4504:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>d});var t=s(7096),l=s(6132),r=s(7284),i=s.n(r),n=s(2564),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);s.d(a,c);let d=["",{children:["contacts",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,769)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\contacts\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,6197)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],o=["D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\contacts\\[id]\\page.tsx"],x="/contacts/[id]/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/contacts/[id]/page",pathname:"/contacts/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9749:(e,a,s)=>{Promise.resolve().then(s.bind(s,5664))},5664:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>k});var t=s(3854),l=s(4218),r=s(1018),i=s(2882),n=s(2095),c=s(3092),d=s(1871),o=s(7416),x=s(6974),m=s(438),h=s(8954),p=s(4024),u=s(4920),y=s(6699),j=s(6104),g=s(6820),v=s(9737),f=s(4391),N=s(6361),b=s(9839);function k(){let e=(0,r.useRouter)(),a=(0,r.useParams)(),{accessToken:s}=(0,N.tN)(),{contacts:k,updateContact:w}=(0,N.sx)(),[C,_]=(0,l.useState)(null),[Z,z]=(0,l.useState)(!1),[P,S]=(0,l.useState)(!0),[q,M]=(0,l.useState)(!1),[F,D]=(0,l.useState)({}),[A,E]=(0,l.useState)({}),[O,I]=(0,l.useState)([]);(0,l.useEffect)(()=>{a.id&&L(Number(a.id))},[a.id,s]);let L=async a=>{if(s){S(!0);try{let e=await b.Zc.getContact(a,s);_(e),E({full_name:e.full_name,phone:e.phone,email:e.email,address:e.address,company:e.company,notes:e.notes,metadata:e.metadata});let t=Object.entries(e.metadata||{}).map(([e,a])=>({key:e,value:String(a)}));I(t)}catch(a){console.error("Failed to fetch contact:",a),a instanceof b.MS&&404===a.status&&(alert("Contact not found"),e.push("/contacts"))}finally{S(!1)}}},$=()=>{let e={};return A.full_name?.trim()||(e.full_name="Full name is required"),A.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(A.email)&&(e.email="Please enter a valid email address"),A.phone&&A.phone.length>20&&(e.phone="Phone number must be 20 characters or less"),D(e),0===Object.keys(e).length},G=(e,a)=>{E(s=>({...s,[e]:a})),F[e]&&D(a=>({...a,[e]:""}))},H=(e,a,s)=>{I(t=>t.map((t,l)=>l===e?{...t,[a]:s}:t))},R=e=>{I(a=>a.filter((a,s)=>s!==e))},Y=async()=>{if($()&&s&&C){M(!0);try{let e={};O.forEach(a=>{a.key.trim()&&a.value.trim()&&(e[a.key.trim()]=a.value.trim())});let a={...A,metadata:e},t=await b.Zc.updateContact(C.id,a,s);_(t),w(C.id,t),z(!1)}catch(e){console.error("Failed to update contact:",e),e instanceof b.MS?alert(`Failed to update contact: ${e.message}`):alert("Failed to update contact. Please try again.")}finally{M(!1)}}};return P?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"text-gray-500",children:"Loading contact..."})}):C?(0,t.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(j.z,{variant:"outline",onClick:()=>e.push("/contacts"),className:"flex items-center space-x-2",children:[t.jsx(i.Z,{className:"w-4 h-4"}),t.jsx("span",{children:"Back to Contacts"})]}),(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:C.full_name}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Contact Details"})]})]}),Z?(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(j.z,{variant:"outline",onClick:()=>{if(C){E({full_name:C.full_name,phone:C.phone,email:C.email,address:C.address,company:C.company,notes:C.notes,metadata:C.metadata});let e=Object.entries(C.metadata||{}).map(([e,a])=>({key:e,value:String(a)}));I(e)}z(!1),D({})},children:"Cancel"}),(0,t.jsxs)(j.z,{onClick:Y,isLoading:q,disabled:q,className:"flex items-center space-x-2",children:[t.jsx(c.Z,{className:"w-4 h-4"}),t.jsx("span",{children:"Save Changes"})]})]}):(0,t.jsxs)(j.z,{onClick:()=>z(!0),className:"flex items-center space-x-2",children:[t.jsx(n.Z,{className:"w-4 h-4"}),t.jsx("span",{children:"Edit Contact"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsxs)(f.Zb,{children:[t.jsx(f.Ol,{children:t.jsx(f.ll,{children:"Contact Information"})}),t.jsx(f.aY,{className:"space-y-6",children:Z?(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsx("div",{className:"md:col-span-2",children:t.jsx(g.I,{label:"Full Name *",value:A.full_name||"",onChange:e=>G("full_name",e.target.value),error:F.full_name})}),t.jsx(g.I,{label:"Phone",value:A.phone||"",onChange:e=>G("phone",e.target.value),error:F.phone}),t.jsx(g.I,{label:"Email",type:"email",value:A.email||"",onChange:e=>G("email",e.target.value),error:F.email}),t.jsx(g.I,{label:"Company",value:A.company||"",onChange:e=>G("company",e.target.value)}),t.jsx("div",{className:"md:col-span-2",children:t.jsx(g.I,{label:"Address",value:A.address||"",onChange:e=>G("address",e.target.value)})}),t.jsx("div",{className:"md:col-span-2",children:t.jsx(v.g,{label:"Notes",value:A.notes||"",onChange:e=>G("notes",e.target.value),className:"min-h-[100px]"})})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:t.jsx(d.Z,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-xl font-semibold",children:C.full_name}),C.company&&(0,t.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 flex items-center",children:[t.jsx(o.Z,{className:"w-4 h-4 mr-1"}),C.company]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[C.phone&&(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(x.Z,{className:"w-5 h-5 text-gray-400"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),t.jsx("a",{href:`tel:${C.phone}`,className:"text-blue-600 hover:underline",children:C.phone})]})]}),C.email&&(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(m.Z,{className:"w-5 h-5 text-gray-400"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),t.jsx("a",{href:`mailto:${C.email}`,className:"text-blue-600 hover:underline",children:C.email})]})]}),C.address&&(0,t.jsxs)("div",{className:"flex items-center space-x-3 md:col-span-2",children:[t.jsx(h.Z,{className:"w-5 h-5 text-gray-400"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Address"}),t.jsx("p",{children:C.address})]})]})]}),C.notes&&(0,t.jsxs)("div",{children:[t.jsx("h4",{className:"font-medium mb-2",children:"Notes"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 whitespace-pre-wrap",children:C.notes})]})]})})]}),(0,t.jsxs)(f.Zb,{children:[t.jsx(f.Ol,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx(f.ll,{children:"Custom Fields"}),Z&&(0,t.jsxs)(j.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{I(e=>[...e,{key:"",value:""}])},className:"flex items-center space-x-2",children:[t.jsx(p.Z,{className:"w-4 h-4"}),t.jsx("span",{children:"Add Field"})]})]})}),t.jsx(f.aY,{children:Z?(0,t.jsxs)("div",{className:"space-y-3",children:[O.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(g.I,{placeholder:"Field name",value:e.key,onChange:e=>H(a,"key",e.target.value),className:"flex-1"}),t.jsx(g.I,{placeholder:"Field value",value:e.value,onChange:e=>H(a,"value",e.target.value),className:"flex-1"}),t.jsx(j.z,{type:"button",variant:"outline",size:"sm",onClick:()=>R(a),children:t.jsx(u.Z,{className:"w-4 h-4"})})]},a)),0===O.length&&t.jsx("p",{className:"text-sm text-gray-500 italic",children:'No custom fields. Click "Add Field" to create custom metadata.'})]}):t.jsx("div",{className:"space-y-3",children:Object.entries(C.metadata||{}).length>0?Object.entries(C.metadata).map(([e,a])=>(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-medium capitalize",children:e.replace(/_/g," ")}),t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:String(a)})]},e)):t.jsx("p",{className:"text-sm text-gray-500 italic",children:"No custom fields defined"})})})]})]}),t.jsx("div",{className:"space-y-6",children:(0,t.jsxs)(f.Zb,{children:[t.jsx(f.Ol,{children:t.jsx(f.ll,{children:"Contact Details"})}),(0,t.jsxs)(f.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(y.Z,{className:"w-5 h-5 text-gray-400"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Created"}),t.jsx("p",{className:"text-sm",children:new Date(C.created_at).toLocaleDateString()})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(y.Z,{className:"w-5 h-5 text-gray-400"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Last Updated"}),t.jsx("p",{className:"text-sm",children:new Date(C.updated_at).toLocaleDateString()})]})]})]})]})})]})]}):(0,t.jsxs)("div",{className:"text-center py-12",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Contact not found"}),t.jsx(j.z,{onClick:()=>e.push("/contacts"),children:"Back to Contacts"})]})}},9737:(e,a,s)=>{"use strict";s.d(a,{g:()=>i});var t=s(3854),l=s(4218),r=s(6370);let i=(0,l.forwardRef)(({className:e,label:a,error:s,...l},i)=>(0,t.jsxs)("div",{className:"space-y-2",children:[a&&t.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:a}),t.jsx("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 ring-offset-white placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100 dark:ring-offset-gray-900 dark:placeholder:text-gray-400 dark:focus-visible:ring-blue-400",s&&"border-red-500 focus-visible:ring-red-500",e),ref:i,...l}),s&&t.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:s})]}));i.displayName="Textarea"},2882:(e,a,s)=>{"use strict";s.d(a,{Z:()=>l});var t=s(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6699:(e,a,s)=>{"use strict";s.d(a,{Z:()=>l});var t=s(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t.Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},8954:(e,a,s)=>{"use strict";s.d(a,{Z:()=>l});var t=s(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t.Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},2095:(e,a,s)=>{"use strict";s.d(a,{Z:()=>l});var t=s(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},3092:(e,a,s)=>{"use strict";s.d(a,{Z:()=>l});var t=s(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},769:(e,a,s)=>{"use strict";s.r(a),s.d(a,{$$typeof:()=>i,__esModule:()=>r,default:()=>c});var t=s(5153);let l=(0,t.createProxy)(String.raw`D:\111\mybizai\mybizai\mybizai.app\app\contacts\[id]\page.tsx`),{__esModule:r,$$typeof:i}=l,n=l.default,c=n}};var a=require("../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[519,108,839,845],()=>s(4504));module.exports=t})();
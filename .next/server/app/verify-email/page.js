(()=>{var e={};e.id=476,e.ids=[476],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},8339:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>g,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=a(7096),s=a(6132),i=a(7284),n=a.n(i),l=a(2564),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let d=["",{children:["verify-email",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,9381)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\verify-email\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,6197)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\verify-email\\page.tsx"],g="/verify-email/page",u={require:a,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/verify-email/page",pathname:"/verify-email",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7474:(e,t,a)=>{Promise.resolve().then(a.bind(a,3551))},3551:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var r=a(3854),s=a(4218),i=a(1018),n=a(438),l=a(7716),o=a(2882),d=a(6104),c=a(6820),g=a(4391),u=a(6361),m=a(9839);function p(){let[e,t]=(0,s.useState)(""),[a,p]=(0,s.useState)(!1),[h,f]=(0,s.useState)(!1),[x,y]=(0,s.useState)(""),[b,v]=(0,s.useState)(""),[k,A]=(0,s.useState)(""),w=(0,i.useRouter)(),C=(0,i.useSearchParams)(),L=C.get("user_id")||"",N=C.get("email")||"",P=C.get("reason")||"";console.log("\uD83D\uDE80 OTPVerificationForm initialized with URL params:",{userId:L,email:N,reason:P,fullURL:window.location.href});let{login:j}=(0,u.tN)(),{setUser:_}=(0,u.LM)();if(!N||!L&&"login_required"!==P)return w.push("/signup"),null;let z=()=>e.trim()?6!==e.length?(v("Verification code must be 6 digits"),!1):(v(""),!0):(v("Verification code is required"),!1),I=e=>{if(console.log("\uD83D\uDD0D Validating user_id:",{userIdParam:e,type:typeof e,length:e?.length,isEmpty:!e}),!e)return console.log("❌ user_id is missing or empty"),null;let t=parseInt(e);return(console.log("\uD83D\uDD22 parseInt result:",{parsed:t,isNaN:isNaN(t),isPositive:t>0}),isNaN(t)||t<=0)?(console.log("❌ user_id validation failed:",{reason:isNaN(t)?"not a number":"not positive",parsed:t}),null):(console.log("✅ user_id validation passed:",t),t)},R=async t=>{if(t.preventDefault(),y(""),z()){p(!0);try{let t=I(L);if(null===t){if("login_required"===P){y("Unable to verify your account. Please try logging in again.");return}y("Invalid verification link. Please try signing up again."),setTimeout(()=>w.push("/signup"),2e3);return}console.log("Submitting OTP verification with:",{user_id:t,code:e,reason:P,userIdFromParams:L});let a=await m.iJ.verifyEmail({user_id:t,code:e});console.log("OTP verification successful:",a),j(a.access_token,a.token_type);try{let e=await m.iJ.getMe(a.access_token);_(e)}catch(e){console.warn("Failed to fetch user after verification:",e)}a.onboarding_required?w.push("/onboarding"):w.push("/dashboard")}catch(e){if(console.error("OTP verification error:",e),e instanceof m.MS)console.error("API Error details:",{status:e.status,message:e.message,details:e.details}),422===e.status?e.message.toLowerCase().includes("user_id")?y("Invalid verification link. Please try signing up again."):e.message.toLowerCase().includes("code")?y("Invalid verification code. Please check and try again."):y("Verification failed. Please check your details and try again."):404===e.status?y("User not found. Please try signing up again."):401===e.status?y("Verification expired. Please try logging in again."):y(e.message||"Verification failed. Please try again.");else{console.error("Non-API Error:",e);let t=e instanceof Error?e.message:"An unexpected error occurred. Please try again.";y(t)}}finally{p(!1)}}},D=e=>{let a=e.replace(/\D/g,"").slice(0,6);t(a),b&&v(""),x&&y("")},T=async()=>{f(!0),y(""),A("");try{if("login_required"===P&&!L){y("Please try logging in again to get a new verification code.");return}let e=I(L);if(null===e){y("Invalid verification link. Please try signing up again."),setTimeout(()=>w.push("/signup"),2e3);return}console.log("Resending OTP for user_id:",e);let t=await m.iJ.resendOTP(e);console.log("OTP resend successful:",t),A(t.message||"Verification code sent successfully!")}catch(e){if(console.error("OTP resend error:",e),e instanceof m.MS)console.error("API Error details:",{status:e.status,message:e.message,details:e.details}),404===e.status?y("User not found. Please try signing up again."):429===e.status?y("Too many requests. Please wait a few minutes before trying again."):y(e.message||"Failed to resend code. Please try again.");else{console.error("Non-API Error:",e);let t=e instanceof Error?e.message:"Failed to resend code. Please try again.";y(t)}}finally{f(!1)}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-black dark:to-gray-900 p-4",children:(0,r.jsxs)(g.Zb,{className:"w-full max-w-md",children:[(0,r.jsxs)(g.Ol,{className:"text-center",children:[r.jsx(g.ll,{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Verify Your Email"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"We've sent a 6-digit verification code to"}),r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:N})]}),r.jsx(g.aY,{children:(0,r.jsxs)("form",{onSubmit:R,className:"space-y-4",children:[x&&r.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg dark:bg-red-900/20 dark:border-red-800 dark:text-red-400",children:x}),k&&r.jsx("div",{className:"p-3 text-sm text-green-600 bg-green-50 border border-green-200 rounded-lg dark:bg-green-900/20 dark:border-green-800 dark:text-green-400",children:k}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx(n.Z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),r.jsx(c.I,{type:"text",placeholder:"Enter 6-digit code",value:e,onChange:e=>D(e.target.value),error:b,className:"pl-10 text-center text-lg tracking-widest font-mono",maxLength:6})]}),r.jsx(d.z,{type:"submit",className:"w-full",isLoading:a,disabled:a||6!==e.length,children:a?"Verifying...":"Verify Email"}),(0,r.jsxs)("div",{className:"text-center space-y-3",children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Didn't receive the code? Check your spam folder"}),(0,r.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,r.jsxs)(d.z,{type:"button",variant:"secondary",size:"sm",onClick:T,disabled:h||a,className:"flex items-center space-x-2 mx-auto text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:[r.jsx(l.Z,{className:`h-4 w-4 ${h?"animate-spin":""}`}),r.jsx("span",{children:h?"Resending...":"Resend Code"})]}),(0,r.jsxs)(d.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{w.push("/signup")},className:"flex items-center space-x-2 mx-auto",children:[r.jsx(o.Z,{className:"h-4 w-4"}),r.jsx("span",{children:"Back to Signup"})]}),"login_required"===P&&(0,r.jsxs)(d.z,{type:"button",variant:"outline",size:"sm",onClick:()=>w.push("/login"),className:"flex items-center space-x-2 mx-auto",children:[r.jsx(o.Z,{className:"h-4 w-4"}),r.jsx("span",{children:"Back to Login"})]})]})]})]})})]})})}},4391:(e,t,a)=>{"use strict";a.d(t,{Ol:()=>l,Zb:()=>n,aY:()=>c,ll:()=>o});var r=a(3854),s=a(4218),i=a(6370);let n=(0,s.forwardRef)(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,i.cn)("rounded-xl border border-gray-200 bg-white shadow-lg dark:border-gray-800 dark:bg-gray-900",e),...t}));n.displayName="Card";let l=(0,s.forwardRef)(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let o=(0,s.forwardRef)(({className:e,...t},a)=>r.jsx("h3",{ref:a,className:(0,i.cn)("font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle";let d=(0,s.forwardRef)(({className:e,...t},a)=>r.jsx("p",{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=(0,s.forwardRef)(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,i.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent"},6820:(e,t,a)=>{"use strict";a.d(t,{I:()=>n});var r=a(3854),s=a(4218),i=a(6370);let n=(0,s.forwardRef)(({className:e,type:t,label:a,error:s,...n},l)=>(0,r.jsxs)("div",{className:"space-y-2",children:[a&&r.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:a}),r.jsx("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100 dark:ring-offset-gray-900 dark:placeholder:text-gray-400 dark:focus-visible:ring-blue-400",s&&"border-red-500 focus-visible:ring-red-500",e),ref:l,...n}),s&&r.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:s})]}));n.displayName="Input"},6361:(e,t,a)=>{"use strict";a.d(t,{tN:()=>r.t,zF:()=>i.z,iC:()=>m,V6:()=>o,sx:()=>d,Ln:()=>c,I1:()=>u,Rx:()=>g,LM:()=>s.L});var r=a(1728),s=a(7034),i=a(4057),n=a(4012),l=a(6965);let o=(0,n.Ue)()((0,l.tJ)((0,l.XR)((e,t)=>({chatAgents:[],currentChatAgent:null,isLoading:!1,error:null,setChatAgents:t=>{e({chatAgents:t})},setCurrentChatAgent:t=>{e({currentChatAgent:t})},addChatAgent:t=>{e(e=>({chatAgents:[...e.chatAgents,t]}))},updateChatAgent:(t,a)=>{e(e=>({chatAgents:e.chatAgents.map(e=>e.id===t?{...e,...a}:e),currentChatAgent:e.currentChatAgent?.id===t?{...e.currentChatAgent,...a}:e.currentChatAgent}))},removeChatAgent:t=>{e(e=>({chatAgents:e.chatAgents.filter(e=>e.id!==t),currentChatAgent:e.currentChatAgent?.id===t?null:e.currentChatAgent}))},clearChatAgents:()=>{e({chatAgents:[],currentChatAgent:null,isLoading:!1,error:null})},setChatAgentChannels:(t,a)=>{e(e=>({chatAgents:e.chatAgents.map(e=>e.id===t?{...e,channels:a}:e),currentChatAgent:e.currentChatAgent?.id===t?{...e.currentChatAgent,channels:a}:e.currentChatAgent}))},setChatAgentKnowledgeBases:(t,a)=>{e(e=>({chatAgents:e.chatAgents.map(e=>e.id===t?{...e,knowledge_bases:a}:e),currentChatAgent:e.currentChatAgent?.id===t?{...e.currentChatAgent,knowledge_bases:a}:e.currentChatAgent}))},setChatAgentTools:(t,a)=>{e(e=>({chatAgents:e.chatAgents.map(e=>e.id===t?{...e,tools:a}:e),currentChatAgent:e.currentChatAgent?.id===t?{...e.currentChatAgent,tools:a}:e.currentChatAgent}))},setLoading:t=>{e({isLoading:t})},setError:t=>{e({error:t})}})),{name:"chatagent-storage",partialize:e=>({chatAgents:e.chatAgents,currentChatAgent:e.currentChatAgent})})),d=(0,n.Ue)()((0,l.tJ)((0,l.XR)((e,t)=>({contacts:[],isLoading:!1,filters:{search:"",phone:"",email:""},setContacts:t=>{e({contacts:t})},addContact:t=>{e(e=>({contacts:[...e.contacts,t]}))},updateContact:(t,a)=>{e(e=>({contacts:e.contacts.map(e=>e.id===t?a:e)}))},removeContact:t=>{e(e=>({contacts:e.contacts.filter(e=>e.id!==t)}))},setLoading:t=>{e({isLoading:t})},clearContacts:()=>{e({contacts:[],isLoading:!1})},setFilters:t=>{e(e=>({filters:{...e.filters,...t}}))},clearFilters:()=>{e({filters:{search:"",phone:"",email:""}})}})),{name:"contact-storage",partialize:e=>({contacts:e.contacts})})),c=(0,n.Ue)()((0,l.tJ)((0,l.XR)((e,t)=>({stats:null,setStats:t=>{e({stats:t})},updateStats:t=>{e(e=>({stats:e.stats?{...e.stats,...t}:null}))},clearStats:()=>{e({stats:null})},refreshStats:async()=>{console.log("Refreshing dashboard stats...")}})),{name:"dashboard-storage",partialize:e=>({stats:e.stats})})),g=(0,n.Ue)()((0,l.tJ)((0,l.XR)((e,t)=>({leads:[],currentLead:null,isLoading:!1,pagination:{page:1,per_page:20,total:0,total_pages:0},setLeads:(t,a)=>{a?e({leads:t,pagination:a}):e({leads:t})},setCurrentLead:t=>{e({currentLead:t})},addLead:t=>{e(e=>({leads:[...e.leads,t]}))},updateLead:(t,a)=>{e(e=>({leads:e.leads.map(e=>e.id===t?a:e),currentLead:e.currentLead?.id===t?a:e.currentLead}))},removeLead:t=>{e(e=>({leads:e.leads.filter(e=>e.id!==t),currentLead:e.currentLead?.id===t?null:e.currentLead}))},setLoading:t=>{e({isLoading:t})},setPagination:t=>{e({pagination:t})},clearLeads:()=>{e({leads:[],currentLead:null,isLoading:!1,pagination:{page:1,per_page:20,total:0,total_pages:0}})}})),{name:"lead-storage",partialize:e=>({leads:e.leads,currentLead:e.currentLead,pagination:e.pagination})}));a(8296),a(5936);let u=(0,n.Ue)()((0,l.tJ)((0,l.XR)((e,t)=>({knowledgeBases:[],isLoading:!1,error:null,setKnowledgeBases:t=>{e({knowledgeBases:t})},setLoading:t=>{e({isLoading:t})},setError:t=>{e({error:t})},addKnowledgeBase:t=>{e(e=>({knowledgeBases:[...e.knowledgeBases,t]}))},updateKnowledgeBase:(t,a)=>{e(e=>({knowledgeBases:e.knowledgeBases.map(e=>e.id===t?{...e,...a}:e)}))},removeKnowledgeBase:t=>{e(e=>({knowledgeBases:e.knowledgeBases.filter(e=>e.id!==t)}))},clearKnowledgeBases:()=>{e({knowledgeBases:[],isLoading:!1,error:null})}})),{name:"knowledgebase-storage",partialize:e=>({knowledgeBases:e.knowledgeBases})}));(0,n.Ue)()((0,l.tJ)((0,l.XR)((e,t)=>({integrations:[],isLoading:!1,error:null,setIntegrations:t=>{e({integrations:t})},setLoading:t=>{e({isLoading:t})},setError:t=>{e({error:t})},addIntegration:t=>{e(e=>({integrations:[...e.integrations,t]}))},updateIntegration:(t,a)=>{e(e=>({integrations:e.integrations.map(e=>e.id===t?{...e,...a}:e)}))},removeIntegration:t=>{e(e=>({integrations:e.integrations.filter(e=>e.id!==t)}))},clearIntegrations:()=>{e({integrations:[],isLoading:!1,error:null})}})),{name:"integration-storage",partialize:e=>({integrations:e.integrations})}));let m=(0,n.Ue)()((0,l.tJ)((0,l.XR)((e,t)=>({items:[],templates:[],isLoading:!1,searchQuery:"",filters:{},setItems:t=>{e({items:t})},addItem:t=>{e(e=>({items:[...e.items,t]}))},updateItem:(t,a)=>{e(e=>({items:e.items.map(e=>e.id===t?a:e)}))},removeItem:t=>{e(e=>({items:e.items.filter(e=>e.id!==t)}))},setLoading:t=>{e({isLoading:t})},setSearchQuery:t=>{e({searchQuery:t})},setFilters:t=>{e({filters:t})},clearFilters:()=>{e({filters:{}})},clearItems:()=>{e({items:[],templates:[],isLoading:!1,searchQuery:"",filters:{}})},setTemplates:t=>{e({templates:t})},addTemplate:t=>{e(e=>({templates:[...e.templates,t]}))},updateTemplate:(t,a)=>{e(e=>({templates:e.templates.map(e=>e.id===t?a:e)}))},removeTemplate:t=>{e(e=>({templates:e.templates.filter(e=>e.id!==t)}))},clearTemplates:()=>{e({templates:[]})}})),{name:"catalog-storage",partialize:e=>({items:e.items,templates:e.templates,searchQuery:e.searchQuery,filters:e.filters})}))},2882:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},438:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},7716:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},9381:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var r=a(4656),s=a(5153);let i=(0,s.createProxy)(String.raw`D:\111\mybizai\mybizai\mybizai.app\components\auth\OTPVerificationForm.tsx`),{__esModule:n,$$typeof:l}=i,o=i.default;function d(){return r.jsx(o,{})}}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[519,108,839],()=>a(8339));module.exports=r})();
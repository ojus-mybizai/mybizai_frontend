(()=>{var e={};e.id=897,e.ids=[897],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},6042:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>d.a,__next_app__:()=>x,originalPathname:()=>g,pages:()=>o,routeModule:()=>m,tree:()=>c});var r=s(7096),t=s(6132),l=s(7284),d=s.n(l),i=s(2564),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);s.d(a,n);let c=["",{children:["chatagent",{children:["[id]",{children:["knowledgebase",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3469)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\chatagent\\[id]\\knowledgebase\\page.tsx"]}]},{loading:[()=>Promise.resolve().then(s.bind(s,13)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\chatagent\\[id]\\knowledgebase\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,7896)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\chatagent\\[id]\\layout.tsx"]}]},{loading:[()=>Promise.resolve().then(s.bind(s,9470)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\chatagent\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,6197)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],o=["D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\chatagent\\[id]\\knowledgebase\\page.tsx"],g="/chatagent/[id]/knowledgebase/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/chatagent/[id]/knowledgebase/page",pathname:"/chatagent/[id]/knowledgebase",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8455:(e,a,s)=>{Promise.resolve().then(s.bind(s,6823))},6823:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>b});var r=s(3854),t=s(4218),l=s(1018),d=s(7716),i=s(4024),n=s(2258),c=s(9539),o=s(6699),g=s(2323),x=s(6104),m=s(6361),h=s(8028);function b(){let e=(0,l.useRouter)(),a=(0,l.useParams)();(0,l.useSearchParams)();let{accessToken:s}=(0,m.tN)(),{currentChatAgent:b,setChatAgentKnowledgeBases:y}=(0,m.V6)(),u=parseInt(a.id),[p,j]=(0,t.useState)([]),[k,v]=(0,t.useState)([]),[w,N]=(0,t.useState)(!0),[f,D]=(0,t.useState)(!1),[z,_]=(0,t.useState)(!1);(0,t.useEffect)(()=>{s&&u&&C()},[u,s]);let C=async()=>{if(s)try{N(!0);let e=await h._h.getKnowledgeBases(s),a=await h.TJ.getChatAgentKnowledgeBases(u,s);j(e);let r=a.knowledge_bases.map(e=>e.id);v(r),console.log("\uD83E\uDDE0 KNOWLEDGE BASES LOADED:"),console.log("\uD83D\uDCCB Available knowledge bases:",e.length),console.log("\uD83D\uDD17 Agent linked knowledge bases:",r.length),console.log("✅ Selected knowledge base IDs:",r)}catch(e){console.error("Failed to fetch knowledge bases data:",e),alert("Failed to load knowledge bases data. Please try again.")}finally{N(!1)}},P=e=>{v(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])},Z=async()=>{if(s&&b)try{_(!0);let e=await h.TJ.updateChatAgentKnowledgeBases(u,{knowledge_base_ids:k},s);if(e.success){let a=await h.TJ.getChatAgentKnowledgeBases(u,s),r=a.knowledge_bases.map(e=>e.id);v(r),console.log("✅ KNOWLEDGE BASES UPDATED:"),console.log("\uD83D\uDD17 New linked knowledge bases:",r),console.log("\uD83D\uDCCA Response:",e),alert(`Successfully updated knowledge bases for agent. ${e.linked_knowledge_bases.length} knowledge bases linked.`)}}catch(e){console.error("Failed to save knowledge base configuration:",e),alert("Failed to save configuration. Please try again.")}finally{_(!1)}};return w?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):b?(0,r.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6 ",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center space-x-4",children:(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Knowledge Base Configuration"}),(0,r.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Configure knowledge bases for ",b.name]})]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)(x.z,{onClick:()=>{D(!0),C().finally(()=>D(!1))},disabled:f,variant:"outline",className:"flex items-center space-x-2",children:[r.jsx(d.Z,{className:`w-4 h-4 ${f?"animate-spin":""}`}),r.jsx("span",{children:f?"Refreshing...":"Refresh"})]}),(0,r.jsxs)(x.z,{onClick:()=>window.open("/knowledgebase/new","_blank"),className:"flex items-center space-x-2",children:[r.jsx(i.Z,{className:"w-4 h-4"}),r.jsx("span",{children:"New Knowledge Base"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-gray-200 dark:border-slate-800 p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Available Knowledge Bases"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Select knowledge bases to link to this agent"})]}),p.length>0?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[p.length," knowledge base",1!==p.length?"s":""," available"]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[k.length," selected"]})]}),r.jsx("div",{className:"grid gap-4 max-h-96 overflow-y-auto",children:p.map(e=>r.jsx("div",{className:`relative p-4 border rounded-lg cursor-pointer transition-all ${k.includes(e.id)?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,onClick:()=>P(e.id),children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:`flex-shrink-0 w-4 h-4 rounded border-2 mt-1 ${k.includes(e.id)?"border-blue-500 bg-blue-500":"border-gray-300 dark:border-gray-600"}`,children:k.includes(e.id)&&r.jsx("div",{className:"w-full h-full bg-white rounded-sm flex items-center justify-center",children:r.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[r.jsx(n.Z,{className:"w-4 h-4 text-gray-400"}),r.jsx("h3",{className:"font-medium text-gray-900 dark:text-white truncate",children:e.title})]}),e.content&&r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 line-clamp-2",children:e.content}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-500",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx(c.Z,{className:"w-3 h-3"}),r.jsx("span",{children:e.category||"Uncategorized"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx(o.Z,{className:"w-3 h-3"}),r.jsx("span",{children:new Date(e.created_at).toLocaleDateString()})]})]})]})]})},e.id))})]}):(0,r.jsxs)("div",{className:"text-center py-16",children:[r.jsx(g.Z,{className:"w-20 h-20 text-gray-300 mx-auto mb-6"}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:"No Knowledge Bases Found"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8 max-w-md mx-auto",children:"Create your first knowledge base to help your chat agent provide better, more accurate responses to customer questions."}),(0,r.jsxs)(x.z,{onClick:()=>window.open("/knowledgebase/new","_blank"),size:"lg",className:"flex items-center space-x-2 mx-auto",children:[r.jsx(i.Z,{className:"w-5 h-5"}),r.jsx("span",{children:"Create Your First Knowledge Base"})]})]})]})}),r.jsx("div",{className:"lg:col-span-1",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-gray-200 dark:border-slate-800 p-6 sticky top-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Current Configuration"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"Selected Knowledge Bases:"}),k.length>0?r.jsx("div",{className:"space-y-2",children:k.map(e=>{let a=p.find(a=>a.id===e);return r.jsx("div",{className:"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 px-3 py-2 rounded-lg text-sm",children:a?.title||`KB-${e}`},e)})}):r.jsx("p",{className:"text-sm text-gray-500 italic",children:"No knowledge bases selected"})]}),r.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-slate-700",children:r.jsx(x.z,{onClick:Z,disabled:z,className:"w-full",children:z?"Saving...":"Save Configuration"})})]})]})})]})]}):(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Chat agent not found"}),r.jsx(x.z,{onClick:()=>e.push("/chatagent"),children:"Back to Chat Agents"})]})}},6699:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});var r=s(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r.Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},2258:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});var r=s(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r.Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},4024:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});var r=s(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7716:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});var r=s(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},9539:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});var r=s(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r.Z)("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]])},13:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>l});var r=s(4656),t=s(1330);function l(){return(0,r.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6 px-2 animate-pulse",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center space-x-4",children:(0,r.jsxs)("div",{children:[r.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-64 mb-1"}),r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-48"})]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded w-24"}),r.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded w-40"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:(0,r.jsxs)(t.Zb,{children:[(0,r.jsxs)(t.Ol,{children:[r.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-48 mb-1"}),r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-64"})]}),(0,r.jsxs)(t.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-32"}),r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-24"})]}),r.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((e,a)=>r.jsx("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0 w-4 h-4 border-2 border-gray-300 dark:border-gray-600 rounded mt-1"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("div",{className:"w-4 h-4 bg-gray-200 dark:bg-gray-700 rounded"}),r.jsx("div",{className:"h-5 bg-gray-200 dark:bg-gray-700 rounded w-40"})]}),r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-full mb-2"}),r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mt-3",children:[r.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-20"}),r.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-24"})]})]})]})},a))})]})]})}),r.jsx("div",{className:"lg:col-span-1",children:(0,r.jsxs)(t.Zb,{children:[r.jsx(t.Ol,{children:r.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-40"})}),(0,r.jsxs)(t.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-32 mb-2"}),r.jsx("div",{className:"space-y-2",children:Array.from({length:2}).map((e,a)=>r.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-full"},a))})]}),r.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:r.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded w-full"})})]})]})})]})]})}},3469:(e,a,s)=>{"use strict";s.r(a),s.d(a,{$$typeof:()=>d,__esModule:()=>l,default:()=>n});var r=s(5153);let t=(0,r.createProxy)(String.raw`D:\111\mybizai\mybizai\mybizai.app\app\chatagent\[id]\knowledgebase\page.tsx`),{__esModule:l,$$typeof:d}=t,i=t.default,n=i}};var a=require("../../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),r=a.X(0,[519,557,108,839,316],()=>s(6042));module.exports=r})();
(()=>{var e={};e.id=838,e.ids=[838],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},19:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>o,routeModule:()=>g,tree:()=>c});var s=a(7096),r=a(6132),n=a(7284),l=a.n(n),i=a(2564),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);a.d(t,d);let c=["",{children:["chatagent",{children:["new",{children:["knowledgebase",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,2121)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\chatagent\\new\\knowledgebase\\page.tsx"]}]},{}]},{}]},{loading:[()=>Promise.resolve().then(a.bind(a,9470)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\chatagent\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,6197)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],o=["D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\chatagent\\new\\knowledgebase\\page.tsx"],x="/chatagent/new/knowledgebase/page",h={require:a,loadChunk:()=>Promise.resolve()},g=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/chatagent/new/knowledgebase/page",pathname:"/chatagent/new/knowledgebase",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3569:(e,t,a)=>{Promise.resolve().then(a.bind(a,2625))},2625:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>k});var s=a(3854),r=a(4218),n=a(1018),l=a(6104),i=a(1102),d=a(4024),c=a(7716),o=a(2258),x=a(9539),h=a(6699),g=a(2323),m=a(1728),u=a(9839);function p({knowledgeBaseIds:e,onChange:t}){let{accessToken:a}=(0,m.t)(),[i,p]=(0,r.useState)([]),[y,b]=(0,r.useState)(!0),[k,f]=(0,r.useState)(!1);(0,n.useRouter)();let w=async()=>{if(a)try{if(k)return;f(!0);let e=await u._h.getKnowledgeBases(a);p(e)}catch(e){console.error("Failed to fetch knowledge bases:",e)}finally{f(!1),b(!1)}};(0,r.useEffect)(()=>{w()},[a]);let j=()=>{window.open("/knowledgebase/new","_blank")},v=a=>{let s=e.includes(a);s?t(e.filter(e=>e!==a)):t([...e,a])};return y?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Knowledge Base Training"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Select knowledge bases to train your chat agent"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)(l.z,{onClick:j,className:"flex items-center space-x-2",children:[s.jsx(d.Z,{className:"w-4 h-4"}),s.jsx("span",{children:"New Knowledge Base"})]}),(0,s.jsxs)(l.z,{onClick:()=>{b(!0),w()},disabled:k,variant:"outline",className:"flex items-center space-x-2",children:[s.jsx(c.Z,{className:`w-4 h-4 ${k?"animate-spin":""}`}),s.jsx("span",{children:k?"Refreshing...":"Refresh"})]})]})]}),i.length>0?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[i.length," knowledge base",1!==i.length?"s":""," available"]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.length," selected for training"]})]}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:i.map(t=>s.jsx("div",{className:`relative p-4 border rounded-lg cursor-pointer transition-all ${e.includes(t.id)?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,onClick:()=>v(t.id),children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:`flex-shrink-0 w-4 h-4 rounded border-2 mt-1 ${e.includes(t.id)?"border-blue-500 bg-blue-500":"border-gray-300 dark:border-gray-600"}`,children:e.includes(t.id)&&s.jsx("div",{className:"w-full h-full bg-white rounded-sm flex items-center justify-center",children:s.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx(o.Z,{className:"w-4 h-4 text-gray-400"}),s.jsx("h3",{className:"font-medium text-gray-900 dark:text-white truncate",children:t.title})]}),t.content&&s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 line-clamp-2",children:t.content}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-500",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[s.jsx(x.Z,{className:"w-3 h-3"}),s.jsx("span",{children:t.category})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[s.jsx(h.Z,{className:"w-3 h-3"}),s.jsx("span",{children:new Date(t.created_at).toLocaleDateString()})]})]})]})]})},t.id))})]}):(0,s.jsxs)("div",{className:"text-center py-16",children:[s.jsx(g.Z,{className:"w-20 h-20 text-gray-300 mx-auto mb-6"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:"No Knowledge Bases Found"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8 max-w-md mx-auto",children:"Create your first knowledge base to help your chat agent provide better, more accurate responses to customer questions."}),(0,s.jsxs)(l.z,{onClick:j,size:"lg",className:"flex items-center space-x-2 mx-auto",children:[s.jsx(d.Z,{className:"w-5 h-5"}),s.jsx("span",{children:"Create Your First Knowledge Base"})]})]})]})}var y=a(6361),b=a(8028);function k(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),{accessToken:a}=(0,y.tN)(),[d,c]=(0,r.useState)([]),[o,x]=(0,r.useState)(null),[h,g]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=t.get("agentId");e&&x(parseInt(e))},[t]);let m=async()=>{if(!o||!a){alert("Agent ID is missing. Please go back to the profile step.");return}try{g(!0);let t={knowledge_base_ids:d.length>0?d:null};await b.TJ.updateChatAgent(o,t,a),e.push(`/chatagent/new/channels?agentId=${o}`)}catch(e){console.error("Failed to update agent knowledge bases:",e),alert("Failed to save knowledge base selection. Please try again.")}finally{g(!1)}};return o?s.jsx(i.Z,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Knowledge Base Training"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Select knowledge bases to train your chat agent for better responses"})]}),s.jsx(p,{knowledgeBaseIds:d,onChange:c}),(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx(l.z,{variant:"outline",onClick:()=>{if(!o){alert("Agent ID is missing. Please go back to the profile step.");return}e.push(`/chatagent/new/channels?agentId=${o}`)},disabled:h,children:"Skip for now"}),s.jsx(l.z,{onClick:m,disabled:h,isLoading:h,children:h?"Saving...":"Continue to Channels"})]})]})}):s.jsx(i.Z,{children:(0,s.jsxs)("div",{className:"text-center py-12",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Agent not found"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Please go back to the profile step to create an agent first."}),s.jsx(l.z,{onClick:()=>e.push("/chatagent/new/profile"),children:"Back to Profile"})]})})}},6699:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s.Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},2258:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s.Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},4024:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7716:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},9539:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s.Z)("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]])},2121:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>l,__esModule:()=>n,default:()=>d});var s=a(5153);let r=(0,s.createProxy)(String.raw`D:\111\mybizai\mybizai\mybizai.app\app\chatagent\new\knowledgebase\page.tsx`),{__esModule:n,$$typeof:l}=r,i=r.default,d=i}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[519,557,108,839,600],()=>a(19));module.exports=s})();
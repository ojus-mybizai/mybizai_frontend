(()=>{var e={};e.id=164,e.ids=[164],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9274:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o});var s=t(7096),l=t(6132),r=t(7284),i=t.n(r),n=t(2564),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(a,d);let o=["",{children:["leads",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8811)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\leads\\new\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,6197)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\leads\\new\\page.tsx"],u="/leads/new/page",x={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/leads/new/page",pathname:"/leads/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},9340:(e,a,t)=>{Promise.resolve().then(t.bind(t,4168))},4168:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>w});var s=t(3854),l=t(4218),r=t(1018),i=t(2882),n=t(3092),d=t(6104),o=t(6820),c=t(9737),u=t(5088),x=t(4391),m=t(6361),p=t(9839),h=t(4024),g=t(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let y=(0,g.Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);var b=t(9783);let v=[{value:"text",label:"Text"},{value:"number",label:"Number"},{value:"boolean",label:"Boolean"},{value:"date",label:"Date"}];function f({data:e,onChange:a,className:t="",placeholder:r={key:"Enter key",value:"Enter value"}}){let[i,n]=(0,l.useState)(()=>Object.entries(e).map(([e,a])=>({id:crypto.randomUUID(),key:e,value:a,type:"boolean"==typeof a?"boolean":"number"==typeof a?"number":"string"==typeof a&&!isNaN(Date.parse(a))&&a.includes("-")?"date":"text"}))),[c,x]=(0,l.useState)(null),m=e=>{let t={};e.forEach(e=>{e.key.trim()&&(t[e.key]=function(e,a){switch(a){case"number":return""===e?null:Number(e);case"boolean":return"true"===e;default:return e}}(String(e.value),e.type))}),a(t)},p=()=>{let e={id:crypto.randomUUID(),key:"",value:"",type:"text"},a=[...i,e];n(a),x(e.id)},g=e=>{let a=i.filter(a=>a.id!==e);n(a),m(a)},f=(e,a)=>{let t=i.map(t=>t.id===e?{...t,...a}:t);n(t),m(t)},j=(e,a)=>{f(e,{key:a})},N=(e,a)=>{f(e,{value:a})},k=(e,a)=>{let t=i.find(a=>a.id===e);if(t){let s=t.value;s="boolean"!==a&&("number"===a?0:"date"===a?new Date().toISOString().split("T")[0]:String(t.value||"")),f(e,{type:a,value:s})}};return s.jsx("div",{className:`space-y-3 ${t}`,children:0===i.length?(0,s.jsxs)("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg",children:[s.jsx("div",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"No custom fields added yet"}),(0,s.jsxs)(d.z,{onClick:p,variant:"outline",size:"sm",children:[s.jsx(h.Z,{className:"w-4 h-4 mr-2"}),"Add Field"]})]}):(0,s.jsxs)(s.Fragment,{children:[i.map(e=>{var a;return(0,s.jsxs)("div",{className:"flex items-center space-x-2 p-3 border border-gray-200 dark:border-gray-700 rounded-lg",children:[s.jsx("div",{className:"flex-1",children:s.jsx(o.I,{value:e.key,onChange:a=>j(e.id,a.target.value),placeholder:r.key,className:"text-sm"})}),s.jsx("div",{className:"w-24",children:s.jsx(u.P,{options:v,value:e.type,onChange:a=>k(e.id,a.target.value),className:"text-sm"})}),s.jsx("div",{className:"flex-1",children:"boolean"===e.type?s.jsx(u.P,{options:[{value:"true",label:"True"},{value:"false",label:"False"}],value:String(e.value),onChange:a=>N(e.id,a.target.value),className:"text-sm"}):s.jsx(o.I,{type:"date"===e.type?"date":"number"===e.type?"number":"text",value:(a=e.value,e.type,null==a?"":String(a)),onChange:a=>N(e.id,a.target.value),placeholder:r.value,className:"text-sm"})}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[s.jsx(d.z,{variant:"outline",size:"sm",onClick:()=>x(c===e.id?null:e.id),className:"p-2",children:s.jsx(y,{className:"w-3 h-3"})}),s.jsx(d.z,{variant:"outline",size:"sm",onClick:()=>g(e.id),className:"p-2 text-red-600 hover:text-red-700",children:s.jsx(b.Z,{className:"w-3 h-3"})})]})]},e.id)}),(0,s.jsxs)(d.z,{onClick:p,variant:"outline",size:"sm",className:"w-full",children:[s.jsx(h.Z,{className:"w-4 h-4 mr-2"}),"Add Field"]})]})})}let j=[{value:"new",label:"New"},{value:"contacted",label:"Contacted"},{value:"qualified",label:"Qualified"},{value:"won",label:"Won"},{value:"lost",label:"Lost"}],N=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}],k=[{value:"portal",label:"Portal"},{value:"website",label:"Website"},{value:"whatsapp",label:"WhatsApp"},{value:"referral",label:"Referral"},{value:"walk-in",label:"Walk-in"},{value:"ad_campaign",label:"Ad Campaign"}];function w(){let e=(0,r.useRouter)(),{accessToken:a}=(0,m.tN)(),{addLead:t}=(0,m.Rx)(),[h,g]=(0,l.useState)({name:"",phone:"",email:"",source:"website",status:"new",priority:"medium",notes:"",extra_data:{}}),[y,b]=(0,l.useState)({}),[v,w]=(0,l.useState)(!1),C=()=>{let e={};return h.name.trim()||(e.name="Name is required"),h.phone.trim()?(h.phone.length<10||h.phone.length>20)&&(e.phone="Phone number must be between 10-20 characters"):e.phone="Phone number is required",h.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h.email)&&(e.email="Please enter a valid email address"),h.notes&&h.notes.length>2e3&&(e.notes="Notes must be 2000 characters or less"),b(e),0===Object.keys(e).length},P=(e,a)=>{g(t=>({...t,[e]:a})),y[e]&&b(a=>({...a,[e]:""}))},z=async s=>{if(s.preventDefault(),C()&&a){w(!0);try{let s={...h,email:h.email||void 0,notes:h.notes||void 0,extra_data:h.extra_data||{}},l=await p.Zc.createLead(s,a);t(l),e.push("/leads")}catch(e){console.error("Failed to create lead:",e),e instanceof p.MS?alert(`Failed to create lead: ${e.message}`):alert("Failed to create lead. Please try again.")}finally{w(!1)}}};return(0,s.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)(d.z,{variant:"outline",onClick:()=>e.push("/leads"),className:"flex items-center space-x-2",children:[s.jsx(i.Z,{className:"w-4 h-4"}),s.jsx("span",{children:"Back to Leads"})]}),(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Add New Lead"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Create a new sales lead in your CRM"})]})]}),(0,s.jsxs)("form",{onSubmit:z,children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsxs)(x.Zb,{children:[s.jsx(x.Ol,{children:s.jsx(x.ll,{children:"Lead Information"})}),s.jsx(x.aY,{className:"space-y-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("div",{className:"md:col-span-2",children:s.jsx(o.I,{label:"Full Name *",value:h.name,onChange:e=>P("name",e.target.value),error:y.name,placeholder:"Enter full name"})}),s.jsx(o.I,{label:"Phone *",value:h.phone,onChange:e=>P("phone",e.target.value),error:y.phone,placeholder:"+91 9999999999"}),s.jsx(o.I,{label:"Email",type:"email",value:h.email||"",onChange:e=>P("email",e.target.value),error:y.email,placeholder:"lead@example.com"}),s.jsx(u.P,{label:"Source *",options:k,value:h.source,onChange:e=>P("source",e.target.value),error:y.source})]})})]}),(0,s.jsxs)(x.Zb,{children:[s.jsx(x.Ol,{children:s.jsx(x.ll,{children:"Custom Fields"})}),(0,s.jsxs)(x.aY,{className:"space-y-4",children:[s.jsx(f,{data:h.extra_data||{},onChange:e=>P("extra_data",e),placeholder:{key:"Field name (e.g., budget, location, interest)",value:"Field value"}}),s.jsx("p",{className:"text-sm text-gray-500",children:"Add custom fields to capture specific information about this lead (budget, preferences, product interest, etc.)."})]})]}),(0,s.jsxs)(x.Zb,{children:[s.jsx(x.Ol,{children:s.jsx(x.ll,{children:"Additional Notes"})}),(0,s.jsxs)(x.aY,{children:[s.jsx(c.g,{label:"Notes",value:h.notes||"",onChange:e=>P("notes",e.target.value),error:y.notes,placeholder:"Additional information about this lead, requirements, preferences, etc.",className:"min-h-[120px]"}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:[h.notes?.length||0,"/2000 characters"]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(x.Zb,{children:[s.jsx(x.Ol,{children:s.jsx(x.ll,{children:"Lead Status"})}),(0,s.jsxs)(x.aY,{className:"space-y-4",children:[s.jsx(u.P,{label:"Status",options:j,value:h.status||"new",onChange:e=>P("status",e.target.value),error:y.status}),s.jsx(u.P,{label:"Priority",options:N,value:h.priority||"medium",onChange:e=>P("priority",e.target.value),error:y.priority})]})]}),(0,s.jsxs)(x.Zb,{children:[s.jsx(x.Ol,{children:s.jsx(x.ll,{children:"Quick Tips"})}),(0,s.jsxs)(x.aY,{className:"space-y-3 text-sm text-gray-600 dark:text-gray-400",children:[(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Required Fields"}),s.jsx("p",{children:"Full name, phone, and source are required to create a lead."})]}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Custom Fields"}),s.jsx("p",{children:"Use custom fields to capture specific information like budget, preferences, or product interest."})]}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Lead Status"}),s.jsx("p",{children:'Track progress from "New" → "Contacted" → "Qualified" → "Won/Lost".'})]})]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-4 mt-6",children:[s.jsx(d.z,{type:"button",variant:"outline",onClick:()=>e.push("/leads"),children:"Cancel"}),(0,s.jsxs)(d.z,{type:"submit",isLoading:v,disabled:v,className:"flex items-center space-x-2",children:[s.jsx(n.Z,{className:"w-4 h-4"}),s.jsx("span",{children:"Create Lead"})]})]})]})]})}},6820:(e,a,t)=>{"use strict";t.d(a,{I:()=>i});var s=t(3854),l=t(4218),r=t(6370);let i=(0,l.forwardRef)(({className:e,type:a,label:t,error:l,...i},n)=>(0,s.jsxs)("div",{className:"space-y-2",children:[t&&s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t}),s.jsx("input",{type:a,className:(0,r.cn)("flex h-10 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100 dark:ring-offset-gray-900 dark:placeholder:text-gray-400 dark:focus-visible:ring-blue-400",l&&"border-red-500 focus-visible:ring-red-500",e),ref:n,...i}),l&&s.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:l})]}));i.displayName="Input"},9737:(e,a,t)=>{"use strict";t.d(a,{g:()=>i});var s=t(3854),l=t(4218),r=t(6370);let i=(0,l.forwardRef)(({className:e,label:a,error:t,...l},i)=>(0,s.jsxs)("div",{className:"space-y-2",children:[a&&s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:a}),s.jsx("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 ring-offset-white placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100 dark:ring-offset-gray-900 dark:placeholder:text-gray-400 dark:focus-visible:ring-blue-400",t&&"border-red-500 focus-visible:ring-red-500",e),ref:i,...l}),t&&s.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:t})]}));i.displayName="Textarea"},2882:(e,a,t)=>{"use strict";t.d(a,{Z:()=>l});var s=t(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,s.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},4024:(e,a,t)=>{"use strict";t.d(a,{Z:()=>l});var s=t(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,s.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3092:(e,a,t)=>{"use strict";t.d(a,{Z:()=>l});var s=t(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,s.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},9783:(e,a,t)=>{"use strict";t.d(a,{Z:()=>l});var s=t(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,s.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},8811:(e,a,t)=>{"use strict";t.r(a),t.d(a,{$$typeof:()=>i,__esModule:()=>r,default:()=>d});var s=t(5153);let l=(0,s.createProxy)(String.raw`D:\111\mybizai\mybizai\mybizai.app\app\leads\new\page.tsx`),{__esModule:r,$$typeof:i}=l,n=l.default,d=n}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[519,108,839,595],()=>t(9274));module.exports=s})();
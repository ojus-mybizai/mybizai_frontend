(()=>{var e={};e.id=429,e.ids=[429],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},8816:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>c});var t=s(7096),r=s(6132),l=s(7284),i=s.n(l),d=s(2564),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);s.d(a,n);let c=["",{children:["leads",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3106)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\leads\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,6197)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],o=["D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\leads\\page.tsx"],x="/leads/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/leads/page",pathname:"/leads",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3386:(e,a,s)=>{Promise.resolve().then(s.bind(s,5968))},5968:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>z});var t=s(3854),r=s(4218),l=s(1018),i=s(6359),d=s(4024),n=s(8466),c=s(1138),o=s(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,o.Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var p=s(4234),m=s(3294),u=s(4920),g=s(3611),h=s(175),y=s(6104),b=s(6820),j=s(5088),f=s(4391),v=s(6361),N=s(9839);let k=[{value:"",label:"All Statuses"},{value:"new",label:"New"},{value:"contacted",label:"Contacted"},{value:"qualified",label:"Qualified"},{value:"won",label:"Won"},{value:"lost",label:"Lost"}],w=[{value:"",label:"All Sources"},{value:"portal",label:"Portal"},{value:"website",label:"Website"},{value:"whatsapp",label:"WhatsApp"},{value:"referral",label:"Referral"},{value:"walk-in",label:"Walk-in"},{value:"ad_campaign",label:"Ad Campaign"}],_=e=>{switch(e){case"new":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"contacted":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"qualified":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";case"won":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"lost":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},Z=e=>{switch(e){case"high":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"low":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};function z(){let e=(0,l.useRouter)(),{accessToken:a}=(0,v.tN)(),{leads:s,pagination:o,isLoading:z,setLeads:C,setPagination:P,setLoading:q,removeLead:S}=(0,v.Rx)(),[A,M]=(0,r.useState)(!1),[Y,L]=(0,r.useState)(null),[R,D]=(0,r.useState)({search:"",status:"",source:""}),[F,E]=(0,r.useState)(null);(0,r.useEffect)(()=>{T(),$()},[a,R,o.page,o.per_page]);let T=async()=>{if(a){q(!0);try{let e={page:o.page,per_page:o.per_page,search:R.search||void 0,status:R.status||void 0,source:R.source||void 0},s=await N.Zc.getLeads(a,e),t=Math.ceil(s.total/s.per_page);C(s.leads,{total:s.total,page:s.page,per_page:s.per_page,total_pages:t})}catch(e){console.error("Failed to fetch leads:",e)}finally{q(!1)}}},$=async()=>{if(a)try{let e=await N.Zc.getLeadStats(a);E(e)}catch(e){console.error("Failed to fetch lead stats:",e)}},G=async e=>{if(a){if(Y!==e){L(e),setTimeout(()=>L(null),3e3);return}try{await N.Zc.deleteLead(e,a),S(e),L(null)}catch(e){console.error("Failed to delete lead:",e),e instanceof Error&&alert(`Failed to delete lead: ${e.message}`)}}},I=e=>{P({page:e,per_page:o.per_page,total:o.total,total_pages:o.total_pages})},W=R.search||R.status||R.source;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-orange-500 to-red-600 dark:from-orange-600 dark:to-red-700 flex items-center justify-center shadow-lg",children:t.jsx(i.Z,{className:"w-5 h-5 text-white"})}),(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Leads"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Sales pipeline"})]})]}),(0,t.jsxs)(y.z,{onClick:()=>e.push("/leads/new"),className:"flex items-center space-x-2",children:[t.jsx(d.Z,{className:"w-4 h-4"}),t.jsx("span",{children:"Add Lead"})]})]}),F&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx(f.Zb,{children:t.jsx(f.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:t.jsx(n.Z,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Leads"}),t.jsx("p",{className:"text-2xl font-bold",children:F.total})]})]})})}),t.jsx(f.Zb,{children:t.jsx(f.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:t.jsx(i.Z,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Contacted"}),t.jsx("p",{className:"text-2xl font-bold",children:F.by_status.contacted||0})]})]})})}),t.jsx(f.Zb,{children:t.jsx(f.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:t.jsx(c.Z,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Won"}),t.jsx("p",{className:"text-2xl font-bold",children:F.by_status.won||0})]})]})})}),t.jsx(f.Zb,{children:t.jsx(f.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:t.jsx(x,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Conversion Rate"}),(0,t.jsxs)("p",{className:"text-2xl font-bold",children:[F.conversion_rate.toFixed(1),"%"]})]})]})})})]}),t.jsx(f.Zb,{children:(0,t.jsxs)(f.aY,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"relative",children:[t.jsx(p.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsx(b.I,{placeholder:"Search leads by name, phone, or email...",value:R.search,onChange:e=>D({...R,search:e.target.value}),className:"pl-10"})]})}),(0,t.jsxs)(y.z,{variant:"outline",onClick:()=>M(!A),className:"flex items-center space-x-2",children:[t.jsx(m.Z,{className:"w-4 h-4"}),t.jsx("span",{children:"Filters"}),W&&t.jsx("span",{className:"bg-blue-500 text-white rounded-full w-2 h-2"})]}),W&&t.jsx(y.z,{variant:"outline",onClick:()=>{D({search:"",status:"",source:""})},children:t.jsx(u.Z,{className:"w-4 h-4"})})]}),A&&(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(j.P,{options:k,value:R.status,onChange:e=>D({...R,status:e.target.value}),placeholder:"All Statuses"}),t.jsx(j.P,{options:w,value:R.source,onChange:e=>D({...R,source:e.target.value}),placeholder:"All Sources"})]})]})}),z?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"text-gray-500",children:"Loading leads..."})}):0===s.length?t.jsx(f.Zb,{children:(0,t.jsxs)(f.aY,{className:"text-center py-12",children:[t.jsx(i.Z,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No leads found"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:W?"No leads match your current filters. Try adjusting your search criteria.":"Get started by adding your first lead."}),!W&&t.jsx(y.z,{onClick:()=>e.push("/leads/new"),children:"Add Your First Lead"})]})}):t.jsx("div",{className:"space-y-4",children:s.map(a=>t.jsx(f.Zb,{className:"hover:shadow-md transition-shadow",children:t.jsx(f.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[t.jsx("div",{className:"flex-1",children:t.jsx("div",{className:"flex items-start space-x-4",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:a.name}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${_(a.status)}`,children:a.status.replace("_"," ").toUpperCase()}),(0,t.jsxs)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Z(a.priority)}`,children:[a.priority.toUpperCase()," PRIORITY"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600 dark:text-gray-400",children:[(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-medium",children:"Phone:"})," ",a.phone]}),a.email&&(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-medium",children:"Email:"})," ",a.email]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-medium",children:"Source:"})," ",a.source.replace("_"," ")]}),a.extra_data&&Object.entries(a.extra_data).map(([e,a])=>(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{className:"font-medium capitalize",children:[e.replace("_"," "),":"]})," ","boolean"==typeof a?a?"Yes":"No":String(a)]},e))]}),a.notes&&t.jsx("p",{className:"mt-3 text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:a.notes})]})})}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[t.jsx(y.z,{variant:"outline",size:"sm",onClick:()=>e.push(`/leads/${a.id}`),children:"View Details"}),t.jsx(y.z,{variant:"outline",size:"sm",onClick:()=>G(a.id),className:Y===a.id?"bg-red-50 text-red-600 border-red-200":"",children:Y===a.id?"Confirm Delete":"Delete"})]})]})})},a.id))}),!z&&s.length>0&&(o.total_pages||0)>1&&t.jsx(f.Zb,{children:t.jsx(f.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",(o.page-1)*o.per_page+1," to"," ",Math.min(o.page*o.per_page,o.total)," of"," ",o.total," leads"]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(y.z,{variant:"outline",size:"sm",onClick:()=>I(o.page-1),disabled:o.page<=1,children:t.jsx(g.Z,{className:"w-4 h-4"})}),(0,t.jsxs)("span",{className:"text-sm",children:["Page ",o.page," of ",o.total_pages||1]}),t.jsx(y.z,{variant:"outline",size:"sm",onClick:()=>I(o.page+1),disabled:o.page>=(o.total_pages||1),children:t.jsx(h.Z,{className:"w-4 h-4"})})]})]})})})]})}},6820:(e,a,s)=>{"use strict";s.d(a,{I:()=>i});var t=s(3854),r=s(4218),l=s(6370);let i=(0,r.forwardRef)(({className:e,type:a,label:s,error:r,...i},d)=>(0,t.jsxs)("div",{className:"space-y-2",children:[s&&t.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:s}),t.jsx("input",{type:a,className:(0,l.cn)("flex h-10 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100 dark:ring-offset-gray-900 dark:placeholder:text-gray-400 dark:focus-visible:ring-blue-400",r&&"border-red-500 focus-visible:ring-red-500",e),ref:d,...i}),r&&t.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:r})]}));i.displayName="Input"},3611:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});var t=s(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},175:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});var t=s(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},3294:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});var t=s(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},4024:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});var t=s(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4234:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});var t=s(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},1138:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});var t=s(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},8466:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});var t=s(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},3106:(e,a,s)=>{"use strict";s.r(a),s.d(a,{$$typeof:()=>i,__esModule:()=>l,default:()=>n});var t=s(5153);let r=(0,t.createProxy)(String.raw`D:\111\mybizai\mybizai\mybizai.app\app\leads\page.tsx`),{__esModule:l,$$typeof:i}=r,d=r.default,n=d}};var a=require("../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[519,108,839,595],()=>s(8816));module.exports=t})();
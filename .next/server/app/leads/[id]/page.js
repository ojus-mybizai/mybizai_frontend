(()=>{var e={};e.id=759,e.ids=[759],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9981:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>c});var t=s(7096),r=s(6132),l=s(7284),i=s.n(l),n=s(2564),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(a,d);let c=["",{children:["leads",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7424)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\leads\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,6197)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],o=["D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\leads\\[id]\\page.tsx"],x="/leads/[id]/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/leads/[id]/page",pathname:"/leads/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},823:(e,a,s)=>{Promise.resolve().then(s.bind(s,2399))},2399:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>Z});var t=s(3854),r=s(4218),l=s(1018),i=s(2882),n=s(2095),d=s(3092),c=s(1871),o=s(6974),x=s(438),m=s(6359),u=s(6699),p=s(6104),h=s(6820),g=s(9737),y=s(5088),b=s(4391),j=s(6361),v=s(9839);let f=[{value:"new",label:"New"},{value:"in_progress",label:"In Progress"},{value:"converted",label:"Converted"},{value:"lost",label:"Lost"}],N=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}],k=[{value:"portal",label:"Portal"},{value:"website",label:"Website"},{value:"whatsapp",label:"WhatsApp"},{value:"referral",label:"Referral"},{value:"walk-in",label:"Walk-in"},{value:"ad_campaign",label:"Ad Campaign"}],w=e=>{switch(e){case"new":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"in_progress":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"converted":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"lost":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},P=e=>{switch(e){case"high":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"low":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};function Z(){let e=(0,l.useRouter)(),a=(0,l.useParams)(),{accessToken:s}=(0,j.tN)(),{currentLead:Z,setCurrentLead:_,updateLead:C}=(0,j.Rx)(),[L,z]=(0,r.useState)(null),[S,q]=(0,r.useState)(!1),[M,A]=(0,r.useState)(!0),[D,I]=(0,r.useState)(!1),[$,E]=(0,r.useState)({}),[R,O]=(0,r.useState)({});(0,r.useEffect)(()=>{a.id&&U(Number(a.id))},[a.id,s]);let U=async a=>{if(s){A(!0);try{let e=await v.Zc.getLead(a,s);z(e),_(e),O({name:e.name,phone:e.phone,email:e.email,source:e.source,status:e.status,priority:e.priority,notes:e.notes})}catch(a){console.error("Failed to fetch lead:",a),a instanceof v.MS&&404===a.status&&(alert("Lead not found"),e.push("/leads"))}finally{A(!1)}}},Y=()=>{let e={};return R.name?.trim()||(e.name="Name is required"),R.phone?.trim()?(R.phone.length<10||R.phone.length>20)&&(e.phone="Phone number must be between 10-20 characters"):e.phone="Phone number is required",R.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(R.email)&&(e.email="Please enter a valid email address"),R.notes&&R.notes.length>2e3&&(e.notes="Notes must be 2000 characters or less"),E(e),0===Object.keys(e).length},F=(e,a)=>{O(s=>({...s,[e]:a})),$[e]&&E(a=>({...a,[e]:""}))},G=async()=>{if(Y()&&s&&L){I(!0);try{let e={...R,email:R.email||void 0,notes:R.notes||void 0},a=await v.Zc.updateLead(L.id,e,s);z(a),C(L.id,a),q(!1)}catch(e){console.error("Failed to update lead:",e),e instanceof v.MS?alert(`Failed to update lead: ${e.message}`):alert("Failed to update lead. Please try again.")}finally{I(!1)}}};return M?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"text-gray-500",children:"Loading lead..."})}):L?(0,t.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(p.z,{variant:"outline",onClick:()=>e.push("/leads"),className:"flex items-center space-x-2",children:[t.jsx(i.Z,{className:"w-4 h-4"}),t.jsx("span",{children:"Back to Leads"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:L.name}),t.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${w(L.status)}`,children:L.status.replace("_"," ").toUpperCase()}),(0,t.jsxs)("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${P(L.priority)}`,children:[L.priority.toUpperCase()," PRIORITY"]})]}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Lead Details"})]})]}),S?(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(p.z,{variant:"outline",onClick:()=>{L&&O({name:L.name,phone:L.phone,email:L.email,source:L.source,status:L.status,priority:L.priority,notes:L.notes}),q(!1),E({})},children:"Cancel"}),(0,t.jsxs)(p.z,{onClick:G,isLoading:D,disabled:D,className:"flex items-center space-x-2",children:[t.jsx(d.Z,{className:"w-4 h-4"}),t.jsx("span",{children:"Save Changes"})]})]}):(0,t.jsxs)(p.z,{onClick:()=>q(!0),className:"flex items-center space-x-2",children:[t.jsx(n.Z,{className:"w-4 h-4"}),t.jsx("span",{children:"Edit Lead"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsxs)(b.Zb,{children:[t.jsx(b.Ol,{children:t.jsx(b.ll,{children:"Lead Information"})}),t.jsx(b.aY,{className:"space-y-6",children:S?(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsx("div",{className:"md:col-span-2",children:t.jsx(h.I,{label:"Name *",value:R.name||"",onChange:e=>F("name",e.target.value),error:$.name})}),t.jsx(h.I,{label:"Phone *",value:R.phone||"",onChange:e=>F("phone",e.target.value),error:$.phone}),t.jsx(h.I,{label:"Email",type:"email",value:R.email||"",onChange:e=>F("email",e.target.value),error:$.email}),t.jsx(y.P,{label:"Source",options:k,value:R.source||"",onChange:e=>F("source",e.target.value),error:$.source})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:t.jsx(c.Z,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-2xl font-semibold",children:L.name}),(0,t.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Lead from ",L.source.replace("_"," ")]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(o.Z,{className:"w-5 h-5 text-gray-400"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),t.jsx("a",{href:`tel:${L.phone}`,className:"text-blue-600 hover:underline font-medium",children:L.phone})]})]}),L.email&&(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(x.Z,{className:"w-5 h-5 text-gray-400"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),t.jsx("a",{href:`mailto:${L.email}`,className:"text-blue-600 hover:underline",children:L.email})]})]})]})]})})]}),(0,t.jsxs)(b.Zb,{children:[t.jsx(b.Ol,{children:t.jsx(b.ll,{children:"Notes"})}),t.jsx(b.aY,{children:S?(0,t.jsxs)("div",{children:[t.jsx(g.g,{label:"Notes",value:R.notes||"",onChange:e=>F("notes",e.target.value),error:$.notes,className:"min-h-[120px]",placeholder:"Additional information about this lead..."}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:[R.notes?.length||0,"/2000 characters"]})]}):t.jsx("div",{children:L.notes?t.jsx("p",{className:"text-gray-600 dark:text-gray-400 whitespace-pre-wrap",children:L.notes}):t.jsx("p",{className:"text-sm text-gray-500 italic",children:"No notes added"})})})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(b.Zb,{children:[t.jsx(b.Ol,{children:t.jsx(b.ll,{children:"Lead Status"})}),t.jsx(b.aY,{className:"space-y-4",children:S?(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx(y.P,{label:"Status",options:f,value:R.status||"",onChange:e=>F("status",e.target.value),error:$.status}),t.jsx(y.P,{label:"Priority",options:N,value:R.priority||"",onChange:e=>F("priority",e.target.value),error:$.priority})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(m.Z,{className:"w-5 h-5 text-gray-400"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),t.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${w(L.status)}`,children:L.status.replace("_"," ").toUpperCase()})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(m.Z,{className:"w-5 h-5 text-gray-400"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Priority"}),t.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${P(L.priority)}`,children:L.priority.toUpperCase()})]})]})]})})]}),(0,t.jsxs)(b.Zb,{children:[t.jsx(b.Ol,{children:t.jsx(b.ll,{children:"Lead Details"})}),(0,t.jsxs)(b.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(u.Z,{className:"w-5 h-5 text-gray-400"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Created"}),t.jsx("p",{className:"text-sm font-medium",children:new Date(L.created_at).toLocaleDateString()})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(u.Z,{className:"w-5 h-5 text-gray-400"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Last Updated"}),t.jsx("p",{className:"text-sm font-medium",children:new Date(L.updated_at).toLocaleDateString()})]})]}),L.id&&(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(c.Z,{className:"w-5 h-5 text-gray-400"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Assigned To"}),(0,t.jsxs)("p",{className:"text-sm font-medium",children:["User ID: ",L.id]})]})]})]})]})]})]})]}):(0,t.jsxs)("div",{className:"text-center py-12",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Lead not found"}),t.jsx(p.z,{onClick:()=>e.push("/leads"),children:"Back to Leads"})]})}},6820:(e,a,s)=>{"use strict";s.d(a,{I:()=>i});var t=s(3854),r=s(4218),l=s(6370);let i=(0,r.forwardRef)(({className:e,type:a,label:s,error:r,...i},n)=>(0,t.jsxs)("div",{className:"space-y-2",children:[s&&t.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:s}),t.jsx("input",{type:a,className:(0,l.cn)("flex h-10 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100 dark:ring-offset-gray-900 dark:placeholder:text-gray-400 dark:focus-visible:ring-blue-400",r&&"border-red-500 focus-visible:ring-red-500",e),ref:n,...i}),r&&t.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:r})]}));i.displayName="Input"},9737:(e,a,s)=>{"use strict";s.d(a,{g:()=>i});var t=s(3854),r=s(4218),l=s(6370);let i=(0,r.forwardRef)(({className:e,label:a,error:s,...r},i)=>(0,t.jsxs)("div",{className:"space-y-2",children:[a&&t.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:a}),t.jsx("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 ring-offset-white placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100 dark:ring-offset-gray-900 dark:placeholder:text-gray-400 dark:focus-visible:ring-blue-400",s&&"border-red-500 focus-visible:ring-red-500",e),ref:i,...r}),s&&t.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:s})]}));i.displayName="Textarea"},2882:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});var t=s(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6699:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});var t=s(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},438:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});var t=s(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},2095:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});var t=s(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},6974:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});var t=s(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},3092:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});var t=s(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},7424:(e,a,s)=>{"use strict";s.r(a),s.d(a,{$$typeof:()=>i,__esModule:()=>l,default:()=>d});var t=s(5153);let r=(0,t.createProxy)(String.raw`D:\111\mybizai\mybizai\mybizai.app\app\leads\[id]\page.tsx`),{__esModule:l,$$typeof:i}=r,n=r.default,d=n}};var a=require("../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[519,108,839,595],()=>s(9981));module.exports=t})();
(()=>{var e={};e.id=48,e.ids=[48],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},4680:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>g,pages:()=>c,routeModule:()=>u,tree:()=>o});var r=a(7096),s=a(6132),l=a(7284),n=a.n(l),i=a(2564),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);a.d(t,d);let o=["",{children:["chats",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,5261)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\chats\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,6197)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\chats\\page.tsx"],g="/chats/page",x={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/chats/page",pathname:"/chats",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},7772:(e,t,a)=>{Promise.resolve().then(a.bind(a,3199))},3199:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>M});var r=a(3854),s=a(4218),l=a(6974),n=a(2679),i=a(3718),d=a(438),o=a(6802),c=a(294),g=a(4920),x=a(4024),u=a(175),m=a(3611),h=a(4234),y=a(9695),p=a(9496),b=a(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let Image=(0,b.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var f=a(8055),v=a(6361),k=a(9839);let j=e=>({id:e.id.toString(),name:e.title,channel:e.channel,type:"Warm",lastMessage:e.summary||"No messages yet",timestamp:e.last_message_at?new Date(e.last_message_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"No messages",unreadCount:0,isOnline:"active"===e.status}),w=e=>({id:e.id.toString(),author:"user"===e.sender?"lead":"ai",text:e.text,timestamp:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),status:"read"});function N({channel:e}){let t="w-4 h-4";switch(e){case"WhatsApp":return r.jsx(l.Z,{className:t});case"Instagram":return r.jsx(n.Z,{className:t});case"Messenger":return r.jsx(i.Z,{className:t});case"Email":return r.jsx(d.Z,{className:t});default:return null}}function C({type:e}){let t="Hot"===e?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":"Warm"===e?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300";return r.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${t}`,title:`${e} lead - ${function(e){switch(e){case"Hot":return"High interest, ready to buy";case"Warm":return"Interested, needs nurturing";case"Cold":return"Low interest, requires engagement";default:return""}}(e)}`,children:e})}function A({status:e}){if(!e)return null;switch(e){case"sent":return r.jsx(o.Z,{className:"w-3 h-3 text-gray-400"});case"delivered":return r.jsx(c.Z,{className:"w-3 h-3 text-gray-400"});case"read":return r.jsx(c.Z,{className:"w-3 h-3 text-blue-500"});default:return null}}function L({isOnline:e,lastSeen:t}){return e?r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full",title:"Online"}):t?r.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full",title:`Last seen ${t}`}):null}function S({label:e,isSelected:t,onToggle:a,onRemove:s}){return(0,r.jsxs)("button",{onClick:a,className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium transition-colors ${t?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[e,t&&s&&r.jsx(g.Z,{className:"w-3 h-3 ml-1 cursor-pointer",onClick:e=>{e.stopPropagation(),s()}})]})}function Z({date:e}){return r.jsx("div",{className:"flex items-center justify-center my-4",children:r.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-full",children:r.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:e})})})}function z(){return r.jsx("div",{className:"flex justify-start mb-4",children:r.jsx("div",{className:"max-w-[75%]",children:r.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-2xl px-4 py-2",children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsxs)("div",{className:"flex space-x-1",children:[r.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),r.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),r.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),r.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"AI is typing..."})]})})})})}function M(){let{accessToken:e}=(0,v.tN)(),[t,a]=(0,s.useState)([]),[l,n]=(0,s.useState)([]),[d,o]=(0,s.useState)("AI"),[c,b]=(0,s.useState)(""),[M,I]=(0,s.useState)(!1),[q,P]=(0,s.useState)(null),[E,R]=(0,s.useState)(null),[T,B]=(0,s.useState)([]),[$,D]=(0,s.useState)(null),[F,W]=(0,s.useState)([]),[O,U]=(0,s.useState)([]),[H,K]=(0,s.useState)({}),[X,J]=(0,s.useState)({}),[Q,G]=(0,s.useState)(!1),[V,Y]=(0,s.useState)(!1),[ee,et]=(0,s.useState)(!0),[ea,er]=(0,s.useState)(!1),[es,el]=(0,s.useState)(!1),en=(0,s.useRef)(null),ei=(0,s.useRef)(null);(0,s.useEffect)(()=>{e&&ed()},[e]),(0,s.useEffect)(()=>{$&&e&&eo($.id)},[$,e]);let ed=async()=>{if(e){I(!0),P(null);try{let t=await k.zN.getConversations(e);B(t),t.length>0&&!E&&(R(t[0].id.toString()),D(t[0]))}catch(e){console.error("Failed to load conversations:",e),P("Failed to load conversations")}finally{I(!1)}}},eo=async t=>{if(e)try{let a=await k.zN.getConversationMessages(t,e);U(a);let r=a.map(w);W(r)}catch(e){console.error("Failed to load conversation messages:",e),W([])}},ec=e=>{a(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},eg=e=>{n(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},ex=(0,s.useMemo)(()=>T.map(j).filter(e=>{let a=0===t.length||t.includes(e.channel),r=0===l.length||l.includes(e.type),s=!c||e.name.toLowerCase().includes(c.toLowerCase())||e.lastMessage.toLowerCase().includes(c.toLowerCase());return a&&r&&s}),[T,t,l,c]),eu=(0,s.useMemo)(()=>ex.find(e=>e.id===E)||null,[ex,E]),em=E&&H[E]||d,eh=E&&X[E]||"";(0,s.useEffect)(()=>{if("AI"===em&&F.length>0){let e=F[F.length-1];if("lead"===e.author){Y(!0);let e=setTimeout(()=>Y(!1),2e3);return()=>clearTimeout(e)}}},[F,em]),(0,s.useEffect)(()=>{ei.current&&(ei.current.scrollTop=ei.current.scrollHeight)},[F,V]);let ey=async()=>{if(E&&eh.trim()&&$)try{await k.zN.addMessage($.id,{text:eh.trim(),sender:"agent",message_type:"text"},e||""),await eo($.id),await ed(),J(e=>({...e,[E]:""}))}catch(e){console.error("Failed to send message:",e)}},ep=e=>{E&&$&&W(t=>[...t,{id:Math.random().toString(36).slice(2),author:"lead",text:e,timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),status:"read"}])},eb=async t=>{if(e)try{let a=await k.zN.createConversation({title:t.name,channel:t.channel.toLowerCase(),initial_message:t.message||null},e||"");await ed(),R(a.id.toString()),D(a)}catch(e){throw console.error("Failed to create conversation:",e),e}};return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 dark:from-blue-600 dark:to-purple-700 flex items-center justify-center shadow-lg",children:r.jsx(i.Z,{className:"w-5 h-5 text-white"})}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Chats"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Live conversations"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("button",{onClick:()=>el(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-lg shadow-lg transition-all duration-200 hover:shadow-xl",children:[r.jsx(x.Z,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"New Chat"})]}),r.jsx("button",{onClick:()=>G(!Q),className:"lg:hidden p-2 rounded-lg border border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:Q?r.jsx(u.Z,{className:"w-5 h-5"}):r.jsx(m.Z,{className:"w-5 h-5"})})]})]}),M&&r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"text-gray-500",children:"Loading conversations..."})}),q&&(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-red-500 mb-4",children:q}),r.jsx("button",{onClick:ed,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Retry"})]}),!M&&!q&&(0,r.jsxs)("div",{className:`grid gap-4 h-[calc(100vh-11rem)] overflow-hidden ${Q?"grid-cols-1":"grid-cols-1 lg:grid-cols-3"}`,children:[!Q&&(0,r.jsxs)("aside",{className:"lg:col-span-1 bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700/50 rounded-xl flex flex-col overflow-hidden backdrop-blur-sm",children:[(0,r.jsxs)("div",{className:"p-2 border-b border-gray-200 dark:border-gray-700 space-y-2",children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx("input",{value:c,onChange:e=>b(e.target.value),placeholder:"Search conversations...",className:"w-full pl-9 pr-3 py-2 rounded-md bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 text-sm text-gray-900 dark:text-gray-100"}),r.jsx(h.Z,{className:"w-4 h-4 absolute left-3 top-2.5 text-gray-400"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 block",children:"Channels"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:["WhatsApp","Instagram","Messenger","Email"].map(e=>r.jsx(S,{label:e,isSelected:t.includes(e),onToggle:()=>ec(e),onRemove:()=>ec(e)},e))})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 block",children:"Lead Types"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:["Hot","Warm","Cold"].map(e=>r.jsx(S,{label:e,isSelected:l.includes(e),onToggle:()=>eg(e),onRemove:()=>eg(e)},e))})]}),(t.length>0||l.length>0||c)&&r.jsx("button",{onClick:()=>{a([]),n([]),b("")},className:"text-xs text-blue-500 hover:text-blue-700 dark:hover:text-blue-300 underline w-full text-center",children:"Clear all filters"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:(0,r.jsxs)("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[ex.map(e=>r.jsx("li",{onClick:()=>{R(e.id);let t=T.find(t=>t.id.toString()===e.id);D(t||null)},className:`p-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors ${E===e.id?"bg-blue-50 dark:bg-blue-900/20 border-r-2 border-blue-500":""}`,children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsxs)("div",{className:"relative mt-0.5",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:r.jsx(N,{channel:e.channel})}),r.jsx("div",{className:"absolute -bottom-1 -right-1",children:r.jsx(L,{isOnline:e.isOnline,lastSeen:e.lastSeen})})]}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100 truncate",children:e.name}),e.unreadCount>0&&r.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:e.unreadCount})]}),r.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 ml-2 shrink-0",children:e.timestamp})]}),(0,r.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[r.jsx(C,{type:e.type}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:e.lastMessage})]})]})]})},e.id)),0===ex.length&&r.jsx("li",{className:"p-6 text-center text-sm text-gray-500 dark:text-gray-400",children:"No conversations match your filters."})]})})]}),(0,r.jsxs)("section",{className:`bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700/50 rounded-xl flex flex-col overflow-hidden backdrop-blur-sm ${Q?"col-span-1":"lg:col-span-2"}`,children:[r.jsx("div",{className:"sticky top-0 z-10 bg-white/95 dark:bg-gray-800/95 backdrop-blur border-b border-gray-200 dark:border-gray-700 p-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[Q&&r.jsx("button",{onClick:()=>G(!1),className:"p-1 rounded-md text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:r.jsx(u.Z,{className:"w-5 h-5"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:eu?.name||"Select a conversation"}),eu&&r.jsx(L,{isOnline:eu.isOnline,lastSeen:eu.lastSeen})]}),eu&&(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-500 dark:text-gray-400",children:[(0,r.jsxs)("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-gray-100 dark:bg-gray-700",children:[r.jsx(N,{channel:eu.channel}),r.jsx("span",{children:eu.channel})]}),r.jsx(C,{type:eu.type}),!eu.isOnline&&eu.lastSeen&&(0,r.jsxs)("span",{children:["Last seen ",eu.lastSeen]})]})]})]}),eu&&(0,r.jsxs)("div",{className:"inline-flex rounded-md overflow-hidden border border-gray-200 dark:border-gray-700",children:[r.jsx("button",{className:`px-3 py-1.5 text-xs transition-colors ${"AI"===em?"bg-gray-900 text-white dark:bg-gray-100 dark:text-gray-900":"bg-transparent text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,onClick:()=>K(e=>({...e,[eu.id]:"AI"})),children:"AI-handled"}),r.jsx("button",{className:`px-3 py-1.5 text-xs transition-colors ${"Manual"===em?"bg-gray-900 text-white dark:bg-gray-100 dark:text-gray-900":"bg-transparent text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,onClick:()=>K(e=>({...e,[eu.id]:"Manual"})),children:"Manual"})]})]})}),(0,r.jsxs)("div",{ref:ei,className:"flex-1 overflow-y-auto p-3 space-y-3",children:[!eu&&r.jsx("div",{className:"h-full flex items-center justify-center text-gray-500 dark:text-gray-400",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(i.Z,{className:"w-12 h-12 mx-auto mb-4 text-gray-300 dark:text-gray-600"}),r.jsx("p",{children:"Select a conversation from the sidebar to view messages"})]})}),eu&&(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(Z,{date:"Today"}),F.map((e,t)=>{let a="ai"===e.author,s=a&&e.quickReplies&&t===F.length-1;return(0,r.jsxs)("div",{children:[r.jsx("div",{className:`flex ${a?"justify-end":"justify-start"} mb-2`,children:(0,r.jsxs)("div",{className:"max-w-[75%]",children:[a&&r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 text-right",children:"AI Reply"}),r.jsx("div",{className:`rounded-3xl px-4 py-3 text-sm shadow-sm ${a?"bg-emerald-600 text-white dark:bg-emerald-500":"bg-gray-100 text-gray-900 dark:bg-gray-700 dark:text-gray-100"}`,children:e.text}),(0,r.jsxs)("div",{className:`mt-1 flex items-center gap-1 ${a?"justify-end":"justify-start"}`,children:[r.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:e.timestamp}),a&&r.jsx(A,{status:e.status})]})]})}),s&&r.jsx("div",{className:"flex flex-wrap gap-2 mb-4 justify-end",children:e.quickReplies.map((e,t)=>r.jsx("button",{onClick:()=>ep(e),className:"px-3 py-1.5 text-xs bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-full transition-colors",children:e},t))})]},e.id)}),V&&r.jsx(z,{})]})]}),eu&&"Manual"===em&&(0,r.jsxs)("div",{className:"sticky bottom-0 z-10 bg-white/95 dark:bg-gray-800/95 backdrop-blur border-t border-gray-200 dark:border-gray-700 p-3",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:(0,r.jsxs)("label",{className:"flex items-center gap-2 text-xs text-gray-600 dark:text-gray-400",children:[r.jsx("input",{type:"checkbox",checked:ee,onChange:e=>et(e.target.checked),className:"rounded"}),"Press Enter to send"]})}),(0,r.jsxs)("div",{className:"flex items-end gap-2",children:[r.jsx("button",{onClick:()=>er(!ea),className:"p-2 rounded-md border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",title:"Emoji",children:r.jsx(y.Z,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>en.current?.click(),className:"p-2 rounded-md border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",title:"Upload file",children:r.jsx(p.Z,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>en.current?.click(),className:"p-2 rounded-md border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",title:"Upload image",children:r.jsx(Image,{className:"w-5 h-5"})}),r.jsx("div",{className:"flex-1",children:r.jsx("textarea",{rows:1,value:eh,onChange:e=>eu&&J(t=>({...t,[eu.id]:e.target.value})),onKeyDown:e=>{ee&&"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),ey())},placeholder:"Type a message...",className:"w-full resize-none rounded-lg bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 text-sm px-4 py-3 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})}),(0,r.jsxs)("button",{onClick:ey,className:"inline-flex items-center gap-2 px-4 py-3 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-colors",disabled:!eh.trim(),children:[r.jsx(f.Z,{className:"w-4 h-4"}),"Send"]})]}),r.jsx("input",{ref:en,type:"file",className:"hidden",accept:"image/*,application/pdf,.doc,.docx,.txt",onChange:e=>{console.log("File selected:",e.target.files?.[0])}})]})]})]}),es&&(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>el(!1)}),(0,r.jsxs)("div",{className:"relative w-[85%] max-w-4xl max-h-[90vh] bg-white dark:bg-slate-900 rounded-2xl shadow-2xl flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-slate-700 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:r.jsx(x.Z,{className:"w-4 h-4 text-white"})}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Start New Chat"})]}),r.jsx("button",{onClick:()=>el(!1),className:"p-2 rounded-lg text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:r.jsx(g.Z,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:r.jsx(_,{onClose:()=>el(!1),onSubmit:eb})})]})]})]})}function _({onClose:e,onSubmit:t}){let[a,l]=(0,s.useState)({name:"",phone:"",email:"",channel:"WhatsApp",type:"Warm",message:""}),[n,i]=(0,s.useState)(!1),d=async r=>{if(r.preventDefault(),!n){i(!0);try{await t(a),e()}catch(e){console.error("Failed to create conversation:",e)}finally{i(!1)}}};return(0,r.jsxs)("form",{onSubmit:d,children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Contact Name *"}),r.jsx("input",{type:"text",required:!0,value:a.name,onChange:e=>l(t=>({...t,name:e.target.value})),className:"w-full px-4 py-3 rounded-lg border border-gray-200 dark:border-slate-600 bg-white dark:bg-slate-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter contact name"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number *"}),r.jsx("input",{type:"tel",required:!0,value:a.phone,onChange:e=>l(t=>({...t,phone:e.target.value})),className:"w-full px-4 py-3 rounded-lg border border-gray-200 dark:border-slate-600 bg-white dark:bg-slate-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+91 98765 43210"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email (Optional)"}),r.jsx("input",{type:"email",value:a.email,onChange:e=>l(t=>({...t,email:e.target.value})),className:"w-full px-4 py-3 rounded-lg border border-gray-200 dark:border-slate-600 bg-white dark:bg-slate-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"email@example.com"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Channel *"}),(0,r.jsxs)("select",{value:a.channel,onChange:e=>l(t=>({...t,channel:e.target.value})),className:"w-full px-4 py-3 rounded-lg border border-gray-200 dark:border-slate-600 bg-white dark:bg-slate-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"WhatsApp",children:"WhatsApp"}),r.jsx("option",{value:"Instagram",children:"Instagram"}),r.jsx("option",{value:"Messenger",children:"Messenger"}),r.jsx("option",{value:"Email",children:"Email"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Lead Type"}),(0,r.jsxs)("select",{value:a.type,onChange:e=>l(t=>({...t,type:e.target.value})),className:"w-full px-4 py-3 rounded-lg border border-gray-200 dark:border-slate-600 bg-white dark:bg-slate-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"Hot",children:"Hot"}),r.jsx("option",{value:"Warm",children:"Warm"}),r.jsx("option",{value:"Cold",children:"Cold"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Initial Message (Optional)"}),r.jsx("textarea",{value:a.message,onChange:e=>l(t=>({...t,message:e.target.value})),rows:3,className:"w-full px-4 py-3 rounded-lg border border-gray-200 dark:border-slate-600 bg-white dark:bg-slate-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Start the conversation..."})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-end gap-3 mt-6 pt-6 border-t border-gray-200 dark:border-slate-700",children:[r.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-slate-600 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-800 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:n||!a.name.trim()||!a.phone.trim(),className:"px-6 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg transition-colors",children:n?"Creating...":"Create Chat"})]})]})}},6361:(e,t,a)=>{"use strict";a.d(t,{tN:()=>r.t,zF:()=>l.z,iC:()=>u,V6:()=>d,sx:()=>o,Ln:()=>c,I1:()=>x,Rx:()=>g,LM:()=>s.L});var r=a(1728),s=a(7034),l=a(4057),n=a(4012),i=a(6965);let d=(0,n.Ue)()((0,i.tJ)((0,i.XR)((e,t)=>({chatAgents:[],currentChatAgent:null,isLoading:!1,error:null,setChatAgents:t=>{e({chatAgents:t})},setCurrentChatAgent:t=>{e({currentChatAgent:t})},addChatAgent:t=>{e(e=>({chatAgents:[...e.chatAgents,t]}))},updateChatAgent:(t,a)=>{e(e=>({chatAgents:e.chatAgents.map(e=>e.id===t?{...e,...a}:e),currentChatAgent:e.currentChatAgent?.id===t?{...e.currentChatAgent,...a}:e.currentChatAgent}))},removeChatAgent:t=>{e(e=>({chatAgents:e.chatAgents.filter(e=>e.id!==t),currentChatAgent:e.currentChatAgent?.id===t?null:e.currentChatAgent}))},clearChatAgents:()=>{e({chatAgents:[],currentChatAgent:null,isLoading:!1,error:null})},setChatAgentChannels:(t,a)=>{e(e=>({chatAgents:e.chatAgents.map(e=>e.id===t?{...e,channels:a}:e),currentChatAgent:e.currentChatAgent?.id===t?{...e.currentChatAgent,channels:a}:e.currentChatAgent}))},setChatAgentKnowledgeBases:(t,a)=>{e(e=>({chatAgents:e.chatAgents.map(e=>e.id===t?{...e,knowledge_bases:a}:e),currentChatAgent:e.currentChatAgent?.id===t?{...e.currentChatAgent,knowledge_bases:a}:e.currentChatAgent}))},setChatAgentTools:(t,a)=>{e(e=>({chatAgents:e.chatAgents.map(e=>e.id===t?{...e,tools:a}:e),currentChatAgent:e.currentChatAgent?.id===t?{...e.currentChatAgent,tools:a}:e.currentChatAgent}))},setLoading:t=>{e({isLoading:t})},setError:t=>{e({error:t})}})),{name:"chatagent-storage",partialize:e=>({chatAgents:e.chatAgents,currentChatAgent:e.currentChatAgent})})),o=(0,n.Ue)()((0,i.tJ)((0,i.XR)((e,t)=>({contacts:[],isLoading:!1,filters:{search:"",phone:"",email:""},setContacts:t=>{e({contacts:t})},addContact:t=>{e(e=>({contacts:[...e.contacts,t]}))},updateContact:(t,a)=>{e(e=>({contacts:e.contacts.map(e=>e.id===t?a:e)}))},removeContact:t=>{e(e=>({contacts:e.contacts.filter(e=>e.id!==t)}))},setLoading:t=>{e({isLoading:t})},clearContacts:()=>{e({contacts:[],isLoading:!1})},setFilters:t=>{e(e=>({filters:{...e.filters,...t}}))},clearFilters:()=>{e({filters:{search:"",phone:"",email:""}})}})),{name:"contact-storage",partialize:e=>({contacts:e.contacts})})),c=(0,n.Ue)()((0,i.tJ)((0,i.XR)((e,t)=>({stats:null,setStats:t=>{e({stats:t})},updateStats:t=>{e(e=>({stats:e.stats?{...e.stats,...t}:null}))},clearStats:()=>{e({stats:null})},refreshStats:async()=>{console.log("Refreshing dashboard stats...")}})),{name:"dashboard-storage",partialize:e=>({stats:e.stats})})),g=(0,n.Ue)()((0,i.tJ)((0,i.XR)((e,t)=>({leads:[],currentLead:null,isLoading:!1,pagination:{page:1,per_page:20,total:0,total_pages:0},setLeads:(t,a)=>{a?e({leads:t,pagination:a}):e({leads:t})},setCurrentLead:t=>{e({currentLead:t})},addLead:t=>{e(e=>({leads:[...e.leads,t]}))},updateLead:(t,a)=>{e(e=>({leads:e.leads.map(e=>e.id===t?a:e),currentLead:e.currentLead?.id===t?a:e.currentLead}))},removeLead:t=>{e(e=>({leads:e.leads.filter(e=>e.id!==t),currentLead:e.currentLead?.id===t?null:e.currentLead}))},setLoading:t=>{e({isLoading:t})},setPagination:t=>{e({pagination:t})},clearLeads:()=>{e({leads:[],currentLead:null,isLoading:!1,pagination:{page:1,per_page:20,total:0,total_pages:0}})}})),{name:"lead-storage",partialize:e=>({leads:e.leads,currentLead:e.currentLead,pagination:e.pagination})}));a(8296),a(5936);let x=(0,n.Ue)()((0,i.tJ)((0,i.XR)((e,t)=>({knowledgeBases:[],isLoading:!1,error:null,setKnowledgeBases:t=>{e({knowledgeBases:t})},setLoading:t=>{e({isLoading:t})},setError:t=>{e({error:t})},addKnowledgeBase:t=>{e(e=>({knowledgeBases:[...e.knowledgeBases,t]}))},updateKnowledgeBase:(t,a)=>{e(e=>({knowledgeBases:e.knowledgeBases.map(e=>e.id===t?{...e,...a}:e)}))},removeKnowledgeBase:t=>{e(e=>({knowledgeBases:e.knowledgeBases.filter(e=>e.id!==t)}))},clearKnowledgeBases:()=>{e({knowledgeBases:[],isLoading:!1,error:null})}})),{name:"knowledgebase-storage",partialize:e=>({knowledgeBases:e.knowledgeBases})}));(0,n.Ue)()((0,i.tJ)((0,i.XR)((e,t)=>({integrations:[],isLoading:!1,error:null,setIntegrations:t=>{e({integrations:t})},setLoading:t=>{e({isLoading:t})},setError:t=>{e({error:t})},addIntegration:t=>{e(e=>({integrations:[...e.integrations,t]}))},updateIntegration:(t,a)=>{e(e=>({integrations:e.integrations.map(e=>e.id===t?{...e,...a}:e)}))},removeIntegration:t=>{e(e=>({integrations:e.integrations.filter(e=>e.id!==t)}))},clearIntegrations:()=>{e({integrations:[],isLoading:!1,error:null})}})),{name:"integration-storage",partialize:e=>({integrations:e.integrations})}));let u=(0,n.Ue)()((0,i.tJ)((0,i.XR)((e,t)=>({items:[],templates:[],isLoading:!1,searchQuery:"",filters:{},setItems:t=>{e({items:t})},addItem:t=>{e(e=>({items:[...e.items,t]}))},updateItem:(t,a)=>{e(e=>({items:e.items.map(e=>e.id===t?a:e)}))},removeItem:t=>{e(e=>({items:e.items.filter(e=>e.id!==t)}))},setLoading:t=>{e({isLoading:t})},setSearchQuery:t=>{e({searchQuery:t})},setFilters:t=>{e({filters:t})},clearFilters:()=>{e({filters:{}})},clearItems:()=>{e({items:[],templates:[],isLoading:!1,searchQuery:"",filters:{}})},setTemplates:t=>{e({templates:t})},addTemplate:t=>{e(e=>({templates:[...e.templates,t]}))},updateTemplate:(t,a)=>{e(e=>({templates:e.templates.map(e=>e.id===t?a:e)}))},removeTemplate:t=>{e(e=>({templates:e.templates.filter(e=>e.id!==t)}))},clearTemplates:()=>{e({templates:[]})}})),{name:"catalog-storage",partialize:e=>({items:e.items,templates:e.templates,searchQuery:e.searchQuery,filters:e.filters})}))},294:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r.Z)("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]])},6802:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},3611:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},175:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},2679:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r.Z)("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]])},438:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},6974:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},4024:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4234:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8055:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},9695:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r.Z)("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]])},9496:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},5261:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>n,__esModule:()=>l,default:()=>d});var r=a(5153);let s=(0,r.createProxy)(String.raw`D:\111\mybizai\mybizai\mybizai.app\app\chats\page.tsx`),{__esModule:l,$$typeof:n}=s,i=s.default,d=i}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[519,108,839],()=>a(4680));module.exports=r})();
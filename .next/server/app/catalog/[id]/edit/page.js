(()=>{var e={};e.id=188,e.ids=[188],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9837:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>o});var i=a(7096),r=a(6132),s=a(7284),l=a.n(s),n=a(2564),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(t,d);let o=["",{children:["catalog",{children:["[id]",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,5129)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\catalog\\[id]\\edit\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,6197)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\catalog\\[id]\\edit\\page.tsx"],p="/catalog/[id]/edit/page",m={require:a,loadChunk:()=>Promise.resolve()},u=new i.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/catalog/[id]/edit/page",pathname:"/catalog/[id]/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},8921:(e,t,a)=>{Promise.resolve().then(a.bind(a,1969))},1969:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var i=a(3854),r=a(4218),s=a(1018),l=a(1448),n=a(6361),d=a(9839);function o(){let e=(0,s.useRouter)(),t=(0,s.useParams)(),{accessToken:a}=(0,n.tN)(),{updateItem:o,items:c}=(0,n.iC)(),[p,m]=(0,r.useState)(null),[u,g]=(0,r.useState)([]),[y,x]=(0,r.useState)(!0),[f,_]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let i=async()=>{if(t.id&&a){x(!0);try{let[e,i]=await Promise.all([d.iJ.getCatalogItem(t.id,a),d.iJ.getCatalogTemplates(a)]),r={id:String(e.id),name:e.name,description:e.description||"",category:e.category||"",price:e.price,currency:e.currency,availability:e.availability,type:e.type,images:e.images,template_fields:e.extra_data,created_at:e.created_at,updated_at:e.updated_at};m(r);let s=i.map(e=>({id:String(e.id),name:e.name,description:"",fields:e.extra_metadata.map((e,t)=>({id:`field-${t}`,label:e,type:"text",required:!1})),created_at:e.created_at,updated_at:e.updated_at}));g(s)}catch(t){console.error("Failed to fetch data:",t),t instanceof d.MS&&404===t.status?(alert("Item not found"),e.push("/catalog")):alert("Failed to load item data")}finally{x(!1)}}};i()},[a,t.id,e,c]);let h=async(i,r)=>{if(t.id&&a){_(!0);try{let s=[];if(r.length>0){let e=r.map(e=>d.iJ.uploadCatalogImage(e,a)),t=await Promise.all(e);s=t.map(e=>e.url)}let l=[...p?.images||[],...s],n={name:i.name,description:i.description||null,category:i.category||null,price:i.price,currency:i.currency,availability:i.availability,type:i.type,images:l,extra_data:i.template_fields||{},template_id:null},c=await d.iJ.updateCatalogItem(t.id,n,a),m={id:String(c.id),name:c.name,description:c.description||"",category:c.category||"",price:c.price,currency:c.currency,availability:c.availability,type:c.type,images:c.images,template_fields:c.extra_data,created_at:c.created_at,updated_at:c.updated_at};o(t.id,m),e.push("/catalog")}catch(e){console.error("Failed to update item:",e),e instanceof d.MS?alert(`Failed to update item: ${e.message}`):alert("Failed to update item. Please try again.")}finally{_(!1)}}};return a?y?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):p?(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Edit Item"}),(0,i.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:['Update details for "',p.name,'"']})]}),i.jsx(l.Z,{initialData:p,templates:u,onSubmit:h,onCancel:()=>{e.push("/catalog")},isLoading:f})]}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("p",{className:"text-gray-500",children:"Item not found."})}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("p",{className:"text-gray-500",children:"Please log in to edit catalog items."})})}new Date().toISOString(),new Date().toISOString()},5129:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>l,__esModule:()=>s,default:()=>d});var i=a(5153);let r=(0,i.createProxy)(String.raw`D:\111\mybizai\mybizai\mybizai.app\app\catalog\[id]\edit\page.tsx`),{__esModule:s,$$typeof:l}=r,n=r.default,d=n}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),i=t.X(0,[519,108,839,595,448],()=>a(9837));module.exports=i})();
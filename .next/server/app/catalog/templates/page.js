(()=>{var e={};e.id=632,e.ids=[632],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},1643:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>p,tree:()=>c});var s=a(7096),l=a(6132),r=a(7284),i=a.n(r),d=a(2564),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);a.d(t,n);let c=["",{children:["catalog",{children:["templates",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,8955)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\catalog\\templates\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,6197)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],o=["D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\catalog\\templates\\page.tsx"],m="/catalog/templates/page",x={require:a,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/catalog/templates/page",pathname:"/catalog/templates",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6430:(e,t,a)=>{Promise.resolve().then(a.bind(a,2670))},2670:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var s=a(3854),l=a(4218),r=a(1018),i=a(4024),d=a(518),n=a(2095),c=a(9783),o=a(6104),m=a(4391),x=a(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let p=(0,x.Z)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),u=(0,x.Z)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);var g=a(6820),h=a(9737),y=a(5088);function f({initialData:e,onSubmit:t,onCancel:a,isLoading:r=!1}){let[d,n]=(0,l.useState)({name:e?.name||"",description:e?.description||""}),[x,f]=(0,l.useState)(e?.fields.map(e=>({...e,tempId:crypto.randomUUID()}))||[]),[b,j]=(0,l.useState)({}),v=[{value:"text",label:"Text"},{value:"number",label:"Number"},{value:"textarea",label:"Textarea"},{value:"dropdown",label:"Dropdown"},{value:"boolean",label:"Yes/No"},{value:"date",label:"Date"}],N=()=>{let e={};return d.name.trim()||(e.name="Template name is required"),0===x.length&&(e.fields="At least one field is required"),x.forEach((t,a)=>{t.label.trim()||(e[`field_${a}_label`]="Field label is required"),"dropdown"!==t.type||t.options&&0!==t.options.length||(e[`field_${a}_options`]="Dropdown options are required")}),j(e),0===Object.keys(e).length},k=(e,t)=>{n(a=>({...a,[e]:t})),b[e]&&j(t=>({...t,[e]:""}))},w=e=>{f(t=>t.filter(t=>t.tempId!==e))},_=(e,t)=>{f(a=>a.map(a=>a.tempId===e?{...a,...t}:a));let a=x.findIndex(t=>t.tempId===e);if(a>=0){let e=Object.keys(b).filter(e=>e.startsWith(`field_${a}_`));e.length>0&&j(t=>{let a={...t};return e.forEach(e=>delete a[e]),a})}},C=(e,t)=>{let a=x.findIndex(t=>t.tempId===e);if(-1===a)return;let s="up"===t?a-1:a+1;if(s<0||s>=x.length)return;let l=[...x],[r]=l.splice(a,1);l.splice(s,0,r),f(l)},z=e=>{_(e,{options:[...x.find(t=>t.tempId===e)?.options||[],""]})},I=(e,t,a)=>{let s=x.find(t=>t.tempId===e);if(!s)return;let l=[...s.options||[]];l[t]=a,_(e,{options:l})},S=(e,t)=>{let a=x.find(t=>t.tempId===e);if(!a)return;let s=[...a.options||[]];s.splice(t,1),_(e,{options:s})},T=async e=>{if(e.preventDefault(),!N())return;let a={name:d.name,description:d.description||void 0,fields:x.map(({tempId:e,...t})=>t)};await t(a)};return(0,s.jsxs)("form",{onSubmit:T,className:"space-y-6",children:[(0,s.jsxs)(m.Zb,{children:[s.jsx(m.Ol,{children:s.jsx(m.ll,{children:"Template Information"})}),(0,s.jsxs)(m.aY,{className:"space-y-4",children:[s.jsx(g.I,{label:"Template Name",value:d.name,onChange:e=>k("name",e.target.value),error:b.name,placeholder:"e.g., Product Template, Service Template"}),s.jsx(h.g,{label:"Description (Optional)",value:d.description,onChange:e=>k("description",e.target.value),placeholder:"Describe what this template is used for..."})]})]}),(0,s.jsxs)(m.Zb,{children:[(0,s.jsxs)(m.Ol,{className:"flex flex-row items-center justify-between",children:[s.jsx(m.ll,{children:"Template Fields"}),(0,s.jsxs)(o.z,{type:"button",onClick:()=>{let e={tempId:crypto.randomUUID(),label:"",type:"text",required:!1,options:[]};f(t=>[...t,e])},size:"sm",children:[s.jsx(i.Z,{className:"w-4 h-4 mr-2"}),"Add Field"]})]}),(0,s.jsxs)(m.aY,{className:"space-y-4",children:[b.fields&&s.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:b.fields}),0===x.length?s.jsx("div",{className:"text-center py-8 text-gray-500",children:s.jsx("p",{children:'No fields added yet. Click "Add Field" to get started.'})}):s.jsx("div",{className:"space-y-4",children:x.map((e,t)=>s.jsx(m.Zb,{className:"border-l-4 border-l-blue-500",children:(0,s.jsxs)(m.aY,{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:["Field ",t+1]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(o.z,{type:"button",variant:"outline",size:"sm",onClick:()=>C(e.tempId,"up"),disabled:0===t,children:s.jsx(p,{className:"w-3 h-3"})}),s.jsx(o.z,{type:"button",variant:"outline",size:"sm",onClick:()=>C(e.tempId,"down"),disabled:t===x.length-1,children:s.jsx(u,{className:"w-3 h-3"})}),s.jsx(o.z,{type:"button",variant:"outline",size:"sm",onClick:()=>w(e.tempId),className:"text-red-600 hover:text-red-700",children:s.jsx(c.Z,{className:"w-3 h-3"})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(g.I,{label:"Field Label",value:e.label,onChange:t=>_(e.tempId,{label:t.target.value}),error:b[`field_${t}_label`],placeholder:"e.g., Brand, Size, Color"}),s.jsx(y.P,{label:"Field Type",options:v,value:e.type,onChange:t=>_(e.tempId,{type:t.target.value,options:"dropdown"===t.target.value?[""]:[]})})]}),s.jsx("div",{className:"mt-4",children:(0,s.jsxs)("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:e.required,onChange:t=>_(e.tempId,{required:t.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Required field"})]})}),"dropdown"===e.type&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Options"}),(0,s.jsxs)(o.z,{type:"button",variant:"outline",size:"sm",onClick:()=>z(e.tempId),children:[s.jsx(i.Z,{className:"w-3 h-3 mr-1"}),"Add Option"]})]}),b[`field_${t}_options`]&&s.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mb-2",children:b[`field_${t}_options`]}),s.jsx("div",{className:"space-y-2",children:(e.options||[]).map((t,a)=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(g.I,{value:t,onChange:t=>I(e.tempId,a,t.target.value),placeholder:`Option ${a+1}`,className:"flex-1"}),s.jsx(o.z,{type:"button",variant:"outline",size:"sm",onClick:()=>S(e.tempId,a),className:"text-red-600 hover:text-red-700",children:s.jsx(c.Z,{className:"w-3 h-3"})})]},a))})]})]})},e.tempId))})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx(o.z,{type:"button",variant:"outline",onClick:a,children:"Cancel"}),s.jsx(o.z,{type:"submit",isLoading:r,disabled:r,children:e?"Update Template":"Create Template"})]})]})}var b=a(6361),j=a(9839);function v(){let e=(0,r.useRouter)(),{accessToken:t}=(0,b.tN)(),{templates:a,setTemplates:x,addTemplate:p,updateTemplate:u,removeTemplate:g}=(0,b.iC)(),[h,y]=(0,l.useState)(!0),[v,N]=(0,l.useState)(!1),[k,w]=(0,l.useState)(null),[_,C]=(0,l.useState)(!1),[z,I]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=async()=>{if(t){y(!0);try{let e=await j.iJ.getCatalogTemplates(t),a=e?.map(e=>({id:String(e.id),name:e.name,description:"",fields:e.extra_metadata.map((e,t)=>({id:`field-${t}`,label:e,type:"text",required:!1})),created_at:e.created_at,updated_at:e.updated_at}));x(a)}catch(e){console.error("Failed to fetch templates:",e)}finally{y(!1)}}};e()},[t,x]);let S=()=>{w(null),N(!0)},T=e=>{w(e),N(!0)},q=async e=>{if(t){if(z!==e){I(e),setTimeout(()=>I(null),3e3);return}try{await j.iJ.deleteCatalogTemplate(Number(e),t),g(e),I(null)}catch(e){console.error("Failed to delete template:",e),e instanceof j.MS&&alert(`Failed to delete template: ${e.message}`)}}},Z=async e=>{if(t){C(!0);try{if(k){let a={name:e.name,extra_metadata:e.fields.map(e=>e.label)},s=await j.iJ.updateCatalogTemplate(Number(k?.id),a,t),l={id:String(s?.id),name:s?.name,description:e.description||"",fields:s?.extra_metadata.map((e,t)=>({id:`field-${t}`,label:e,type:"text",required:!1})),created_at:s?.created_at,updated_at:s?.updated_at};u(k?.id,l)}else{let a={name:e.name,extra_metadata:e.fields.map(e=>e.label)},s=await j.iJ.createCatalogTemplate(a,t),l={id:String(s?.id),name:s?.name,description:e.description||"",fields:s?.extra_metadata.map((e,t)=>({id:`field-${t}`,label:e,type:"text",required:!1})),created_at:s?.created_at,updated_at:s?.updated_at};p(l)}N(!1),w(null)}catch(e){console.error("Failed to save template:",e),e instanceof j.MS&&alert(`Failed to save template: ${e.message}`)}finally{C(!1)}}};return t?v?(0,s.jsxs)("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:k?"Edit Template":"Create Template"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:k?`Update "${k?.name}" template`:"Create a new catalog template with custom fields"})]})}),s.jsx(f,{initialData:k||void 0,onSubmit:Z,onCancel:()=>{N(!1),w(null)},isLoading:_})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Catalog Templates"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage reusable field templates for your catalog items"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx(o.z,{variant:"outline",onClick:()=>e.push("/catalog"),children:"Back to Catalog"}),(0,s.jsxs)(o.z,{onClick:S,children:[s.jsx(i.Z,{className:"w-4 h-4 mr-2"}),"Create Template"]})]})]}),h?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[void 0,void 0,void 0].map((e,t)=>(0,s.jsxs)(m.Zb,{className:"animate-pulse",children:[s.jsx(m.Ol,{children:s.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded"})}),s.jsx(m.aY,{children:(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded"}),s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"})]})})]},t))}):a?.length===0?s.jsx(m.Zb,{children:s.jsx(m.aY,{className:"p-12 text-center",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(d.Z,{className:"w-8 h-8 text-gray-400"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No templates yet"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Create your first template to add custom fields to your catalog items. Templates help you maintain consistency across similar products or services."}),(0,s.jsxs)(o.z,{onClick:S,children:[s.jsx(i.Z,{className:"w-4 h-4 mr-2"}),"Create Your First Template"]})]})})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a?.map(e=>s.jsxs(m.Zb,{className:"hover:shadow-lg transition-shadow duration-200",children:[s.jsx(m.Ol,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(m.ll,{className:"text-lg",children:e?.name}),e?.description&&s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e?.description})]}),s.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[s.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>T(e),children:s.jsx(n.Z,{className:"w-3 h-3"})}),s.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>q(e?.id),className:z===e?.id?"bg-red-50 text-red-600":"",children:s.jsx(c.Z,{className:"w-3 h-3"})})]})]})}),s.jsx(m.aY,{className:"pt-0",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Fields:"}),s.jsx("span",{className:"font-medium",children:e?.fields.length})]}),e?.fields.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Field Types:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:[...new Set(e?.fields.map(e=>e.type))].map(e=>s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:e},e))})]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Created: ",new Date(e?.created_at).toLocaleDateString()]})]})})]},e?.id))}),z&&(0,s.jsxs)("div",{className:"fixed bottom-4 right-4 bg-red-600 text-white p-4 rounded-lg shadow-lg",children:[s.jsx("p",{className:"text-sm mb-2",children:"Click delete again to confirm"}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[s.jsx(o.z,{size:"sm",variant:"outline",onClick:()=>I(null),className:"bg-white text-red-600 border-white hover:bg-gray-100",children:"Cancel"}),s.jsx(o.z,{size:"sm",onClick:()=>q(z),className:"bg-red-700 hover:bg-red-800",children:"Confirm Delete"})]})]})]}):s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("p",{className:"text-gray-500",children:"Please log in to manage templates?."})})}new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString()},6820:(e,t,a)=>{"use strict";a.d(t,{I:()=>i});var s=a(3854),l=a(4218),r=a(6370);let i=(0,l.forwardRef)(({className:e,type:t,label:a,error:l,...i},d)=>(0,s.jsxs)("div",{className:"space-y-2",children:[a&&s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:a}),s.jsx("input",{type:t,className:(0,r.cn)("flex h-10 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100 dark:ring-offset-gray-900 dark:placeholder:text-gray-400 dark:focus-visible:ring-blue-400",l&&"border-red-500 focus-visible:ring-red-500",e),ref:d,...i}),l&&s.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:l})]}));i.displayName="Input"},9737:(e,t,a)=>{"use strict";a.d(t,{g:()=>i});var s=a(3854),l=a(4218),r=a(6370);let i=(0,l.forwardRef)(({className:e,label:t,error:a,...l},i)=>(0,s.jsxs)("div",{className:"space-y-2",children:[t&&s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t}),s.jsx("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 ring-offset-white placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100 dark:ring-offset-gray-900 dark:placeholder:text-gray-400 dark:focus-visible:ring-blue-400",a&&"border-red-500 focus-visible:ring-red-500",e),ref:i,...l}),a&&s.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:a})]}));i.displayName="Textarea"},2095:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var s=a(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,s.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},4024:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var s=a(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,s.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9783:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var s=a(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,s.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},8955:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>i,__esModule:()=>r,default:()=>n});var s=a(5153);let l=(0,s.createProxy)(String.raw`D:\111\mybizai\mybizai\mybizai.app\app\catalog\templates\page.tsx`),{__esModule:r,$$typeof:i}=l,d=l.default,n=d}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[519,108,839,595],()=>a(1643));module.exports=s})();
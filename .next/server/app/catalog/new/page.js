(()=>{var e={};e.id=959,e.ids=[959],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},7175:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>d,routeModule:()=>u,tree:()=>c});var r=a(7096),i=a(6132),s=a(7284),n=a.n(s),l=a(2564),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let c=["",{children:["catalog",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,1863)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\catalog\\new\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,6197)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\catalog\\new\\page.tsx"],p="/catalog/new/page",m={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/catalog/new/page",pathname:"/catalog/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2645:(e,t,a)=>{Promise.resolve().then(a.bind(a,4619))},4619:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(3854),i=a(4218),s=a(1018),n=a(1448),l=a(6361),o=a(9839);function c(){let e=(0,s.useRouter)(),{accessToken:t}=(0,l.tN)(),{addItem:a}=(0,l.iC)(),[c,d]=(0,i.useState)([]),[p,m]=(0,i.useState)(!1),[u,g]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=async()=>{if(t){m(!0);try{let e=await o.iJ.getCatalogTemplates(t),a=e.map(e=>({id:String(e.id),name:e.name,description:"",fields:e.extra_metadata.map((e,t)=>({id:`field-${t}`,label:e,type:"text",required:!1})),created_at:e.created_at,updated_at:e.updated_at}));d(a)}catch(e){console.error("Failed to fetch templates:",e),d([])}finally{m(!1)}}};e()},[t]);let y=async(r,i)=>{if(t){g(!0);try{let s=[];if(i.length>0){let e=i.map(e=>o.iJ.uploadCatalogImage(e,t)),a=await Promise.all(e);s=a.map(e=>e.url)}let n={name:r.name,description:r.description||null,category:r.category||null,price:r.price,currency:r.currency,availability:r.availability,type:r.type,images:s,extra_data:r.template_fields||{},template_id:null},l=await o.iJ.createCatalogItem(n,t),c={id:String(l.id),name:l.name,description:l.description||"",category:l.category||"",price:l.price,currency:l.currency,availability:l.availability,type:l.type,images:l.images,template_fields:l.extra_data,created_at:l.created_at,updated_at:l.updated_at};a(c),e.push("/catalog")}catch(e){console.error("Failed to create item:",e),e instanceof o.MS?alert(`Failed to create item: ${e.message}`):alert("Failed to create item. Please try again.")}finally{g(!1)}}};return t?p?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Add New Item"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Create a new product or service for your catalog"})]}),r.jsx(n.Z,{templates:c,onSubmit:y,onCancel:()=>{e.push("/catalog")},isLoading:u})]}):r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("p",{className:"text-gray-500",children:"Please log in to create catalog items."})})}new Date().toISOString(),new Date().toISOString()},1863:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>n,__esModule:()=>s,default:()=>o});var r=a(5153);let i=(0,r.createProxy)(String.raw`D:\111\mybizai\mybizai\mybizai.app\app\catalog\new\page.tsx`),{__esModule:s,$$typeof:n}=i,l=i.default,o=l}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[519,108,839,595,448],()=>a(7175));module.exports=r})();
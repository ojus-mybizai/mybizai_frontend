(()=>{var e={};e.id=608,e.ids=[608],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},498:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>c});var r=t(7096),s=t(6132),l=t(7284),i=t.n(l),d=t(2564),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);t.d(a,n);let c=["",{children:["catalog",{children:["bulk-upload",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3621)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\catalog\\bulk-upload\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,6197)),"D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],o=["D:\\111\\mybizai\\mybizai\\mybizai.app\\app\\catalog\\bulk-upload\\page.tsx"],x="/catalog/bulk-upload/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/catalog/bulk-upload/page",pathname:"/catalog/bulk-upload",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7491:(e,a,t)=>{Promise.resolve().then(t.bind(t,1908))},1908:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>b});var r=t(3854),s=t(4218),l=t(1018),i=t(9170),d=t(9496),n=t(2258),c=t(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,c.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var x=t(4842),m=t(6104),u=t(4391),p=t(5088);function y({onUpload:e,onCancel:a,isLoading:t=!1}){let[l,c]=(0,s.useState)(1),[y,g]=(0,s.useState)(null),[h,b]=(0,s.useState)(null),[j,f]=(0,s.useState)({}),[v,k]=(0,s.useState)(null),[N,w]=(0,s.useState)(""),P=(0,s.useRef)(null),C=[{key:"name",label:"Item Name",required:!0},{key:"description",label:"Description",required:!0},{key:"category",label:"Category",required:!0},{key:"price",label:"Price",required:!0},{key:"currency",label:"Currency",required:!1},{key:"availability",label:"Availability",required:!1},{key:"type",label:"Type",required:!1}],_=[{number:1,title:"Upload File",description:"Select your CSV/Excel file"},{number:2,title:"Map Fields",description:"Match CSV columns to catalog fields"},{number:3,title:"Preview",description:"Review data before import"},{number:4,title:"Results",description:"Import complete"}],q=e=>{let a=e.split("\n").filter(e=>e.trim());if(0===a.length)throw Error("File is empty");let t=a[0].split(",").map(e=>e.trim().replace(/"/g,"")),r=a.slice(1,6).map(e=>e.split(",").map(e=>e.trim().replace(/"/g,"")));return{headers:t,rows:r}},S=async e=>{let a=e.target.files?.[0];if(a){w(""),g(a);try{let e=await a.text(),t=q(e);b(t);let r={};t.headers.forEach(e=>{let a=e.toLowerCase(),t=C.find(e=>a.includes(e.key)||a===e.label.toLowerCase());t&&(r[t.key]=e)}),f(r),c(2)}catch(e){w("Failed to parse file. Please ensure it's a valid CSV file.")}}},z=(e,a)=>{f(t=>({...t,[e]:a}))},U=()=>{let e=C.filter(e=>e.required);return e.every(e=>j[e.key])},E=async()=>{if(y)try{let a=await e(y,j);k(a),c(4)}catch(e){w("Upload failed. Please try again.")}};return(0,r.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:_.map((e,a)=>(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 ${l>=e.number?"bg-blue-600 border-blue-600 text-white":"border-gray-300 text-gray-500"}`,children:e.number}),(0,r.jsxs)("div",{className:"ml-3",children:[r.jsx("p",{className:`text-sm font-medium ${l>=e.number?"text-blue-600":"text-gray-500"}`,children:e.title}),r.jsx("p",{className:"text-xs text-gray-500",children:e.description})]}),a<_.length-1&&r.jsx("div",{className:`w-16 h-0.5 mx-4 ${l>e.number?"bg-blue-600":"bg-gray-300"}`})]},e.number))}),N&&r.jsx(u.Zb,{className:"border-red-200 bg-red-50 dark:bg-red-900/20",children:r.jsx(u.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-red-600 dark:text-red-400",children:[r.jsx(i.Z,{className:"w-5 h-5"}),r.jsx("span",{children:N})]})})}),(0,r.jsxs)(u.Zb,{children:[r.jsx(u.Ol,{children:r.jsx(u.ll,{children:_[l-1].title})}),(0,r.jsxs)(u.aY,{children:[1===l&&(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("div",{className:"text-center",children:(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8",children:[r.jsx(d.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Upload your catalog file"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Select a CSV file containing your catalog items"}),r.jsx("input",{ref:P,type:"file",accept:".csv,.xlsx,.xls",onChange:S,className:"hidden"}),(0,r.jsxs)(m.z,{onClick:()=>P.current?.click(),children:[r.jsx(n.Z,{className:"w-4 h-4 mr-2"}),"Choose File"]})]})}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Don't have a file ready? Download our template to get started."}),(0,r.jsxs)(m.z,{variant:"outline",onClick:()=>{let e=C.map(e=>e.label).join(","),a=`${e}
Sample Product,A great product description,Electronics,99.99,USD,available,product`,t=new Blob([a],{type:"text/csv"}),r=URL.createObjectURL(t),s=document.createElement("a");s.href=r,s.download="catalog_template.csv",s.click(),URL.revokeObjectURL(r)},children:[r.jsx(o,{className:"w-4 h-4 mr-2"}),"Download Template"]})]})]}),2===l&&h&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-4",children:"Map CSV columns to catalog fields"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:C.map(e=>(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e.label," ",e.required&&r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(p.P,{options:[{value:"",label:"Select column..."},...h.headers.map(e=>({value:e,label:e}))],value:j[e.key]||"",onChange:a=>z(e.key,a.target.value)})]},e.key))})]}),(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"File Preview"}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full border border-gray-200 dark:border-gray-700",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:r.jsx("tr",{children:h.headers.map((e,a)=>r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider border-r border-gray-200 dark:border-gray-700",children:e},a))})}),r.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:h.rows.map((e,a)=>r.jsx("tr",{children:e.map((e,a)=>r.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-100 border-r border-gray-200 dark:border-gray-700",children:e},a))},a))})]})}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Showing first 5 rows of ",y?.name]})]})]}),3===l&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-4",children:"Review Import Settings"}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"File:"}),r.jsx("span",{className:"text-sm font-medium",children:y?.name})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Estimated rows:"}),(0,r.jsxs)("span",{className:"text-sm font-medium",children:[h?.rows.length||0,"+ items"]})]})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Field Mapping"}),r.jsx("div",{className:"space-y-2",children:Object.entries(j).map(([e,a])=>{let t=C.find(a=>a.key===e);return(0,r.jsxs)("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 dark:bg-gray-800 rounded",children:[r.jsx("span",{className:"text-sm font-medium",children:t?.label}),(0,r.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["← ",a]})]},e)})})]})]}),4===l&&v&&(0,r.jsxs)("div",{className:"space-y-6 text-center",children:[r.jsx("div",{className:"flex items-center justify-center",children:0===v.error_count?r.jsx(x.Z,{className:"w-16 h-16 text-green-500"}):r.jsx(i.Z,{className:"w-16 h-16 text-yellow-500"})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Import Complete"}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("p",{className:"text-green-600 dark:text-green-400",children:["✓ ",v.success_count," items imported successfully"]}),v.error_count>0&&(0,r.jsxs)("p",{className:"text-red-600 dark:text-red-400",children:["✗ ",v.error_count," items failed to import"]})]})]}),v.errors.length>0&&(0,r.jsxs)("div",{className:"text-left",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Import Errors:"}),r.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 max-h-40 overflow-y-auto",children:v.errors.map((e,a)=>(0,r.jsxs)("div",{className:"text-sm text-red-600 dark:text-red-400",children:["Row ",e.row,": ",e.message]},a))})]})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx(m.z,{variant:"outline",onClick:1===l?a:4===l?()=>{c(1),g(null),b(null),f({}),k(null),w(""),P.current&&(P.current.value="")}:()=>c(e=>e-1),children:1===l?"Cancel":4===l?"Upload Another File":"Previous"}),l<4&&r.jsx(m.z,{onClick:2===l?()=>{if(!U()){w("Please map all required fields");return}w(""),c(3)}:3===l?E:()=>{},disabled:1===l&&!y||2===l&&!U()||t,isLoading:t&&3===l,children:2===l?"Preview":3===l?"Import":"Next"}),4===l&&r.jsx(m.z,{onClick:a,children:"Done"})]})]})}var g=t(6361),h=t(9839);function b(){let e=(0,l.useRouter)(),{accessToken:a}=(0,g.tN)(),{setItems:t}=(0,g.iC)(),[i,d]=(0,s.useState)(!1),n=async(e,r)=>{if(!a)throw Error("Authentication required");d(!0);try{let s=await h.iJ.bulkUploadCatalog(e,r,a);if(s.success_count>0){let e=await h.iJ.getCatalogItems(a);t(e.items)}return s}catch(e){if(console.error("Bulk upload failed:",e),e instanceof h.MS)throw Error(`Upload failed: ${e.message}`);throw Error("Upload failed. Please try again.")}finally{d(!1)}};return a?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Bulk Upload"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Import multiple catalog items from a CSV file"})]}),r.jsx(y,{onUpload:n,onCancel:()=>{e.push("/catalog")},isLoading:i})]}):r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("p",{className:"text-gray-500",children:"Please log in to upload catalog items."})})}},2258:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});var r=t(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r.Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},9496:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});var r=t(3708);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},3621:(e,a,t)=>{"use strict";t.r(a),t.d(a,{$$typeof:()=>i,__esModule:()=>l,default:()=>n});var r=t(5153);let s=(0,r.createProxy)(String.raw`D:\111\mybizai\mybizai\mybizai.app\app\catalog\bulk-upload\page.tsx`),{__esModule:l,$$typeof:i}=s,d=s.default,n=d}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[519,108,839,595],()=>t(498));module.exports=r})();
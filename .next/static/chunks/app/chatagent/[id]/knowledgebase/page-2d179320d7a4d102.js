(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[897],{272:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]])},8203:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},6637:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},9883:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4280:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},3673:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]])},1374:function(e,s,a){Promise.resolve().then(a.bind(a,3791))},3791:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return m}});var t=a(7437),r=a(2265),n=a(4033),l=a(4280),i=a(9883),d=a(6637),c=a(3673),o=a(8203),x=a(272),g=a(2247),u=a(3062),h=a(7071);function m(){let e=(0,n.useRouter)(),s=(0,n.useParams)();(0,n.useSearchParams)();let{accessToken:a}=(0,u.tN)(),{currentChatAgent:m,setChatAgentKnowledgeBases:y}=(0,u.V6)(),b=parseInt(s.id),[f,p]=(0,r.useState)([]),[k,v]=(0,r.useState)([]),[w,j]=(0,r.useState)(!0),[N,C]=(0,r.useState)(!1),[D,Z]=(0,r.useState)(!1);(0,r.useEffect)(()=>{a&&b&&A()},[b,a]);let A=async()=>{if(a)try{j(!0);let e=await h._h.getKnowledgeBases(a),s=await h.TJ.getChatAgentKnowledgeBases(b,a);p(e);let t=s.knowledge_bases.map(e=>e.id);v(t),console.log("\uD83E\uDDE0 KNOWLEDGE BASES LOADED:"),console.log("\uD83D\uDCCB Available knowledge bases:",e.length),console.log("\uD83D\uDD17 Agent linked knowledge bases:",t.length),console.log("✅ Selected knowledge base IDs:",t)}catch(e){console.error("Failed to fetch knowledge bases data:",e),alert("Failed to load knowledge bases data. Please try again.")}finally{j(!1)}},B=e=>{v(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},_=async()=>{if(a&&m)try{Z(!0);let e=await h.TJ.updateChatAgentKnowledgeBases(b,{knowledge_base_ids:k},a);if(e.success){let s=await h.TJ.getChatAgentKnowledgeBases(b,a),t=s.knowledge_bases.map(e=>e.id);v(t),console.log("✅ KNOWLEDGE BASES UPDATED:"),console.log("\uD83D\uDD17 New linked knowledge bases:",t),console.log("\uD83D\uDCCA Response:",e),alert("Successfully updated knowledge bases for agent. ".concat(e.linked_knowledge_bases.length," knowledge bases linked."))}}catch(e){console.error("Failed to save knowledge base configuration:",e),alert("Failed to save configuration. Please try again.")}finally{Z(!1)}};return w?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):m?(0,t.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6 ",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center space-x-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Knowledge Base Configuration"}),(0,t.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Configure knowledge bases for ",m.name]})]})}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)(g.z,{onClick:()=>{C(!0),A().finally(()=>C(!1))},disabled:N,variant:"outline",className:"flex items-center space-x-2",children:[(0,t.jsx)(l.Z,{className:"w-4 h-4 ".concat(N?"animate-spin":"")}),(0,t.jsx)("span",{children:N?"Refreshing...":"Refresh"})]}),(0,t.jsxs)(g.z,{onClick:()=>window.open("/knowledgebase/new","_blank"),className:"flex items-center space-x-2",children:[(0,t.jsx)(i.Z,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"New Knowledge Base"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-gray-200 dark:border-slate-800 p-6",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Available Knowledge Bases"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Select knowledge bases to link to this agent"})]}),f.length>0?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[f.length," knowledge base",1!==f.length?"s":""," available"]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[k.length," selected"]})]}),(0,t.jsx)("div",{className:"grid gap-4 max-h-96 overflow-y-auto",children:f.map(e=>(0,t.jsx)("div",{className:"relative p-4 border rounded-lg cursor-pointer transition-all ".concat(k.includes(e.id)?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"),onClick:()=>B(e.id),children:(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-4 h-4 rounded border-2 mt-1 ".concat(k.includes(e.id)?"border-blue-500 bg-blue-500":"border-gray-300 dark:border-gray-600"),children:k.includes(e.id)&&(0,t.jsx)("div",{className:"w-full h-full bg-white rounded-sm flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"})})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,t.jsx)(d.Z,{className:"w-4 h-4 text-gray-400"}),(0,t.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white truncate",children:e.title})]}),e.content&&(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 line-clamp-2",children:e.content}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-500",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(c.Z,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:e.category||"Uncategorized"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(o.Z,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:new Date(e.created_at).toLocaleDateString()})]})]})]})]})},e.id))})]}):(0,t.jsxs)("div",{className:"text-center py-16",children:[(0,t.jsx)(x.Z,{className:"w-20 h-20 text-gray-300 mx-auto mb-6"}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:"No Knowledge Bases Found"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-8 max-w-md mx-auto",children:"Create your first knowledge base to help your chat agent provide better, more accurate responses to customer questions."}),(0,t.jsxs)(g.z,{onClick:()=>window.open("/knowledgebase/new","_blank"),size:"lg",className:"flex items-center space-x-2 mx-auto",children:[(0,t.jsx)(i.Z,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"Create Your First Knowledge Base"})]})]})]})}),(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-gray-200 dark:border-slate-800 p-6 sticky top-8",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Current Configuration"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"Selected Knowledge Bases:"}),k.length>0?(0,t.jsx)("div",{className:"space-y-2",children:k.map(e=>{let s=f.find(s=>s.id===e);return(0,t.jsx)("div",{className:"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 px-3 py-2 rounded-lg text-sm",children:(null==s?void 0:s.title)||"KB-".concat(e)},e)})}):(0,t.jsx)("p",{className:"text-sm text-gray-500 italic",children:"No knowledge bases selected"})]}),(0,t.jsx)("div",{className:"pt-4 border-t border-gray-200 dark:border-slate-700",children:(0,t.jsx)(g.z,{onClick:_,disabled:D,className:"w-full",children:D?"Saving...":"Save Configuration"})})]})]})})]})]}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Chat agent not found"}),(0,t.jsx)(g.z,{onClick:()=>e.push("/chatagent"),children:"Back to Chat Agents"})]})}},2247:function(e,s,a){"use strict";a.d(s,{z:function(){return l}});var t=a(7437),r=a(2265),n=a(1628);let l=(0,r.forwardRef)((e,s)=>{let{className:a,variant:r="primary",size:l="md",isLoading:i,children:d,disabled:c,...o}=e;return(0,t.jsxs)("button",{className:(0,n.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{primary:"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 focus-visible:ring-blue-500",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-100 dark:hover:bg-gray-700 focus-visible:ring-gray-500",outline:"border border-gray-300 bg-transparent text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-800 focus-visible:ring-gray-500",default:"border border-gray-300 bg-transparent text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-800 focus-visible:ring-gray-500"}[r],{sm:"h-9 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-11 px-8 text-lg"}[l],a),ref:s,disabled:c||i,...o,children:[i&&(0,t.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d]})});l.displayName="Button"},7071:function(e,s,a){"use strict";a.d(s,{C7:function(){return l},Jh:function(){return i},TJ:function(){return r},_h:function(){return n},s6:function(){return d}});var t=a(9843);let r=t.TJ,n=t._h,l=t.C7,i=t.Jh,d=()=>!1;console.log("\uD83D\uDE80 MyBizAI running in PRODUCTION mode - using real APIs")},1628:function(e,s,a){"use strict";a.d(s,{cn:function(){return n}});var t=a(7042),r=a(4769);function n(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,r.m6)((0,t.W)(s))}},4033:function(e,s,a){e.exports=a(94)}},function(e){e.O(0,[9061,5166,9843,3062,2971,2472,1744],function(){return e(e.s=1374)}),_N_E=e.O()}]);
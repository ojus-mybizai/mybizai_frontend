(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6164],{3067:function(e,a,r){"use strict";r.d(a,{Z:function(){return l}});var t=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3523:function(e,a,r){"use strict";r.d(a,{Z:function(){return l}});var t=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},9883:function(e,a,r){"use strict";r.d(a,{Z:function(){return l}});var t=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},2295:function(e,a,r){"use strict";r.d(a,{Z:function(){return l}});var t=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},5367:function(e,a,r){"use strict";r.d(a,{Z:function(){return l}});var t=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},9032:function(e,a,r){Promise.resolve().then(r.bind(r,8661))},8661:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return w}});var t=r(7437),l=r(2265),s=r(4033),n=r(3067),i=r(2295),d=r(2247),o=r(4977),c=r(2606),u=r(8674),x=r(1844),m=r(3062),h=r(9843),g=r(9883),p=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let f=(0,p.Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);var y=r(5367);let b=[{value:"text",label:"Text"},{value:"number",label:"Number"},{value:"boolean",label:"Boolean"},{value:"date",label:"Date"}];function v(e){let{data:a,onChange:r,className:s="",placeholder:n={key:"Enter key",value:"Enter value"}}=e,[i,c]=(0,l.useState)(()=>Object.entries(a).map(e=>{let[a,r]=e;return{id:crypto.randomUUID(),key:a,value:r,type:"boolean"==typeof r?"boolean":"number"==typeof r?"number":"string"==typeof r&&!isNaN(Date.parse(r))&&r.includes("-")?"date":"text"}})),[x,m]=(0,l.useState)(null),h=e=>{let a={};e.forEach(e=>{e.key.trim()&&(a[e.key]=function(e,a){switch(a){case"number":return""===e?null:Number(e);case"boolean":return"true"===e;default:return e}}(String(e.value),e.type))}),r(a)},p=()=>{let e={id:crypto.randomUUID(),key:"",value:"",type:"text"},a=[...i,e];c(a),m(e.id)},v=e=>{let a=i.filter(a=>a.id!==e);c(a),h(a)},j=(e,a)=>{let r=i.map(r=>r.id===e?{...r,...a}:r);c(r),h(r)},N=(e,a)=>{j(e,{key:a})},k=(e,a)=>{j(e,{value:a})},w=(e,a)=>{let r=i.find(a=>a.id===e);if(r){let t=r.value;t="boolean"!==a&&("number"===a?0:"date"===a?new Date().toISOString().split("T")[0]:String(r.value||"")),j(e,{type:a,value:t})}};return(0,t.jsx)("div",{className:"space-y-3 ".concat(s),children:0===i.length?(0,t.jsxs)("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg",children:[(0,t.jsx)("div",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"No custom fields added yet"}),(0,t.jsxs)(d.z,{onClick:p,variant:"outline",size:"sm",children:[(0,t.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"Add Field"]})]}):(0,t.jsxs)(t.Fragment,{children:[i.map(e=>{var a;return(0,t.jsxs)("div",{className:"flex items-center space-x-2 p-3 border border-gray-200 dark:border-gray-700 rounded-lg",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(o.I,{value:e.key,onChange:a=>N(e.id,a.target.value),placeholder:n.key,className:"text-sm"})}),(0,t.jsx)("div",{className:"w-24",children:(0,t.jsx)(u.P,{options:b,value:e.type,onChange:a=>w(e.id,a.target.value),className:"text-sm"})}),(0,t.jsx)("div",{className:"flex-1",children:"boolean"===e.type?(0,t.jsx)(u.P,{options:[{value:"true",label:"True"},{value:"false",label:"False"}],value:String(e.value),onChange:a=>k(e.id,a.target.value),className:"text-sm"}):(0,t.jsx)(o.I,{type:"date"===e.type?"date":"number"===e.type?"number":"text",value:(a=e.value,e.type,null==a?"":String(a)),onChange:a=>k(e.id,a.target.value),placeholder:n.value,className:"text-sm"})}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(d.z,{variant:"outline",size:"sm",onClick:()=>m(x===e.id?null:e.id),className:"p-2",children:(0,t.jsx)(f,{className:"w-3 h-3"})}),(0,t.jsx)(d.z,{variant:"outline",size:"sm",onClick:()=>v(e.id),className:"p-2 text-red-600 hover:text-red-700",children:(0,t.jsx)(y.Z,{className:"w-3 h-3"})})]})]},e.id)}),(0,t.jsxs)(d.z,{onClick:p,variant:"outline",size:"sm",className:"w-full",children:[(0,t.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"Add Field"]})]})})}let j=[{value:"new",label:"New"},{value:"contacted",label:"Contacted"},{value:"qualified",label:"Qualified"},{value:"won",label:"Won"},{value:"lost",label:"Lost"}],N=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}],k=[{value:"portal",label:"Portal"},{value:"website",label:"Website"},{value:"whatsapp",label:"WhatsApp"},{value:"referral",label:"Referral"},{value:"walk-in",label:"Walk-in"},{value:"ad_campaign",label:"Ad Campaign"}];function w(){var e;let a=(0,s.useRouter)(),{accessToken:r}=(0,m.tN)(),{addLead:g}=(0,m.Rx)(),[p,f]=(0,l.useState)({name:"",phone:"",email:"",source:"website",status:"new",priority:"medium",notes:"",extra_data:{}}),[y,b]=(0,l.useState)({}),[w,C]=(0,l.useState)(!1),Z=()=>{let e={};return p.name.trim()||(e.name="Name is required"),p.phone.trim()?(p.phone.length<10||p.phone.length>20)&&(e.phone="Phone number must be between 10-20 characters"):e.phone="Phone number is required",p.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p.email)&&(e.email="Please enter a valid email address"),p.notes&&p.notes.length>2e3&&(e.notes="Notes must be 2000 characters or less"),b(e),0===Object.keys(e).length},S=(e,a)=>{f(r=>({...r,[e]:a})),y[e]&&b(a=>({...a,[e]:""}))},z=async e=>{if(e.preventDefault(),Z()&&r){C(!0);try{let e={...p,email:p.email||void 0,notes:p.notes||void 0,extra_data:p.extra_data||{}},t=await h.Zc.createLead(e,r);g(t),a.push("/leads")}catch(e){console.error("Failed to create lead:",e),e instanceof h.MS?alert("Failed to create lead: ".concat(e.message)):alert("Failed to create lead. Please try again.")}finally{C(!1)}}};return(0,t.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(d.z,{variant:"outline",onClick:()=>a.push("/leads"),className:"flex items-center space-x-2",children:[(0,t.jsx)(n.Z,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Back to Leads"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Add New Lead"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Create a new sales lead in your CRM"})]})]}),(0,t.jsxs)("form",{onSubmit:z,children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsxs)(x.Zb,{children:[(0,t.jsx)(x.Ol,{children:(0,t.jsx)(x.ll,{children:"Lead Information"})}),(0,t.jsx)(x.aY,{className:"space-y-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsx)("div",{className:"md:col-span-2",children:(0,t.jsx)(o.I,{label:"Full Name *",value:p.name,onChange:e=>S("name",e.target.value),error:y.name,placeholder:"Enter full name"})}),(0,t.jsx)(o.I,{label:"Phone *",value:p.phone,onChange:e=>S("phone",e.target.value),error:y.phone,placeholder:"+91 9999999999"}),(0,t.jsx)(o.I,{label:"Email",type:"email",value:p.email||"",onChange:e=>S("email",e.target.value),error:y.email,placeholder:"lead@example.com"}),(0,t.jsx)(u.P,{label:"Source *",options:k,value:p.source,onChange:e=>S("source",e.target.value),error:y.source})]})})]}),(0,t.jsxs)(x.Zb,{children:[(0,t.jsx)(x.Ol,{children:(0,t.jsx)(x.ll,{children:"Custom Fields"})}),(0,t.jsxs)(x.aY,{className:"space-y-4",children:[(0,t.jsx)(v,{data:p.extra_data||{},onChange:e=>S("extra_data",e),placeholder:{key:"Field name (e.g., budget, location, interest)",value:"Field value"}}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Add custom fields to capture specific information about this lead (budget, preferences, product interest, etc.)."})]})]}),(0,t.jsxs)(x.Zb,{children:[(0,t.jsx)(x.Ol,{children:(0,t.jsx)(x.ll,{children:"Additional Notes"})}),(0,t.jsxs)(x.aY,{children:[(0,t.jsx)(c.g,{label:"Notes",value:p.notes||"",onChange:e=>S("notes",e.target.value),error:y.notes,placeholder:"Additional information about this lead, requirements, preferences, etc.",className:"min-h-[120px]"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:[(null===(e=p.notes)||void 0===e?void 0:e.length)||0,"/2000 characters"]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(x.Zb,{children:[(0,t.jsx)(x.Ol,{children:(0,t.jsx)(x.ll,{children:"Lead Status"})}),(0,t.jsxs)(x.aY,{className:"space-y-4",children:[(0,t.jsx)(u.P,{label:"Status",options:j,value:p.status||"new",onChange:e=>S("status",e.target.value),error:y.status}),(0,t.jsx)(u.P,{label:"Priority",options:N,value:p.priority||"medium",onChange:e=>S("priority",e.target.value),error:y.priority})]})]}),(0,t.jsxs)(x.Zb,{children:[(0,t.jsx)(x.Ol,{children:(0,t.jsx)(x.ll,{children:"Quick Tips"})}),(0,t.jsxs)(x.aY,{className:"space-y-3 text-sm text-gray-600 dark:text-gray-400",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Required Fields"}),(0,t.jsx)("p",{children:"Full name, phone, and source are required to create a lead."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Custom Fields"}),(0,t.jsx)("p",{children:"Use custom fields to capture specific information like budget, preferences, or product interest."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Lead Status"}),(0,t.jsx)("p",{children:'Track progress from "New" → "Contacted" → "Qualified" → "Won/Lost".'})]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end space-x-4 mt-6",children:[(0,t.jsx)(d.z,{type:"button",variant:"outline",onClick:()=>a.push("/leads"),children:"Cancel"}),(0,t.jsxs)(d.z,{type:"submit",isLoading:w,disabled:w,className:"flex items-center space-x-2",children:[(0,t.jsx)(i.Z,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Create Lead"})]})]})]})]})}},2247:function(e,a,r){"use strict";r.d(a,{z:function(){return n}});var t=r(7437),l=r(2265),s=r(1628);let n=(0,l.forwardRef)((e,a)=>{let{className:r,variant:l="primary",size:n="md",isLoading:i,children:d,disabled:o,...c}=e;return(0,t.jsxs)("button",{className:(0,s.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{primary:"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 focus-visible:ring-blue-500",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-100 dark:hover:bg-gray-700 focus-visible:ring-gray-500",outline:"border border-gray-300 bg-transparent text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-800 focus-visible:ring-gray-500",default:"border border-gray-300 bg-transparent text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-800 focus-visible:ring-gray-500"}[l],{sm:"h-9 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-11 px-8 text-lg"}[n],r),ref:a,disabled:o||i,...c,children:[i&&(0,t.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d]})});n.displayName="Button"},1844:function(e,a,r){"use strict";r.d(a,{Ol:function(){return i},Zb:function(){return n},aY:function(){return c},ll:function(){return d}});var t=r(7437),l=r(2265),s=r(1628);let n=(0,l.forwardRef)((e,a)=>{let{className:r,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,s.cn)("rounded-xl border border-gray-200 bg-white shadow-lg dark:border-gray-800 dark:bg-gray-900",r),...l})});n.displayName="Card";let i=(0,l.forwardRef)((e,a)=>{let{className:r,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...l})});i.displayName="CardHeader";let d=(0,l.forwardRef)((e,a)=>{let{className:r,...l}=e;return(0,t.jsx)("h3",{ref:a,className:(0,s.cn)("font-semibold leading-none tracking-tight",r),...l})});d.displayName="CardTitle";let o=(0,l.forwardRef)((e,a)=>{let{className:r,...l}=e;return(0,t.jsx)("p",{ref:a,className:(0,s.cn)("text-sm text-muted-foreground",r),...l})});o.displayName="CardDescription";let c=(0,l.forwardRef)((e,a)=>{let{className:r,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,s.cn)("p-6 pt-0",r),...l})});c.displayName="CardContent"},4977:function(e,a,r){"use strict";r.d(a,{I:function(){return n}});var t=r(7437),l=r(2265),s=r(1628);let n=(0,l.forwardRef)((e,a)=>{let{className:r,type:l,label:n,error:i,...d}=e;return(0,t.jsxs)("div",{className:"space-y-2",children:[n&&(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:n}),(0,t.jsx)("input",{type:l,className:(0,s.cn)("flex h-10 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100 dark:ring-offset-gray-900 dark:placeholder:text-gray-400 dark:focus-visible:ring-blue-400",i&&"border-red-500 focus-visible:ring-red-500",r),ref:a,...d}),i&&(0,t.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:i})]})});n.displayName="Input"},8674:function(e,a,r){"use strict";r.d(a,{P:function(){return i}});var t=r(7437),l=r(2265),s=r(1628),n=r(3523);let i=(0,l.forwardRef)((e,a)=>{let{className:r,label:l,error:i,options:d,placeholder:o,...c}=e;return(0,t.jsxs)("div",{className:"space-y-2",children:[l&&(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:l}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("select",{className:(0,s.cn)("flex h-10 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100 dark:ring-offset-gray-900 dark:focus-visible:ring-blue-400 appearance-none pr-8",i&&"border-red-500 focus-visible:ring-red-500",r),ref:a,...c,children:[o&&(0,t.jsx)("option",{value:"",disabled:!0,children:o}),d.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,t.jsx)(n.Z,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400 pointer-events-none"})]}),i&&(0,t.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:i})]})});i.displayName="Select"},2606:function(e,a,r){"use strict";r.d(a,{g:function(){return n}});var t=r(7437),l=r(2265),s=r(1628);let n=(0,l.forwardRef)((e,a)=>{let{className:r,label:l,error:n,...i}=e;return(0,t.jsxs)("div",{className:"space-y-2",children:[l&&(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:l}),(0,t.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 ring-offset-white placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100 dark:ring-offset-gray-900 dark:placeholder:text-gray-400 dark:focus-visible:ring-blue-400",n&&"border-red-500 focus-visible:ring-red-500",r),ref:a,...i}),n&&(0,t.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:n})]})});n.displayName="Textarea"},1628:function(e,a,r){"use strict";r.d(a,{cn:function(){return s}});var t=r(7042),l=r(4769);function s(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return(0,l.m6)((0,t.W)(a))}},4033:function(e,a,r){e.exports=r(94)}},function(e){e.O(0,[9061,5166,9843,3062,2971,2472,1744],function(){return e(e.s=9032)}),_N_E=e.O()}]);
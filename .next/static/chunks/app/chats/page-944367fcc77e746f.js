(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6048],{2898:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var a=r(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let r=(0,a.forwardRef)(({color:r="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:d,className:o="",children:c,...x},u)=>(0,a.createElement)("svg",{ref:u,...s,width:n,height:n,stroke:r,strokeWidth:d?24*Number(i)/Number(n):i,className:["lucide",`lucide-${l(e)}`,o].join(" "),...x},[...t.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r}},690:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]])},2442:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},1291:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},7158:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},6539:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]])},1295:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},2176:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]])},2741:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},9883:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1827:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},6020:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},6489:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]])},1541:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},2549:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9003:function(e,t,r){Promise.resolve().then(r.bind(r,1502))},1502:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return E}});var a=r(7437),s=r(2265),l=r(2741),n=r(6539),i=r(2176),d=r(1295),o=r(2442),c=r(690),x=r(2549),u=r(9883),g=r(7158),m=r(1291),h=r(1827),y=r(6489),b=r(1541),f=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let Image=(0,f.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var p=r(6020),v=r(3062),k=r(9843);let j=e=>({id:e.id.toString(),name:e.title,channel:e.channel,type:"Warm",lastMessage:e.summary||"No messages yet",timestamp:e.last_message_at?new Date(e.last_message_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"No messages",unreadCount:0,isOnline:"active"===e.status}),N=e=>({id:e.id.toString(),author:"user"===e.sender?"lead":"ai",text:e.text,timestamp:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),status:"read"});function w(e){let{channel:t}=e,r="w-4 h-4";switch(t){case"WhatsApp":return(0,a.jsx)(l.Z,{className:r});case"Instagram":return(0,a.jsx)(n.Z,{className:r});case"Messenger":return(0,a.jsx)(i.Z,{className:r});case"Email":return(0,a.jsx)(d.Z,{className:r});default:return null}}function C(e){let{type:t}=e,r="Hot"===t?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":"Warm"===t?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300";return(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full ".concat(r),title:"".concat(t," lead - ").concat(function(e){switch(e){case"Hot":return"High interest, ready to buy";case"Warm":return"Interested, needs nurturing";case"Cold":return"Low interest, requires engagement";default:return""}}(t)),children:t})}function S(e){let{status:t}=e;if(!t)return null;switch(t){case"sent":return(0,a.jsx)(o.Z,{className:"w-3 h-3 text-gray-400"});case"delivered":return(0,a.jsx)(c.Z,{className:"w-3 h-3 text-gray-400"});case"read":return(0,a.jsx)(c.Z,{className:"w-3 h-3 text-blue-500"});default:return null}}function Z(e){let{isOnline:t,lastSeen:r}=e;return t?(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full",title:"Online"}):r?(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full",title:"Last seen ".concat(r)}):null}function M(e){let{label:t,isSelected:r,onToggle:s,onRemove:l}=e;return(0,a.jsxs)("button",{onClick:s,className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium transition-colors ".concat(r?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:[t,r&&l&&(0,a.jsx)(x.Z,{className:"w-3 h-3 ml-1 cursor-pointer",onClick:e=>{e.stopPropagation(),l()}})]})}function _(e){let{date:t}=e;return(0,a.jsx)("div",{className:"flex items-center justify-center my-4",children:(0,a.jsx)("div",{className:"bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-full",children:(0,a.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:t})})})}function L(){return(0,a.jsx)("div",{className:"flex justify-start mb-4",children:(0,a.jsx)("div",{className:"max-w-[75%]",children:(0,a.jsx)("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-2xl px-4 py-2",children:(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),(0,a.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:"AI is typing..."})]})})})})}function E(){let{accessToken:e}=(0,v.tN)(),[t,r]=(0,s.useState)([]),[l,n]=(0,s.useState)([]),[d,o]=(0,s.useState)("AI"),[c,f]=(0,s.useState)(""),[E,O]=(0,s.useState)(!1),[I,R]=(0,s.useState)(null),[T,W]=(0,s.useState)(null),[z,q]=(0,s.useState)([]),[D,P]=(0,s.useState)(null),[F,H]=(0,s.useState)([]),[$,U]=(0,s.useState)([]),[B,K]=(0,s.useState)({}),[X,Y]=(0,s.useState)({}),[G,J]=(0,s.useState)(!1),[Q,V]=(0,s.useState)(!1),[ee,et]=(0,s.useState)(!0),[er,ea]=(0,s.useState)(!1),[es,el]=(0,s.useState)(!1),en=(0,s.useRef)(null),ei=(0,s.useRef)(null);(0,s.useEffect)(()=>{e&&ed()},[e]),(0,s.useEffect)(()=>{D&&e&&eo(D.id)},[D,e]);let ed=async()=>{if(e){O(!0),R(null);try{let t=await k.zN.getConversations(e);q(t),t.length>0&&!T&&(W(t[0].id.toString()),P(t[0]))}catch(e){console.error("Failed to load conversations:",e),R("Failed to load conversations")}finally{O(!1)}}},eo=async t=>{if(e)try{let r=await k.zN.getConversationMessages(t,e);U(r);let a=r.map(N);H(a)}catch(e){console.error("Failed to load conversation messages:",e),H([])}},ec=e=>{r(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},ex=e=>{n(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},eu=(0,s.useMemo)(()=>z.map(j).filter(e=>{let r=0===t.length||t.includes(e.channel),a=0===l.length||l.includes(e.type),s=!c||e.name.toLowerCase().includes(c.toLowerCase())||e.lastMessage.toLowerCase().includes(c.toLowerCase());return r&&a&&s}),[z,t,l,c]),eg=(0,s.useMemo)(()=>eu.find(e=>e.id===T)||null,[eu,T]),em=T&&B[T]||d,eh=T&&X[T]||"";(0,s.useEffect)(()=>{if("AI"===em&&F.length>0){let e=F[F.length-1];if("lead"===e.author){V(!0);let e=setTimeout(()=>V(!1),2e3);return()=>clearTimeout(e)}}},[F,em]),(0,s.useEffect)(()=>{ei.current&&(ei.current.scrollTop=ei.current.scrollHeight)},[F,Q]);let ey=async()=>{if(T&&eh.trim()&&D)try{await k.zN.addMessage(D.id,{text:eh.trim(),sender:"agent",message_type:"text"},e||""),await eo(D.id),await ed(),Y(e=>({...e,[T]:""}))}catch(e){console.error("Failed to send message:",e)}},eb=e=>{T&&D&&H(t=>[...t,{id:Math.random().toString(36).slice(2),author:"lead",text:e,timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),status:"read"}])},ef=async t=>{if(e)try{let r=await k.zN.createConversation({title:t.name,channel:t.channel.toLowerCase(),initial_message:t.message||null},e||"");await ed(),W(r.id.toString()),P(r)}catch(e){throw console.error("Failed to create conversation:",e),e}};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 dark:from-blue-600 dark:to-purple-700 flex items-center justify-center shadow-lg",children:(0,a.jsx)(i.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Chats"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Live conversations"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("button",{onClick:()=>el(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-lg shadow-lg transition-all duration-200 hover:shadow-xl",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"New Chat"})]}),(0,a.jsx)("button",{onClick:()=>J(!G),className:"lg:hidden p-2 rounded-lg border border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:G?(0,a.jsx)(g.Z,{className:"w-5 h-5"}):(0,a.jsx)(m.Z,{className:"w-5 h-5"})})]})]}),E&&(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"text-gray-500",children:"Loading conversations..."})}),I&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-red-500 mb-4",children:I}),(0,a.jsx)("button",{onClick:ed,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Retry"})]}),!E&&!I&&(0,a.jsxs)("div",{className:"grid gap-4 h-[calc(100vh-11rem)] overflow-hidden ".concat(G?"grid-cols-1":"grid-cols-1 lg:grid-cols-3"),children:[!G&&(0,a.jsxs)("aside",{className:"lg:col-span-1 bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700/50 rounded-xl flex flex-col overflow-hidden backdrop-blur-sm",children:[(0,a.jsxs)("div",{className:"p-2 border-b border-gray-200 dark:border-gray-700 space-y-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{value:c,onChange:e=>f(e.target.value),placeholder:"Search conversations...",className:"w-full pl-9 pr-3 py-2 rounded-md bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 text-sm text-gray-900 dark:text-gray-100"}),(0,a.jsx)(h.Z,{className:"w-4 h-4 absolute left-3 top-2.5 text-gray-400"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 block",children:"Channels"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:["WhatsApp","Instagram","Messenger","Email"].map(e=>(0,a.jsx)(M,{label:e,isSelected:t.includes(e),onToggle:()=>ec(e),onRemove:()=>ec(e)},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 block",children:"Lead Types"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:["Hot","Warm","Cold"].map(e=>(0,a.jsx)(M,{label:e,isSelected:l.includes(e),onToggle:()=>ex(e),onRemove:()=>ex(e)},e))})]}),(t.length>0||l.length>0||c)&&(0,a.jsx)("button",{onClick:()=>{r([]),n([]),f("")},className:"text-xs text-blue-500 hover:text-blue-700 dark:hover:text-blue-300 underline w-full text-center",children:"Clear all filters"})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,a.jsxs)("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[eu.map(e=>(0,a.jsx)("li",{onClick:()=>{W(e.id);let t=z.find(t=>t.id.toString()===e.id);P(t||null)},className:"p-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors ".concat(T===e.id?"bg-blue-50 dark:bg-blue-900/20 border-r-2 border-blue-500":""),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsxs)("div",{className:"relative mt-0.5",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:(0,a.jsx)(w,{channel:e.channel})}),(0,a.jsx)("div",{className:"absolute -bottom-1 -right-1",children:(0,a.jsx)(Z,{isOnline:e.isOnline,lastSeen:e.lastSeen})})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900 dark:text-gray-100 truncate",children:e.name}),e.unreadCount>0&&(0,a.jsx)("span",{className:"bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:e.unreadCount})]}),(0,a.jsx)("span",{className:"text-xs text-gray-400 dark:text-gray-500 ml-2 shrink-0",children:e.timestamp})]}),(0,a.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,a.jsx)(C,{type:e.type}),(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:e.lastMessage})]})]})]})},e.id)),0===eu.length&&(0,a.jsx)("li",{className:"p-6 text-center text-sm text-gray-500 dark:text-gray-400",children:"No conversations match your filters."})]})})]}),(0,a.jsxs)("section",{className:"bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700/50 rounded-xl flex flex-col overflow-hidden backdrop-blur-sm ".concat(G?"col-span-1":"lg:col-span-2"),children:[(0,a.jsx)("div",{className:"sticky top-0 z-10 bg-white/95 dark:bg-gray-800/95 backdrop-blur border-b border-gray-200 dark:border-gray-700 p-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[G&&(0,a.jsx)("button",{onClick:()=>J(!1),className:"p-1 rounded-md text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:(0,a.jsx)(g.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:(null==eg?void 0:eg.name)||"Select a conversation"}),eg&&(0,a.jsx)(Z,{isOnline:eg.isOnline,lastSeen:eg.lastSeen})]}),eg&&(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-500 dark:text-gray-400",children:[(0,a.jsxs)("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-gray-100 dark:bg-gray-700",children:[(0,a.jsx)(w,{channel:eg.channel}),(0,a.jsx)("span",{children:eg.channel})]}),(0,a.jsx)(C,{type:eg.type}),!eg.isOnline&&eg.lastSeen&&(0,a.jsxs)("span",{children:["Last seen ",eg.lastSeen]})]})]})]}),eg&&(0,a.jsxs)("div",{className:"inline-flex rounded-md overflow-hidden border border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("button",{className:"px-3 py-1.5 text-xs transition-colors ".concat("AI"===em?"bg-gray-900 text-white dark:bg-gray-100 dark:text-gray-900":"bg-transparent text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),onClick:()=>K(e=>({...e,[eg.id]:"AI"})),children:"AI-handled"}),(0,a.jsx)("button",{className:"px-3 py-1.5 text-xs transition-colors ".concat("Manual"===em?"bg-gray-900 text-white dark:bg-gray-100 dark:text-gray-900":"bg-transparent text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),onClick:()=>K(e=>({...e,[eg.id]:"Manual"})),children:"Manual"})]})]})}),(0,a.jsxs)("div",{ref:ei,className:"flex-1 overflow-y-auto p-3 space-y-3",children:[!eg&&(0,a.jsx)("div",{className:"h-full flex items-center justify-center text-gray-500 dark:text-gray-400",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(i.Z,{className:"w-12 h-12 mx-auto mb-4 text-gray-300 dark:text-gray-600"}),(0,a.jsx)("p",{children:"Select a conversation from the sidebar to view messages"})]})}),eg&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(_,{date:"Today"}),F.map((e,t)=>{let r="ai"===e.author,s=r&&e.quickReplies&&t===F.length-1;return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex ".concat(r?"justify-end":"justify-start"," mb-2"),children:(0,a.jsxs)("div",{className:"max-w-[75%]",children:[r&&(0,a.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 text-right",children:"AI Reply"}),(0,a.jsx)("div",{className:"rounded-3xl px-4 py-3 text-sm shadow-sm ".concat(r?"bg-emerald-600 text-white dark:bg-emerald-500":"bg-gray-100 text-gray-900 dark:bg-gray-700 dark:text-gray-100"),children:e.text}),(0,a.jsxs)("div",{className:"mt-1 flex items-center gap-1 ".concat(r?"justify-end":"justify-start"),children:[(0,a.jsx)("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:e.timestamp}),r&&(0,a.jsx)(S,{status:e.status})]})]})}),s&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-4 justify-end",children:e.quickReplies.map((e,t)=>(0,a.jsx)("button",{onClick:()=>eb(e),className:"px-3 py-1.5 text-xs bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-full transition-colors",children:e},t))})]},e.id)}),Q&&(0,a.jsx)(L,{})]})]}),eg&&"Manual"===em&&(0,a.jsxs)("div",{className:"sticky bottom-0 z-10 bg-white/95 dark:bg-gray-800/95 backdrop-blur border-t border-gray-200 dark:border-gray-700 p-3",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,a.jsxs)("label",{className:"flex items-center gap-2 text-xs text-gray-600 dark:text-gray-400",children:[(0,a.jsx)("input",{type:"checkbox",checked:ee,onChange:e=>et(e.target.checked),className:"rounded"}),"Press Enter to send"]})}),(0,a.jsxs)("div",{className:"flex items-end gap-2",children:[(0,a.jsx)("button",{onClick:()=>ea(!er),className:"p-2 rounded-md border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",title:"Emoji",children:(0,a.jsx)(y.Z,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>{var e;return null===(e=en.current)||void 0===e?void 0:e.click()},className:"p-2 rounded-md border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",title:"Upload file",children:(0,a.jsx)(b.Z,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>{var e;return null===(e=en.current)||void 0===e?void 0:e.click()},className:"p-2 rounded-md border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",title:"Upload image",children:(0,a.jsx)(Image,{className:"w-5 h-5"})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("textarea",{rows:1,value:eh,onChange:e=>eg&&Y(t=>({...t,[eg.id]:e.target.value})),onKeyDown:e=>{ee&&"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),ey())},placeholder:"Type a message...",className:"w-full resize-none rounded-lg bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 text-sm px-4 py-3 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})}),(0,a.jsxs)("button",{onClick:ey,className:"inline-flex items-center gap-2 px-4 py-3 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-colors",disabled:!eh.trim(),children:[(0,a.jsx)(p.Z,{className:"w-4 h-4"}),"Send"]})]}),(0,a.jsx)("input",{ref:en,type:"file",className:"hidden",accept:"image/*,application/pdf,.doc,.docx,.txt",onChange:e=>{var t;console.log("File selected:",null===(t=e.target.files)||void 0===t?void 0:t[0])}})]})]})]}),es&&(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>el(!1)}),(0,a.jsxs)("div",{className:"relative w-[85%] max-w-4xl max-h-[90vh] bg-white dark:bg-slate-900 rounded-2xl shadow-2xl flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-slate-700 flex-shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:(0,a.jsx)(u.Z,{className:"w-4 h-4 text-white"})}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Start New Chat"})]}),(0,a.jsx)("button",{onClick:()=>el(!1),className:"p-2 rounded-lg text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",children:(0,a.jsx)(x.Z,{className:"w-5 h-5"})})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:(0,a.jsx)(A,{onClose:()=>el(!1),onSubmit:ef})})]})]})]})}function A(e){let{onClose:t,onSubmit:r}=e,[l,n]=(0,s.useState)({name:"",phone:"",email:"",channel:"WhatsApp",type:"Warm",message:""}),[i,d]=(0,s.useState)(!1),o=async e=>{if(e.preventDefault(),!i){d(!0);try{await r(l),t()}catch(e){console.error("Failed to create conversation:",e)}finally{d(!1)}}};return(0,a.jsxs)("form",{onSubmit:o,children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Contact Name *"}),(0,a.jsx)("input",{type:"text",required:!0,value:l.name,onChange:e=>n(t=>({...t,name:e.target.value})),className:"w-full px-4 py-3 rounded-lg border border-gray-200 dark:border-slate-600 bg-white dark:bg-slate-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter contact name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number *"}),(0,a.jsx)("input",{type:"tel",required:!0,value:l.phone,onChange:e=>n(t=>({...t,phone:e.target.value})),className:"w-full px-4 py-3 rounded-lg border border-gray-200 dark:border-slate-600 bg-white dark:bg-slate-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+91 98765 43210"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email (Optional)"}),(0,a.jsx)("input",{type:"email",value:l.email,onChange:e=>n(t=>({...t,email:e.target.value})),className:"w-full px-4 py-3 rounded-lg border border-gray-200 dark:border-slate-600 bg-white dark:bg-slate-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"email@example.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Channel *"}),(0,a.jsxs)("select",{value:l.channel,onChange:e=>n(t=>({...t,channel:e.target.value})),className:"w-full px-4 py-3 rounded-lg border border-gray-200 dark:border-slate-600 bg-white dark:bg-slate-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"WhatsApp",children:"WhatsApp"}),(0,a.jsx)("option",{value:"Instagram",children:"Instagram"}),(0,a.jsx)("option",{value:"Messenger",children:"Messenger"}),(0,a.jsx)("option",{value:"Email",children:"Email"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Lead Type"}),(0,a.jsxs)("select",{value:l.type,onChange:e=>n(t=>({...t,type:e.target.value})),className:"w-full px-4 py-3 rounded-lg border border-gray-200 dark:border-slate-600 bg-white dark:bg-slate-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"Hot",children:"Hot"}),(0,a.jsx)("option",{value:"Warm",children:"Warm"}),(0,a.jsx)("option",{value:"Cold",children:"Cold"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Initial Message (Optional)"}),(0,a.jsx)("textarea",{value:l.message,onChange:e=>n(t=>({...t,message:e.target.value})),rows:3,className:"w-full px-4 py-3 rounded-lg border border-gray-200 dark:border-slate-600 bg-white dark:bg-slate-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Start the conversation..."})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-3 mt-6 pt-6 border-t border-gray-200 dark:border-slate-700",children:[(0,a.jsx)("button",{type:"button",onClick:t,className:"px-6 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-slate-600 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-800 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:i||!l.name.trim()||!l.phone.trim(),className:"px-6 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg transition-colors",children:i?"Creating...":"Create Chat"})]})]})}},622:function(e,t,r){"use strict";var a=r(2265),s=Symbol.for("react.element"),l=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function o(e,t,r){var a,l={},o=null,c=null;for(a in void 0!==r&&(o=""+r),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(c=t.ref),t)n.call(t,a)&&!d.hasOwnProperty(a)&&(l[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===l[a]&&(l[a]=t[a]);return{$$typeof:s,type:e,key:o,ref:c,props:l,_owner:i.current}}t.Fragment=l,t.jsx=o,t.jsxs=o},7437:function(e,t,r){"use strict";e.exports=r(622)}},function(e){e.O(0,[5166,9843,3062,2971,2472,1744],function(){return e(e.s=9003)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{1981:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3966:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a.Z)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},272:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a.Z)("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]])},3008:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1738:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a.Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},2176:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a.Z)("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]])},4322:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a.Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},9409:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6654:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a.Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},7972:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2549:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},2369:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a.Z)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]])},4533:function(e,t,s){Promise.resolve().then(s.bind(s,8453)),Promise.resolve().then(s.bind(s,5022)),Promise.resolve().then(s.t.bind(s,1371,23)),Promise.resolve().then(s.t.bind(s,2853,23))},8453:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return U}});var a=s(7437),n=s(2265),r=s(4033),i=s(6541),o=s(4493),c=s(6848);class l extends Error{constructor(e,t,s,a){super(t),this.status=e,this.code=s,this.details=a,this.name="ApiError"}}class u{async request(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n="".concat("https://backend-server.mybizai.in/api/v1").concat(t),r=localStorage.getItem("access_token"),i={};a||s instanceof FormData?a||FormData:i["Content-Type"]="application/json",r&&(i.Authorization="Bearer ".concat(r));let o={method:e,headers:i,credentials:"include"};s&&(a||s instanceof FormData?o.body=s instanceof FormData?s:new FormData(s):o.body=JSON.stringify(s)),console.log("\uD83D\uDE80 API Request:",{method:e,url:n,headers:Object.fromEntries(Object.entries(i).filter(e=>{let[t]=e;return"Authorization"!==t})),body:s?a||s instanceof FormData?"[FormData]":s:void 0,timestamp:new Date().toISOString()});try{let t=await fetch(n,o),s=await this.handleResponse(t);return console.log("âœ… API Response:",{method:e,url:n,status:t.status,statusText:t.statusText,timestamp:new Date().toISOString()}),{data:s}}catch(e){if(e instanceof l)return{error:{message:e.message,code:e.code||"unknown_error",details:e.details}};return{error:{message:e instanceof Error?e.message:"An unknown error occurred",code:"unknown_error"}}}}async handleResponse(e){let t=e.headers.get("content-type"),s=null==t?void 0:t.includes("application/json");if(!e.ok){let t;if(401===e.status)throw localStorage.removeItem("access_token"),window.location.href="/login",new l(401,"Session expired. Please log in again.","auth_expired");let a="HTTP error! status: ".concat(e.status),n="unknown_error";try{if(s){let s=await e.json();422===e.status&&console.error("422 Unprocessable Entity Error Details:",{status:e.status,statusText:e.statusText,url:e.url,fullErrorResponse:s,timestamp:new Date().toISOString()}),!1===s.success&&s.error?(a=s.error.message,n=s.error.code,t=s.error.details):a=(null==s?void 0:s.detail)||(null==s?void 0:s.message)||a}else a=await e.text()||e.statusText||a}catch(t){a=e.statusText||a}throw new l(e.status,a,n,t)}return 204===e.status?null:s?e.json():e.text()}async get(e,t){let s=new URLSearchParams;t&&Object.entries(t).forEach(e=>{let[t,a]=e;void 0!==a&&""!==a&&s.append(t,String(a))});let a=s.toString(),n=a?"".concat(e,"?").concat(a):e;return this.request("GET",n)}async post(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.request("POST",e,t,s)}async put(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.request("PUT",e,t,s)}async patch(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.request("PATCH",e,t,s)}async delete(e){return this.request("DELETE",e)}async login(e){return this.post("/auth/login",e)}async signup(e){return this.post("/auth/signup",e)}async verifyEmail(e){return this.post("/auth/verify-email",e)}async getCurrentUser(){return this.get("/auth/users/me")}async getCatalogItems(e){return this.get("/catalog/",e)}async createCatalogItem(e){return this.post("/catalog/",e)}async getCatalogItem(e){return this.get("/catalog/".concat(e))}async updateCatalogItem(e,t){return this.put("/catalog/".concat(e),t)}async deleteCatalogItem(e){return this.delete("/catalog/".concat(e))}async uploadCatalogImage(e){let t=new FormData;return t.append("file",e),this.post("/catalog/upload-image",t,!0)}async getKnowledgeBaseEntries(e){return this.get("/knowledge_base/",e)}async createKnowledgeBaseItem(e){return this.post("/knowledge_base/",e)}async uploadKnowledgeBaseFile(e){let t=new FormData;return t.append("title",e.title),e.category&&t.append("category",e.category),t.append("file",e.file),this.post("/knowledge_base/upload",t,!0)}async getKnowledgeBaseItem(e){return this.get("/knowledge_base/".concat(e))}async updateKnowledgeBaseItem(e,t){return this.put("/knowledge_base/".concat(e),t)}async deleteKnowledgeBaseItem(e){return this.delete("/knowledge_base/".concat(e))}async getChatAgents(e){return this.get("/chat_agents/",e)}async createChatAgent(e){let t=this.validateChatAgentData(e);return t.isValid?this.post("/chat_agents/",e):{error:{message:"Validation failed: "+t.errors.join(", "),code:"validation_error",details:t.errors.reduce((e,t,s)=>(e["field_".concat(s)]=t,e),{})}}}async getChatAgent(e){return this.get("/chat_agents/".concat(e))}async updateChatAgent(e,t){return this.put("/chat_agents/".concat(e),t)}async deleteChatAgent(e){return this.delete("/chat_agents/".concat(e))}async getBusinessIntegrations(){return this.get("/business_integrations/")}async createBusinessIntegration(e){return this.post("/business_integrations/",e)}async updateBusinessIntegration(e,t){return this.put("/business_integrations/".concat(e),t)}async deleteBusinessIntegration(e){return this.delete("/business_integrations/".concat(e))}async getContacts(e){return this.get("/contacts/",e)}async createContact(e){return this.post("/contacts/",e)}async getContact(e){return this.get("/contacts/".concat(e))}async updateContact(e,t){return this.put("/contacts/".concat(e),t)}async deleteContact(e){return this.delete("/contacts/".concat(e))}async getLeads(e){return this.get("/leads/",e)}async createLead(e){return this.post("/leads/",e)}async getLead(e){return this.get("/leads/".concat(e))}async updateLead(e,t){return this.put("/leads/".concat(e),t)}async deleteLead(e){return this.delete("/leads/".concat(e))}async getOrders(e){return this.get("/orders/",e)}async createOrder(e){return this.post("/orders/",e)}async getOrder(e){return this.get("/orders/".concat(e))}async updateOrder(e,t){return this.put("/orders/".concat(e),t)}async deleteOrder(e){return this.delete("/orders/".concat(e))}async getAppointments(e){return this.get("/appointments/",e)}async createAppointment(e){return this.post("/appointments/",e)}async getAppointment(e){return this.get("/appointments/".concat(e))}async updateAppointment(e,t){return this.put("/appointments/".concat(e),t)}async deleteAppointment(e){return this.delete("/appointments/".concat(e))}async getConversations(e){return this.get("/convos/",e)}async getConversation(e){return this.get("/convos/convo/".concat(e))}async getConversationMessages(e,t){return this.get("/convos/".concat(e,"/messages"),t)}async sendConversationMessage(e,t){return this.post("/convos/".concat(e,"/messages"),t)}async updateConversationMode(e,t){return this.put("/convos/".concat(e,"/mode"),{mode:t})}async updateConversationSummary(e,t){return this.put("/convos/".concat(e,"/summary"),{summary:t})}async getChatAgentConfig(e){return this.get("/chat-agents/".concat(e,"/config"))}async updateChatAgentConfig(e,t){return this.put("/chat-agents/".concat(e,"/config"),t)}async validateChatAgentConfig(e,t){return this.post("/chat-agents/".concat(e,"/config/validate"),t)}async linkKnowledgeBaseToAgent(e,t){return this.post("/chat_agent_knowledge_base/",{chat_agent_id:e,knowledge_base_ids:t})}async unlinkKnowledgeBaseFromAgent(e,t){return this.delete("/chat_agent_knowledge_base/".concat(e,"/").concat(t))}async getAgentKnowledgeBases(e){return this.get("/chat_agent_knowledge_base/".concat(e))}async testChatAgentMessage(e,t){return this.post("/chat-agents/".concat(e,"/test-message"),{message:t})}connectWebSocket(e,t){return new WebSocket("".concat("wss://backend-server.mybizai.in/ws","/chat-agents/").concat(e,"/conversations/").concat(t))}validateChatAgentData(e){let t=[];return(!e.name||"string"!=typeof e.name||e.name.trim().length<3)&&t.push("Name is required and must be at least 3 characters"),e.name&&e.name.length>50&&t.push("Name must be no more than 50 characters"),e.description&&e.description.length>200&&t.push("Description must be no more than 200 characters"),e.role&&"string"!=typeof e.role&&t.push("Role must be a string"),void 0!==e.active&&"boolean"!=typeof e.active&&t.push("Active must be a boolean"),e.channels&&"object"!=typeof e.channels&&t.push("Channels must be an object"),{isValid:0===t.length,errors:t}}}let d=new u;var g=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,g.Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);var p=s(7972);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=(0,g.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var y=s(2247);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let f=(0,g.Z)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),b=(0,g.Z)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);function v(){let{theme:e,toggleTheme:t,setTheme:s}=(0,c.f)();return(0,n.useEffect)(()=>{let e=localStorage.getItem("theme-storage");if(e){var t;let a=JSON.parse(e);(null===(t=a.state)||void 0===t?void 0:t.theme)&&s(a.state.theme)}else{let e=window.matchMedia("(prefers-color-scheme: dark)").matches;s(e?"dark":"light")}},[s]),(0,a.jsxs)(y.z,{variant:"outline",size:"sm",onClick:t,className:"w-9 h-9 p-0",children:["light"===e?(0,a.jsx)(f,{className:"h-4 w-4"}):(0,a.jsx)(b,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}var x=s(9223),k=s(5483);function w(){let{logout:e}=(0,i.t)(),{user:t}=(0,o.L)(),{businessData:s}=(0,x.z)(),{toggleSidebar:n}=(0,k.N)(),c=(0,r.useRouter)();return(0,a.jsxs)("header",{className:"h-16 border-b border-gray-200 dark:border-slate-800/50 bg-white/95 dark:bg-slate-900/50 backdrop-blur-sm px-6 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(y.z,{variant:"secondary",size:"sm",onClick:n,className:"p-2",children:(0,a.jsx)(h,{className:"h-5 w-5"})}),(0,a.jsx)("h1",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"MyBizAI"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-slate-400",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:(null==t?void 0:t.full_name)||(null==t?void 0:t.email)})]}),(0,a.jsx)(v,{}),(0,a.jsxs)(y.z,{variant:"outline",size:"sm",onClick:()=>{e(),c.push("/login")},className:"flex items-center space-x-2",children:[(0,a.jsx)(m,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Logout"})]})]})]})}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let _=(0,g.Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);var j=s(4322);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let C=(0,g.Z)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);var N=s(6654),A=s(2176),Z=s(3966),B=s(272),D=s(2369),S=s(9409),T=s(1738),z=s(1396),I=s.n(z),E=s(1628);let M=[{name:"Dashboard",href:"/dashboard",icon:_},{name:"Catalog",href:"/catalog",icon:j.Z},{name:"Contacts",href:"/contacts",icon:C},{name:"Leads",href:"/leads",icon:N.Z},{name:"Chats",href:"/chats",icon:A.Z},{name:"Chat Agents",href:"/chatagent",icon:Z.Z},{name:"Knowledge Base",href:"/knowledgebase",icon:B.Z},{name:"Integrations",href:"/integrations",icon:D.Z},{name:"Settings",href:"/settings",icon:S.Z},{name:"Billing",href:"/billing",icon:T.Z}];function O(){let e=(0,r.usePathname)(),{isOpen:t}=(0,k.N)(),s=!t;return(0,a.jsx)("div",{className:(0,E.cn)("bg-white dark:bg-slate-900/50 border-r border-gray-200 dark:border-slate-800/50 h-full transition-all duration-300 ease-in-out backdrop-blur-sm",s?"w-16":"w-64"),children:(0,a.jsx)("nav",{className:(0,E.cn)("p-4 space-y-2",s&&"px-2"),children:M.map(t=>{let n=e===t.href;return(0,a.jsxs)(I(),{href:t.href,className:(0,E.cn)("flex items-center rounded-lg text-sm font-medium transition-colors",s?"justify-center px-3 py-3":"space-x-3 px-3 py-2",n?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg":"text-gray-700 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-800/50"),title:s?t.name:void 0,children:[(0,a.jsx)(t.icon,{className:"h-5 w-5 flex-shrink-0"}),!s&&(0,a.jsx)("span",{children:t.name})]},t.name)})})})}function P(e){let{children:t}=e;return(0,a.jsxs)("div",{className:"h-screen flex flex-col bg-gray-50 dark:bg-slate-950",children:[(0,a.jsx)(w,{}),(0,a.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,a.jsx)(O,{}),(0,a.jsx)("main",{className:"flex-1 overflow-y-scroll",children:t})]})]})}function F(e){let{children:t}=e;return(0,a.jsx)(P,{children:(0,a.jsx)("div",{className:"flex-1 overflow-y-auto ",children:t})})}var q=s(5022);let L=["/login","/signup","/verify-email"],R=["/dashboard","/onboarding","/catalog","/contacts","/leads","/chatagent","/teams","/campaigns","/analytics","/settings","/knowledge_base","/integrations","/billing"];function U(e){let{children:t}=e,s=(0,r.useRouter)(),l=(0,r.usePathname)(),{isAuthenticated:u,logout:g,initAuth:h}=(0,i.t)(),{user:p,setUser:m}=(0,o.L)(),{theme:y}=(0,c.f)(),{showToast:f}=(0,q.useToast)();(0,n.useEffect)(()=>{document.documentElement.classList.toggle("dark","dark"===y)},[y]),(0,n.useEffect)(()=>{let e=async()=>{try{await h()}catch(e){console.error("Error initializing auth:",e),f({type:"error",title:"Authentication Error",message:"Failed to initialize authentication. Please refresh the page."})}};e()},[h,f]),(0,n.useEffect)(()=>{var e,t;let a=L.includes(l),n=R.includes(l),r="/"===l;if(void 0!==u){if(r){u?(null==p?void 0:null===(e=p.businesses)||void 0===e?void 0:e.length)===0?s.push("/onboarding"):s.push("/dashboard"):s.push("/login");return}if(!u&&n){s.push("/login");return}if(u&&a&&"/verify-email"!==l){(null==p?void 0:null===(t=p.businesses)||void 0===t?void 0:t.length)===0?s.push("/onboarding"):s.push("/dashboard");return}if(u&&"/onboarding"!==l&&(!(null==p?void 0:p.businesses)||0===p.businesses.length)){s.push("/onboarding");return}if(u&&"/onboarding"===l&&(null==p?void 0:p.businesses)&&p.businesses.length>0){s.push("/dashboard");return}"/"===l&&(u?(null==p?void 0:p.businesses)&&0!==p.businesses.length?s.push("/dashboard"):s.push("/onboarding"):s.push("/login"))}},[u,p,l,s]),(0,n.useEffect)(()=>{let e=async()=>{if(u&&!p)try{let t=await d.getCurrentUser();if(t.data){var e;let s=t.data;m({id:s.id,email:s.email,full_name:s.name,phone_number:s.phone||"",businesses:(null===(e=s.businesses)||void 0===e?void 0:e.map(e=>({id:e.id,owner_id:s.id,name:e.name,phone_number:"",number_of_employees:null,type:"product",business_type:e.business_type||null,description:null,extra_data:{},onboarding_completed:!0,website:null,address:null,created_at:e.created_at,updated_at:e.updated_at||e.created_at})))||[]})}else t.error&&(console.warn("Failed to load user profile:",t.error.message),f({type:"error",title:"Profile Error",message:t.error.message}),g())}catch(e){console.warn("Failed to load user profile, logging out...",e),f({type:"error",title:"Authentication Error",message:"Session expired. Please log in again."}),g()}};e()},[u,p,m,g,f]);let b=L.includes(l);return void 0===u?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):b?(0,a.jsx)(a.Fragment,{children:t}):(0,a.jsx)(F,{children:t})}},2247:function(e,t,s){"use strict";s.d(t,{z:function(){return i}});var a=s(7437),n=s(2265),r=s(1628);let i=(0,n.forwardRef)((e,t)=>{let{className:s,variant:n="primary",size:i="md",isLoading:o,children:c,disabled:l,...u}=e;return(0,a.jsxs)("button",{className:(0,r.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{primary:"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 focus-visible:ring-blue-500",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-100 dark:hover:bg-gray-700 focus-visible:ring-gray-500",outline:"border border-gray-300 bg-transparent text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-800 focus-visible:ring-gray-500",default:"border border-gray-300 bg-transparent text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-800 focus-visible:ring-gray-500"}[n],{sm:"h-9 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-11 px-8 text-lg"}[i],s),ref:t,disabled:l||o,...u,children:[o&&(0,a.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c]})});i.displayName="Button"},5022:function(e,t,s){"use strict";s.r(t),s.d(t,{ToastProvider:function(){return h},toast:function(){return p},useToast:function(){return g}});var a=s(7437),n=s(2265),r=s(3008),i=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,i.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var c=s(1981);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,i.Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var u=s(2549);let d=(0,n.createContext)(void 0),g=()=>{let e=(0,n.useContext)(d);if(!e)throw Error("useToast must be used within a ToastProvider");return e},h=e=>{let{children:t}=e,[s,i]=(0,n.useState)([]),g=e=>{i(t=>t.filter(t=>t.id!==e))},h=e=>{switch(e){case"success":return(0,a.jsx)(r.Z,{className:"w-5 h-5 text-green-500"});case"error":return(0,a.jsx)(o,{className:"w-5 h-5 text-red-500"});case"warning":return(0,a.jsx)(c.Z,{className:"w-5 h-5 text-yellow-500"});case"info":return(0,a.jsx)(l,{className:"w-5 h-5 text-blue-500"});default:return null}},p=e=>{switch(e){case"success":return"bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-800";case"error":return"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-800";case"warning":return"bg-yellow-50 border-yellow-200 dark:bg-yellow-900/20 dark:border-yellow-800";case"info":return"bg-blue-50 border-blue-200 dark:bg-blue-900/20 dark:border-blue-800";default:return"bg-gray-50 border-gray-200 dark:bg-gray-900/20 dark:border-gray-800"}};return(0,a.jsxs)(d.Provider,{value:{toasts:s,showToast:e=>{let t=Math.random().toString(36).substr(2,9),s={id:t,duration:5e3,...e};i(e=>[...e,s]),setTimeout(()=>{g(t)},s.duration)},removeToast:g},children:[t,(0,a.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:s.map(e=>(0,a.jsx)("div",{className:"max-w-sm w-full p-4 rounded-lg border shadow-lg transition-all duration-300 ".concat(p(e.type)),children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[h(e.type),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.title}),e.message&&(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.message})]}),(0,a.jsx)("button",{onClick:()=>g(e.id),className:"flex-shrink-0 p-1 rounded-md text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:(0,a.jsx)(u.Z,{className:"w-4 h-4"})})]})},e.id))})]})},p={success:(e,t)=>{console.log("Success toast:",e,t)},error:(e,t)=>{console.log("Error toast:",e,t)},warning:(e,t)=>{console.log("Warning toast:",e,t)},info:(e,t)=>{console.log("Info toast:",e,t)}}},6541:function(e,t,s){"use strict";s.d(t,{t:function(){return r}});var a=s(4660),n=s(4810);let r=(0,a.Ue)()((0,n.tJ)((0,n.XR)((e,t)=>({accessToken:null,tokenType:null,isAuthenticated:void 0,login:function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bearer";e({accessToken:t,tokenType:s,isAuthenticated:!0})},logout:()=>{localStorage.removeItem("access_token"),localStorage.removeItem("token_type"),e({accessToken:null,tokenType:null,isAuthenticated:!1})},initAuth:async()=>{try{{let t=localStorage.getItem("access_token");if(t)return e({accessToken:t,tokenType:"bearer",isAuthenticated:!0}),!0}return e({isAuthenticated:!1}),!1}catch(t){return console.error("Error initializing auth:",t),e({isAuthenticated:!1}),!1}},setAuthenticated:t=>{e({isAuthenticated:t})}})),{name:"auth-storage",partialize:e=>({accessToken:e.accessToken,tokenType:e.tokenType})}))},9223:function(e,t,s){"use strict";s.d(t,{z:function(){return r}});var a=s(4660),n=s(4810);let r=(0,a.Ue)()((0,n.tJ)((0,n.XR)((e,t)=>({businessData:null,activeBusiness:null,setBusinessData:t=>{e({businessData:t})},setActiveBusiness:t=>{e({activeBusiness:t})},setBusinessInfo:t=>{e(e=>({businessData:e.businessData?{...e.businessData,onboarding_completed:t.business_onboarded}:null,activeBusiness:e.activeBusiness?{...e.activeBusiness,onboarding_completed:t.business_onboarded}:null}))},completeOnboarding:()=>{e(e=>({businessData:e.businessData?{...e.businessData,onboarding_completed:!0}:null,activeBusiness:e.activeBusiness?{...e.activeBusiness,onboarding_completed:!0}:null}))},updateBusinessData:t=>{e(e=>({businessData:e.businessData?{...e.businessData,...t}:{id:0,owner_id:0,name:"",phone_number:"",website:null,address:null,number_of_employees:null,type:"product",business_type:null,description:null,extra_data:{},onboarding_completed:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),...t},activeBusiness:e.activeBusiness?{...e.activeBusiness,...t}:null}))},clearBusinessData:()=>{e({businessData:null,activeBusiness:null})}})),{name:"business-storage",partialize:e=>({businessData:e.businessData,activeBusiness:e.activeBusiness})}))},5483:function(e,t,s){"use strict";s.d(t,{N:function(){return r}});var a=s(4660),n=s(4810);let r=(0,a.Ue)()((0,n.tJ)((0,n.XR)((e,t)=>({isOpen:!0,toggleSidebar:()=>{e(e=>({isOpen:!e.isOpen}))},setSidebarOpen:t=>{e({isOpen:t})}})),{name:"sidebar-storage",partialize:e=>({isOpen:e.isOpen})}))},6848:function(e,t,s){"use strict";s.d(t,{f:function(){return r}});var a=s(4660),n=s(4810);let r=(0,a.Ue)()((0,n.tJ)((0,n.XR)((e,t)=>({theme:localStorage.getItem("theme")||"light",setTheme:t=>{document.documentElement.classList.toggle("dark","dark"===t),localStorage.setItem("theme",t),e({theme:t})},toggleTheme:()=>{let e=t().theme;t().setTheme("light"===e?"dark":"light")}})),{name:"theme-storage"}))},4493:function(e,t,s){"use strict";s.d(t,{L:function(){return r}});var a=s(4660),n=s(4810);let r=(0,a.Ue)()((0,n.tJ)((0,n.XR)((e,t)=>({user:null,setUser:t=>{e({user:t})},clearUser:()=>{e({user:null})},updateUser:t=>{e(e=>({user:e.user?{...e.user,...t}:null}))},reset:()=>{e({user:null})}})),{name:"user-storage",partialize:e=>({user:e.user})}))},1628:function(e,t,s){"use strict";s.d(t,{cn:function(){return r}});var a=s(7042),n=s(4769);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.m6)((0,a.W)(t))}},2853:function(){},1371:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}}},function(e){e.O(0,[9061,5166,8251,2971,2472,1744],function(){return e(e.s=4533)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7043],{1753:function(e,a,t){Promise.resolve().then(t.bind(t,2398))},2398:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return D}});var r=t(7437),s=t(2265),l=t(4033),i=t(4322),n=t(9409),c=t(1541),o=t(9883),d=t(1813),g=t(4689),m=t(2247),x=t(1844),u=t(6691),y=t.n(u),h=t(9031),p=t(9617),b=t(236),f=t(6161),v=t(5367);let j=e=>{if(!e)return"";if(e.startsWith("http://")||e.startsWith("https://"))return e;{let a="https://backend-server.mybizai.in/api/v1".replace("/api/v1",""),t=e.startsWith("/")?e:"/".concat(e);return"".concat(a).concat(t)}};function N(e){let{item:a,onEdit:t,onDelete:l,onToggleAvailability:n}=e,[c,o]=(0,s.useState)(!1),[d,g]=(0,s.useState)(!1),u=async()=>{g(!0);let e="available"===a.availability?"out_of_stock":"available";await n(a.id,e),g(!1)};return(0,r.jsx)(x.Zb,{className:"group hover:shadow-lg transition-shadow duration-200",children:(0,r.jsxs)(x.aY,{className:"p-4",children:[(0,r.jsxs)("div",{className:"relative aspect-square mb-4 bg-gray-100 dark:bg-gray-800 rounded-lg overflow-hidden",children:[(a.images&&a.images.length>0?(console.log("Image data for",a.name,":",a.images),console.log("Converted URL:",j(a.images[0]))):console.log("No image for",a.name,"- images:",a.images,"imageError:",c),null),a.images&&a.images.length>0&&!c?(0,r.jsx)(y(),{src:j(a.images[0]),alt:a.name,fill:!0,className:"object-cover",onError:e=>{console.error("Image load error for",a.name,":",e),o(!0)},onLoad:()=>console.log("Image loaded successfully for",a.name),unoptimized:!0}):(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsx)(i.Z,{className:"w-12 h-12 text-gray-400"})}),(0,r.jsxs)("div",{className:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center space-x-2",children:[(0,r.jsx)(m.z,{size:"sm",variant:"secondary",onClick:()=>t(a),className:"bg-white text-gray-900 hover:bg-gray-100",children:(0,r.jsx)(p.Z,{className:"w-4 h-4"})}),(0,r.jsx)(m.z,{size:"sm",variant:"secondary",onClick:u,disabled:d,className:"bg-white text-gray-900 hover:bg-gray-100",children:"available"===a.availability?(0,r.jsx)(b.Z,{className:"w-4 h-4 text-green-600"}):(0,r.jsx)(f.Z,{className:"w-4 h-4 text-gray-600"})}),(0,r.jsx)(m.z,{size:"sm",variant:"secondary",onClick:()=>l(a.id),className:"bg-white text-red-600 hover:bg-red-50",children:(0,r.jsx)(v.Z,{className:"w-4 h-4"})})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:a.name}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:a.category})]}),(0,r.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:new Intl.NumberFormat("en-US",{style:"currency",currency:a.currency||"USD"}).format(a.price)}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat({available:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",out_of_stock:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",discontinued:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}[a.availability]),children:{available:"Available",out_of_stock:"Out of Stock",discontinued:"Discontinued"}[a.availability]}),(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat("product"===a.type?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400"),children:"product"===a.type?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{className:"w-3 h-3 mr-1"}),"Product"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{className:"w-3 h-3 mr-1"}),"Service"]})})]}),a.description&&(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2",children:a.description})]})]})})}var w=t(1827),k=t(2549),C=t(4977);function z(e){let{value:a,onChange:t,placeholder:s="Search catalog items..."}=e;return(0,r.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,r.jsx)(w.Z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,r.jsx)(C.I,{type:"text",placeholder:s,value:a,onChange:e=>t(e.target.value),className:"pl-10 pr-10"}),a&&(0,r.jsx)(m.z,{type:"button",variant:"secondary",size:"sm",onClick:()=>{t("")},className:"absolute right-2 top-2 h-6 w-6 p-0 hover:bg-gray-200 dark:hover:bg-gray-700",children:(0,r.jsx)(k.Z,{className:"h-3 w-3"})})]})}var S=t(2482),_=t(8674);function Z(e){let{filters:a,onFilterChange:t,onClearFilters:s,categories:l}=e,i=[{value:"",label:"All Categories"},...l.map(e=>({value:e,label:e}))],n=a.category||a.availability||a.type;return(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(S.Z,{className:"h-4 w-4 text-gray-500"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Filters:"})]}),(0,r.jsx)(_.P,{options:i,value:a.category,onChange:e=>t("category",e.target.value),placeholder:"Category",className:"min-w-[140px]"}),(0,r.jsx)(_.P,{options:[{value:"",label:"All Availability"},{value:"available",label:"Available"},{value:"out_of_stock",label:"Out of Stock"},{value:"discontinued",label:"Discontinued"}],value:a.availability,onChange:e=>t("availability",e.target.value),placeholder:"Availability",className:"min-w-[140px]"}),(0,r.jsx)(_.P,{options:[{value:"",label:"All Types"},{value:"product",label:"Products"},{value:"service",label:"Services"}],value:a.type,onChange:e=>t("type",e.target.value),placeholder:"Type",className:"min-w-[120px]"}),n&&(0,r.jsxs)(m.z,{variant:"outline",size:"sm",onClick:s,className:"flex items-center space-x-1",children:[(0,r.jsx)(k.Z,{className:"h-3 w-3"}),(0,r.jsx)("span",{children:"Clear"})]})]})}var I=t(3062),A=t(9843);function D(){let e=(0,l.useRouter)(),{accessToken:a}=(0,I.tN)(),{items:t,isLoading:u,searchQuery:y,filters:h,setItems:p,updateItem:b,removeItem:f,setLoading:v,setSearchQuery:j,setFilters:w,clearFilters:k}=(0,I.iC)(),[C,S]=(0,s.useState)("grid"),[_,D]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=async()=>{if(a){v(!0);try{let e=await A.iJ.getCatalogItems(a,{page:1,per_page:50,...h.category&&{category:h.category},...h.type&&{type:h.type},...h.availability&&{availability:h.availability},...y&&{search:y}}),t=e.items.map(e=>({id:String(e.id),name:e.name,description:e.description||"",category:e.category||"",price:e.price,currency:e.currency,availability:e.availability,type:e.type,images:e.images,template_fields:{},created_at:e.created_at,updated_at:e.updated_at}));p(t)}catch(e){console.error("Failed to fetch catalog items:",e),p([])}finally{v(!1)}}};e()},[a,p,v]);let F=(0,s.useMemo)(()=>{let e=[...new Set(t.map(e=>e.category))];return e.filter(Boolean)},[t]),O=(0,s.useMemo)(()=>t.filter(e=>{let a=!y||e.name.toLowerCase().includes(y.toLowerCase())||e.description.toLowerCase().includes(y.toLowerCase())||e.category.toLowerCase().includes(y.toLowerCase()),t=!h.category||e.category===h.category,r=!h.availability||e.availability===h.availability,s=!h.type||e.type===h.type;return a&&t&&r&&s}),[t,y,h]),R=a=>{e.push("/catalog/".concat(a.id,"/edit"))},L=async e=>{if(a){if(_!==e){D(e),setTimeout(()=>D(null),3e3);return}try{await A.iJ.deleteCatalogItem(e,a),f(e),D(null)}catch(e){console.error("Failed to delete item:",e)}}},P=async(e,t)=>{if(a)try{let r=await A.iJ.updateCatalogItem(e,{availability:t},a),s={id:String(r.id),name:r.name,description:r.description||"",category:r.category||"",price:r.price,currency:r.currency,availability:r.availability,type:r.type,images:r.images,template_fields:r.extra_data,created_at:r.created_at,updated_at:r.updated_at};b(e,s)}catch(e){console.error("Failed to toggle availability:",e)}};return a?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 dark:from-emerald-600 dark:to-teal-700 flex items-center justify-center shadow-lg",children:(0,r.jsx)(i.Z,{className:"w-5 h-5 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Catalog"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Products & services"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)(m.z,{variant:"outline",onClick:()=>e.push("/catalog/templates"),className:"flex items-center space-x-2",children:[(0,r.jsx)(n.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Templates"})]}),(0,r.jsxs)(m.z,{variant:"outline",onClick:()=>e.push("/catalog/bulk-upload"),className:"flex items-center space-x-2",children:[(0,r.jsx)(c.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Bulk Upload"})]}),(0,r.jsxs)(m.z,{onClick:()=>e.push("/catalog/new"),className:"flex items-center space-x-2",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Add Item"})]})]})]}),(0,r.jsx)(x.Zb,{children:(0,r.jsx)(x.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[(0,r.jsx)(z,{value:y,onChange:j,placeholder:"Search by name, description, or category..."}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(Z,{filters:{category:h.category||"",availability:h.availability||"",type:h.type||""},onFilterChange:(e,a)=>{"type"===e?w({type:a||void 0}):"availability"===e?w({availability:a||void 0}):w({[e]:a||void 0})},onClearFilters:k,categories:F}),(0,r.jsxs)("div",{className:"flex items-center border rounded-lg",children:[(0,r.jsx)(m.z,{variant:"grid"===C?"primary":"outline",size:"sm",onClick:()=>S("grid"),className:"rounded-r-none border-r-0",children:(0,r.jsx)(d.Z,{className:"w-4 h-4"})}),(0,r.jsx)(m.z,{variant:"list"===C?"primary":"outline",size:"sm",onClick:()=>S("list"),className:"rounded-l-none",children:(0,r.jsx)(g.Z,{className:"w-4 h-4"})})]})]})]})})}),(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:u?"Loading...":"".concat(O.length," item").concat(1!==O.length?"s":""," found")})}),u?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[...Array(8)].map((e,a)=>(0,r.jsx)(x.Zb,{className:"animate-pulse",children:(0,r.jsxs)(x.aY,{className:"p-4",children:[(0,r.jsx)("div",{className:"aspect-square bg-gray-200 dark:bg-gray-700 rounded-lg mb-4"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded"}),(0,r.jsx)("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-2/3"})]})]})},a))}):0===O.length?(0,r.jsx)(x.Zb,{children:(0,r.jsx)(x.aY,{className:"p-12 text-center",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(o.Z,{className:"w-8 h-8 text-gray-400"})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:0===t.length?"No items yet":"No items match your filters"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:0===t.length?"Get started by adding your first product or service to your catalog.":"Try adjusting your search or filter criteria to find what you're looking for."}),0===t.length?(0,r.jsxs)(m.z,{onClick:()=>e.push("/catalog/new"),children:[(0,r.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"Add Your First Item"]}):(0,r.jsx)(m.z,{variant:"outline",onClick:k,children:"Clear Filters"})]})})}):(0,r.jsx)("div",{className:"grid"===C?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:O.map(e=>(0,r.jsx)(N,{item:e,onEdit:R,onDelete:L,onToggleAvailability:P},e.id))}),_&&(0,r.jsxs)("div",{className:"fixed bottom-4 right-4 bg-red-600 text-white p-4 rounded-lg shadow-lg",children:[(0,r.jsx)("p",{className:"text-sm mb-2",children:"Click delete again to confirm"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(m.z,{size:"sm",variant:"outline",onClick:()=>D(null),className:"bg-white text-red-600 border-white hover:bg-gray-100",children:"Cancel"}),(0,r.jsx)(m.z,{size:"sm",onClick:()=>L(_),className:"bg-red-700 hover:bg-red-800",children:"Confirm Delete"})]})]})]}):(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("p",{className:"text-gray-500",children:"Please log in to view your catalog."})})}new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString()},2247:function(e,a,t){"use strict";t.d(a,{z:function(){return i}});var r=t(7437),s=t(2265),l=t(1628);let i=(0,s.forwardRef)((e,a)=>{let{className:t,variant:s="primary",size:i="md",isLoading:n,children:c,disabled:o,...d}=e;return(0,r.jsxs)("button",{className:(0,l.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{primary:"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 focus-visible:ring-blue-500",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-100 dark:hover:bg-gray-700 focus-visible:ring-gray-500",outline:"border border-gray-300 bg-transparent text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-800 focus-visible:ring-gray-500",default:"border border-gray-300 bg-transparent text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-800 focus-visible:ring-gray-500"}[s],{sm:"h-9 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-11 px-8 text-lg"}[i],t),ref:a,disabled:o||n,...d,children:[n&&(0,r.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c]})});i.displayName="Button"},1844:function(e,a,t){"use strict";t.d(a,{Ol:function(){return n},Zb:function(){return i},aY:function(){return d},ll:function(){return c}});var r=t(7437),s=t(2265),l=t(1628);let i=(0,s.forwardRef)((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("rounded-xl border border-gray-200 bg-white shadow-lg dark:border-gray-800 dark:bg-gray-900",t),...s})});i.displayName="Card";let n=(0,s.forwardRef)((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...s})});n.displayName="CardHeader";let c=(0,s.forwardRef)((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("h3",{ref:a,className:(0,l.cn)("font-semibold leading-none tracking-tight",t),...s})});c.displayName="CardTitle";let o=(0,s.forwardRef)((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("p",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",t),...s})});o.displayName="CardDescription";let d=(0,s.forwardRef)((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("p-6 pt-0",t),...s})});d.displayName="CardContent"},4977:function(e,a,t){"use strict";t.d(a,{I:function(){return i}});var r=t(7437),s=t(2265),l=t(1628);let i=(0,s.forwardRef)((e,a)=>{let{className:t,type:s,label:i,error:n,...c}=e;return(0,r.jsxs)("div",{className:"space-y-2",children:[i&&(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:i}),(0,r.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100 dark:ring-offset-gray-900 dark:placeholder:text-gray-400 dark:focus-visible:ring-blue-400",n&&"border-red-500 focus-visible:ring-red-500",t),ref:a,...c}),n&&(0,r.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:n})]})});i.displayName="Input"},8674:function(e,a,t){"use strict";t.d(a,{P:function(){return n}});var r=t(7437),s=t(2265),l=t(1628),i=t(3523);let n=(0,s.forwardRef)((e,a)=>{let{className:t,label:s,error:n,options:c,placeholder:o,...d}=e;return(0,r.jsxs)("div",{className:"space-y-2",children:[s&&(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:s}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("select",{className:(0,l.cn)("flex h-10 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100 dark:ring-offset-gray-900 dark:focus-visible:ring-blue-400 appearance-none pr-8",n&&"border-red-500 focus-visible:ring-red-500",t),ref:a,...d,children:[o&&(0,r.jsx)("option",{value:"",disabled:!0,children:o}),c.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,r.jsx)(i.Z,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400 pointer-events-none"})]}),n&&(0,r.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:n})]})});n.displayName="Select"},1628:function(e,a,t){"use strict";t.d(a,{cn:function(){return l}});var r=t(7042),s=t(4769);function l(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,s.m6)((0,r.W)(a))}}},function(e){e.O(0,[9061,5166,4740,9843,3062,2971,2472,1744],function(){return e(e.s=1753)}),_N_E=e.O()}]);
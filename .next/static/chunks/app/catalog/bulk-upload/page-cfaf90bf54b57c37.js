(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1608],{1981:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var a=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3008:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var a=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3523:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var a=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},6637:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var a=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},1541:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var a=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},8958:function(e,r,t){Promise.resolve().then(t.bind(t,5893))},5893:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return f}});var a=t(7437),s=t(2265),l=t(4033),i=t(1981),n=t(1541),d=t(6637),c=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,c.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var x=t(3008),m=t(2247),u=t(1844),y=t(8674);function g(e){let{onUpload:r,onCancel:t,isLoading:l=!1}=e,[c,g]=(0,s.useState)(1),[h,p]=(0,s.useState)(null),[f,b]=(0,s.useState)(null),[v,j]=(0,s.useState)({}),[k,N]=(0,s.useState)(null),[w,C]=(0,s.useState)(""),S=(0,s.useRef)(null),Z=[{key:"name",label:"Item Name",required:!0},{key:"description",label:"Description",required:!0},{key:"category",label:"Category",required:!0},{key:"price",label:"Price",required:!0},{key:"currency",label:"Currency",required:!1},{key:"availability",label:"Availability",required:!1},{key:"type",label:"Type",required:!1}],R=[{number:1,title:"Upload File",description:"Select your CSV/Excel file"},{number:2,title:"Map Fields",description:"Match CSV columns to catalog fields"},{number:3,title:"Preview",description:"Review data before import"},{number:4,title:"Results",description:"Import complete"}],q=e=>{let r=e.split("\n").filter(e=>e.trim());if(0===r.length)throw Error("File is empty");let t=r[0].split(",").map(e=>e.trim().replace(/"/g,"")),a=r.slice(1,6).map(e=>e.split(",").map(e=>e.trim().replace(/"/g,"")));return{headers:t,rows:a}},U=async e=>{var r;let t=null===(r=e.target.files)||void 0===r?void 0:r[0];if(t){C(""),p(t);try{let e=await t.text(),r=q(e);b(r);let a={};r.headers.forEach(e=>{let r=e.toLowerCase(),t=Z.find(e=>r.includes(e.key)||r===e.label.toLowerCase());t&&(a[t.key]=e)}),j(a),g(2)}catch(e){C("Failed to parse file. Please ensure it's a valid CSV file.")}}},P=(e,r)=>{j(t=>({...t,[e]:r}))},E=()=>{let e=Z.filter(e=>e.required);return e.every(e=>v[e.key])},_=async()=>{if(h)try{let e=await r(h,v);N(e),g(4)}catch(e){C("Upload failed. Please try again.")}};return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:R.map((e,r)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-full border-2 ".concat(c>=e.number?"bg-blue-600 border-blue-600 text-white":"border-gray-300 text-gray-500"),children:e.number}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium ".concat(c>=e.number?"text-blue-600":"text-gray-500"),children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]}),r<R.length-1&&(0,a.jsx)("div",{className:"w-16 h-0.5 mx-4 ".concat(c>e.number?"bg-blue-600":"bg-gray-300")})]},e.number))}),w&&(0,a.jsx)(u.Zb,{className:"border-red-200 bg-red-50 dark:bg-red-900/20",children:(0,a.jsx)(u.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-red-600 dark:text-red-400",children:[(0,a.jsx)(i.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:w})]})})}),(0,a.jsxs)(u.Zb,{children:[(0,a.jsx)(u.Ol,{children:(0,a.jsx)(u.ll,{children:R[c-1].title})}),(0,a.jsxs)(u.aY,{children:[1===c&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8",children:[(0,a.jsx)(n.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Upload your catalog file"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Select a CSV file containing your catalog items"}),(0,a.jsx)("input",{ref:S,type:"file",accept:".csv,.xlsx,.xls",onChange:U,className:"hidden"}),(0,a.jsxs)(m.z,{onClick:()=>{var e;return null===(e=S.current)||void 0===e?void 0:e.click()},children:[(0,a.jsx)(d.Z,{className:"w-4 h-4 mr-2"}),"Choose File"]})]})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Don't have a file ready? Download our template to get started."}),(0,a.jsxs)(m.z,{variant:"outline",onClick:()=>{let e=Z.map(e=>e.label).join(","),r="".concat(e,"\n").concat("Sample Product,A great product description,Electronics,99.99,USD,available,product"),t=new Blob([r],{type:"text/csv"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="catalog_template.csv",s.click(),URL.revokeObjectURL(a)},children:[(0,a.jsx)(o,{className:"w-4 h-4 mr-2"}),"Download Template"]})]})]}),2===c&&f&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-4",children:"Map CSV columns to catalog fields"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Z.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e.label," ",e.required&&(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(y.P,{options:[{value:"",label:"Select column..."},...f.headers.map(e=>({value:e,label:e}))],value:v[e.key]||"",onChange:r=>P(e.key,r.target.value)})]},e.key))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"File Preview"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full border border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,a.jsx)("tr",{children:f.headers.map((e,r)=>(0,a.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider border-r border-gray-200 dark:border-gray-700",children:e},r))})}),(0,a.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:f.rows.map((e,r)=>(0,a.jsx)("tr",{children:e.map((e,r)=>(0,a.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-100 border-r border-gray-200 dark:border-gray-700",children:e},r))},r))})]})}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Showing first 5 rows of ",null==h?void 0:h.name]})]})]}),3===c&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-4",children:"Review Import Settings"}),(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"File:"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:null==h?void 0:h.name})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Estimated rows:"}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:[(null==f?void 0:f.rows.length)||0,"+ items"]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Field Mapping"}),(0,a.jsx)("div",{className:"space-y-2",children:Object.entries(v).map(e=>{let[r,t]=e,s=Z.find(e=>e.key===r);return(0,a.jsxs)("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 dark:bg-gray-800 rounded",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:null==s?void 0:s.label}),(0,a.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["← ",t]})]},r)})})]})]}),4===c&&k&&(0,a.jsxs)("div",{className:"space-y-6 text-center",children:[(0,a.jsx)("div",{className:"flex items-center justify-center",children:0===k.error_count?(0,a.jsx)(x.Z,{className:"w-16 h-16 text-green-500"}):(0,a.jsx)(i.Z,{className:"w-16 h-16 text-yellow-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Import Complete"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("p",{className:"text-green-600 dark:text-green-400",children:["✓ ",k.success_count," items imported successfully"]}),k.error_count>0&&(0,a.jsxs)("p",{className:"text-red-600 dark:text-red-400",children:["✗ ",k.error_count," items failed to import"]})]})]}),k.errors.length>0&&(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Import Errors:"}),(0,a.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 max-h-40 overflow-y-auto",children:k.errors.map((e,r)=>(0,a.jsxs)("div",{className:"text-sm text-red-600 dark:text-red-400",children:["Row ",e.row,": ",e.message]},r))})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(m.z,{variant:"outline",onClick:1===c?t:4===c?()=>{g(1),p(null),b(null),j({}),N(null),C(""),S.current&&(S.current.value="")}:()=>g(e=>e-1),children:1===c?"Cancel":4===c?"Upload Another File":"Previous"}),c<4&&(0,a.jsx)(m.z,{onClick:2===c?()=>{if(!E()){C("Please map all required fields");return}C(""),g(3)}:3===c?_:()=>{},disabled:1===c&&!h||2===c&&!E()||l,isLoading:l&&3===c,children:2===c?"Preview":3===c?"Import":"Next"}),4===c&&(0,a.jsx)(m.z,{onClick:t,children:"Done"})]})]})}var h=t(3062),p=t(9843);function f(){let e=(0,l.useRouter)(),{accessToken:r}=(0,h.tN)(),{setItems:t}=(0,h.iC)(),[i,n]=(0,s.useState)(!1),d=async(e,a)=>{if(!r)throw Error("Authentication required");n(!0);try{let s=await p.iJ.bulkUploadCatalog(e,a,r);if(s.success_count>0){let e=await p.iJ.getCatalogItems(r);t(e.items)}return s}catch(e){if(console.error("Bulk upload failed:",e),e instanceof p.MS)throw Error("Upload failed: ".concat(e.message));throw Error("Upload failed. Please try again.")}finally{n(!1)}};return r?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Bulk Upload"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Import multiple catalog items from a CSV file"})]}),(0,a.jsx)(g,{onUpload:d,onCancel:()=>{e.push("/catalog")},isLoading:i})]}):(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("p",{className:"text-gray-500",children:"Please log in to upload catalog items."})})}},2247:function(e,r,t){"use strict";t.d(r,{z:function(){return i}});var a=t(7437),s=t(2265),l=t(1628);let i=(0,s.forwardRef)((e,r)=>{let{className:t,variant:s="primary",size:i="md",isLoading:n,children:d,disabled:c,...o}=e;return(0,a.jsxs)("button",{className:(0,l.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{primary:"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 focus-visible:ring-blue-500",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-100 dark:hover:bg-gray-700 focus-visible:ring-gray-500",outline:"border border-gray-300 bg-transparent text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-800 focus-visible:ring-gray-500",default:"border border-gray-300 bg-transparent text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-800 focus-visible:ring-gray-500"}[s],{sm:"h-9 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-11 px-8 text-lg"}[i],t),ref:r,disabled:c||n,...o,children:[n&&(0,a.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d]})});i.displayName="Button"},1844:function(e,r,t){"use strict";t.d(r,{Ol:function(){return n},Zb:function(){return i},aY:function(){return o},ll:function(){return d}});var a=t(7437),s=t(2265),l=t(1628);let i=(0,s.forwardRef)((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("rounded-xl border border-gray-200 bg-white shadow-lg dark:border-gray-800 dark:bg-gray-900",t),...s})});i.displayName="Card";let n=(0,s.forwardRef)((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...s})});n.displayName="CardHeader";let d=(0,s.forwardRef)((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("h3",{ref:r,className:(0,l.cn)("font-semibold leading-none tracking-tight",t),...s})});d.displayName="CardTitle";let c=(0,s.forwardRef)((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("p",{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",t),...s})});c.displayName="CardDescription";let o=(0,s.forwardRef)((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("p-6 pt-0",t),...s})});o.displayName="CardContent"},8674:function(e,r,t){"use strict";t.d(r,{P:function(){return n}});var a=t(7437),s=t(2265),l=t(1628),i=t(3523);let n=(0,s.forwardRef)((e,r)=>{let{className:t,label:s,error:n,options:d,placeholder:c,...o}=e;return(0,a.jsxs)("div",{className:"space-y-2",children:[s&&(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:s}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{className:(0,l.cn)("flex h-10 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100 dark:ring-offset-gray-900 dark:focus-visible:ring-blue-400 appearance-none pr-8",n&&"border-red-500 focus-visible:ring-red-500",t),ref:r,...o,children:[c&&(0,a.jsx)("option",{value:"",disabled:!0,children:c}),d.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,a.jsx)(i.Z,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400 pointer-events-none"})]}),n&&(0,a.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:n})]})});n.displayName="Select"},1628:function(e,r,t){"use strict";t.d(r,{cn:function(){return l}});var a=t(7042),s=t(4769);function l(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.m6)((0,a.W)(r))}},4033:function(e,r,t){e.exports=t(94)}},function(e){e.O(0,[9061,5166,9843,3062,2971,2472,1744],function(){return e(e.s=8958)}),_N_E=e.O()}]);
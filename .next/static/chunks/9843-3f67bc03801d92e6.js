"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9843],{9843:function(e,t,a){a.d(t,{C7:function(){return d},Jh:function(){return h},MS:function(){return o},TJ:function(){return s},Zc:function(){return c},_h:function(){return i},iJ:function(){return r},zN:function(){return l}});class o extends Error{constructor(e,t,a){super(t),this.status=e,this.details=a,this.name="ApiError"}}async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="".concat("https://backend-server.mybizai.in/api/v1").concat(e),n={...t.headers||{}};!t.body||t.body instanceof FormData||t.body instanceof URLSearchParams||(n["Content-Type"]="application/json");let r={...t,headers:n};try{var c;console.log("\uD83D\uDD04 API REQUEST:",{url:a,method:t.method||"GET",headers:{...n,...(null===(c=t.headers)||void 0===c?void 0:c.Authorization)?{Authorization:"Bearer [HIDDEN]"}:{}},body:t.body?t.body instanceof FormData?"FormData":t.body:void 0});let e=await fetch(a,r);if(console.log("\uD83D\uDCE5 API RESPONSE:",{status:e.status,statusText:e.statusText,headers:Object.fromEntries(e.headers.entries())}),!e.ok){if(401===e.status)throw localStorage.removeItem("access_token"),window.location.href="/login",new o(e.status,"Session expired. Please log in again.","auth_expired");let t="HTTP error! status: ".concat(e.status),a=null;try{let o=await e.json();console.log("❌ API ERROR RESPONSE BODY:",o),!1===o.success&&o.error?(t=o.error.message,a=o.error.details):t=o.detail||o.message||t}catch(a){t=e.statusText||t}throw new o(e.status,t,a)}if(204===e.status)return null;let s=await e.json();return console.log("✅ API SUCCESS RESPONSE:",s),s}catch(e){if(e instanceof o)throw e;throw new o(0,"Network error or server unavailable")}}let r={login:async e=>{try{let t=await n("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return console.log("✅ API LOGIN SUCCESS RESPONSE:",t),"verification_required"in t.data&&t.data.verification_required,t.data}catch(e){if(e instanceof o)throw e;throw new o(0,"Login failed. Please check your credentials and try again.")}},signup:async e=>n("/auth/signup",{method:"POST",body:JSON.stringify(e)}),verifyEmail:async e=>n("/auth/verify-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),resendOTP:async e=>n("/auth/resend-otp",{method:"POST",body:JSON.stringify({user_id:e})}),getMe:async e=>n("/auth/users/me",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),businessOnboarding:async(e,t)=>{console.log("\uD83C\uDFE2 BUSINESS ONBOARDING API CALL:"),console.log("\uD83D\uDCE4 Sending to:","/business/onboarding"),console.log("\uD83D\uDCCB Data:",e),console.log("\uD83D\uDD11 Token:",t?"Bearer [PROVIDED]":"MISSING");let a=await n("/business/onboarding",{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:JSON.stringify(e)});return console.log("\uD83D\uDCE8 BUSINESS ONBOARDING RESPONSE:",a),a},getCurrentBusiness:async e=>n("/business/me",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),updateCurrentBusiness:async(e,t)=>n("/business/me",{method:"PUT",headers:{Authorization:"Bearer ".concat(t)},body:JSON.stringify(e)}),getCatalogItems:async(e,t)=>{let a=t?"?"+new URLSearchParams(Object.entries(t).reduce((e,t)=>{let[a,o]=t;return null!=o&&""!==o&&(e[a]=String(o)),e},{})).toString():"";return n("/catalog/".concat(a),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}})},getCatalogItem:async(e,t)=>n("/catalog/".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}),createCatalogItem:async(e,t)=>n("/catalog/",{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:JSON.stringify(e)}),updateCatalogItem:async(e,t,a)=>n("/catalog/".concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)}),deleteCatalogItem:async(e,t)=>n("/catalog/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}),toggleCatalogItemAvailability:async(e,t,a)=>n("/catalog/".concat(e,"/availability"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(a)},body:JSON.stringify({availability:t})}),uploadCatalogImage:async(e,t)=>{let a=new FormData;return a.append("file",e),n("/catalog/upload-image",{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:a})},createCatalogItemWithImage:async(e,t)=>{let a=new FormData;return a.append("name",e.name),e.description&&a.append("description",String(e.description)),e.category&&a.append("category",String(e.category)),a.append("price",String(e.price)),e.currency&&a.append("currency",String(e.currency)),e.availability&&a.append("availability",String(e.availability)),e.type&&a.append("type",String(e.type)),void 0!==e.template_id&&null!==e.template_id&&a.append("template_id",String(e.template_id)),a.append("extra_data",JSON.stringify(e.extra_data)),e.image&&a.append("image",e.image),n("/catalog/with-image",{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:a})},getCatalogCategories:async e=>n("/catalog/categories/list",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),getCatalogStatsSummary:async e=>n("/catalog/stats/summary",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),getCatalogTemplates:async e=>n("/catalog/templates",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),getCatalogTemplate:async(e,t)=>n("/catalog/templates/".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}),createCatalogTemplate:async(e,t)=>n("/catalog/templates",{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:JSON.stringify(e)}),updateCatalogTemplate:async(e,t,a)=>n("/catalog/templates/".concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)}),deleteCatalogTemplate:async(e,t)=>n("/catalog/templates/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}),bulkUploadCatalog:async(e,t,a)=>{let o=new FormData;return o.append("file",e),o.append("field_mapping",JSON.stringify(t)),n("/catalog/bulk-upload",{method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:o})}},c={getContacts:async(e,t)=>{let a=t?"?"+new URLSearchParams(Object.entries(t).reduce((e,t)=>{let[a,o]=t;return null!=o&&""!==o&&(e[a]=String(o)),e},{})).toString():"";return n("/contacts/".concat(a),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}})},getContact:async(e,t)=>n("/contacts/".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}),createContact:async(e,t)=>n("/contacts/",{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:JSON.stringify(e)}),updateContact:async(e,t,a)=>n("/contacts/".concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)}),deleteContact:async(e,t)=>n("/contacts/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}),getLeads:async(e,t)=>{let a=t?"?"+new URLSearchParams(Object.entries(t).reduce((e,t)=>{let[a,o]=t;return null!=o&&""!==o&&(e[a]=String(o)),e},{})).toString():"";return n("/leads/".concat(a),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}})},getLead:async(e,t)=>n("/leads/".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}),createLead:async(e,t)=>n("/leads/",{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:JSON.stringify(e)}),updateLead:async(e,t,a)=>n("/leads/".concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)}),deleteLead:async(e,t)=>n("/leads/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}),getLeadStats:async e=>n("/leads/stats/summary",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}})},s={getChatAgents:async e=>n("/chat_agents/",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),getChatAgent:async(e,t)=>n("/chat_agents/".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}),createChatAgent:async(e,t)=>n("/chat_agents/",{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:JSON.stringify(e)}),updateChatAgent:async(e,t,a)=>n("/chat_agents/".concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)}),deleteChatAgent:async(e,t)=>n("/chat_agents/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}),getChatAgentKnowledgeBases:async(e,t)=>n("/chat_agents/".concat(e,"/knowledge_bases"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}),updateChatAgentKnowledgeBases:async(e,t,a)=>n("/chat_agents/".concat(e,"/knowledge_bases"),{method:"PUT",headers:{Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)}),getChatAgentChannels:async(e,t)=>n("/chat_agents/".concat(e,"/channels"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}),updateChatAgentChannels:async(e,t,a)=>n("/chat_agents/".concat(e,"/channels"),{method:"PUT",headers:{Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)}),getChatAgentTools:async(e,t)=>n("/chat_agents/".concat(e,"/tools"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}),updateChatAgentTools:async(e,t,a)=>n("/chat_agents/".concat(e,"/tools"),{method:"PUT",headers:{Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)}),testChatAgent:async(e,t,a)=>n("/chat_agents/".concat(e,"/test"),{method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)}),deployChatAgent:async(e,t)=>n("/chat_agents/".concat(e,"/deploy"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}})},i={getKnowledgeBases:async e=>{let t=await n("/knowledge_base/",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});return console.log("response from backendS",t),t},getKnowledgeBase:async(e,t)=>n("/knowledge_base/".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}),createKnowledgeBase:async(e,t)=>{if(!e.file)return n("/knowledge_base/",{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:JSON.stringify(e)});{let a=new FormData;return a.append("title",e.title),e.category&&a.append("category",e.category),a.append("file",e.file),n("/knowledge_base/upload",{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:a})}},updateKnowledgeBase:async(e,t,a)=>n("/knowledge_base/".concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)}),deleteKnowledgeBase:async(e,t)=>n("/knowledge_base/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}})},d={getChannels:async e=>n("/channels/",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),getChannel:async(e,t)=>n("/channels/".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}),createChannel:async(e,t)=>n("/channels/",{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:JSON.stringify(e)}),updateChannel:async(e,t,a)=>n("/channels/".concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)}),deleteChannel:async(e,t)=>n("/channels/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}})},h={getTools:async e=>n("/tools/",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),getTool:async(e,t)=>n("/tools/".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}),createTool:async(e,t)=>n("/tools/",{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:JSON.stringify(e)}),updateTool:async(e,t,a)=>n("/tools/".concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)}),deleteTool:async(e,t)=>n("/tools/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}})},l={getConversations:async(e,t)=>{let a=t?"?"+new URLSearchParams(Object.entries(t).reduce((e,t)=>{let[a,o]=t;return null!=o&&(e[a]=String(o)),e},{})).toString():"";return n("/convo/".concat(a),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}})},createConversation:async(e,t)=>n("/convo/",{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:JSON.stringify(e)}),getConversation:async(e,t)=>n("/convo/".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}),updateConversation:async(e,t,a)=>n("/convo/".concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)}),deleteConversation:async(e,t)=>n("/convo/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}),addMessage:async(e,t,a)=>n("/convo/".concat(e,"/messages"),{method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)}),updateSummary:async(e,t,a)=>n("/convo/".concat(e,"/summary"),{method:"PUT",headers:{Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)}),getConversationMessages:async(e,t,a)=>{let o=a?"?"+new URLSearchParams(Object.entries(a).reduce((e,t)=>{let[a,o]=t;return null!=o&&(e[a]=String(o)),e},{})).toString():"";return n("/convo/".concat(e,"/messages").concat(o),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}})}}}}]);